import{c as _,j as e,T as P,r as y,C as re,E as le}from"./index-yBuqoKGI.js";import{u as ie}from"./useEvents-CvLkZclv.js";import{u as oe}from"./useStats-BMGZsBJ0.js";import{S as X,M as I,C as H,c as ne}from"./photos-CXRimizz.js";import{T as ce,C as de}from"./ConfirmDialog-DdNBrVAV.js";import{X as $}from"./x-BjeGcAMI.js";import{C as xe}from"./chevron-left-DP2YTUIO.js";import{p as E,f as Y,c as B,a as me}from"./pace-Dbu3TRjw.js";import{R as J}from"./route-E32te0-W.js";import{T as Z}from"./trending-up-DKkkamza.js";import{C as q}from"./clock-DWTspLWB.js";import{C as F}from"./calendar-BREsfleD.js";import{D as pe,C as he,S as fe}from"./share-2-ReMT972w.js";import{S as ue}from"./search-5ExBaNex.js";import{P as Q}from"./plus-CVMpTSOe.js";import{C as ge}from"./chevron-down-BFeqdzwj.js";const be=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ye=_("git-branch",be);const je=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Ne=_("layout-list",je);const we=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ke=_("pencil",we);function ve({rating:t,size:r=10}){return e.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5}).map((a,n)=>e.jsx(X,{size:r,className:n<t?"text-amber-400 fill-amber-400":"text-gray-700"},n))})}function Ce({type:t}){const r=P[t]||"#6b7280";return e.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full",style:{backgroundColor:r+"20",color:r},children:t})}function Se({photos:t,initialIndex:r,onClose:a}){const[n,s]=y.useState(r),c=y.useRef(null),o=y.useRef(0),[p,i]=y.useState(0),h=y.useCallback(x=>{s(g=>{const m=g+x;return m<0||m>=t.length?g:m}),i(0)},[t.length]);y.useEffect(()=>{const x=g=>{g.key==="Escape"&&a(),g.key==="ArrowLeft"&&h(-1),g.key==="ArrowRight"&&h(1)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[h,a]);const u=x=>{c.current=x.touches[0].clientX,o.current=0},b=x=>{c.current!==null&&(o.current=x.touches[0].clientX-c.current,i(o.current))},d=()=>{o.current<-60?h(1):o.current>60&&h(-1),c.current=null,o.current=0,i(0)};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex flex-col",onClick:a,children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 z-10 bg-white/10 backdrop-blur rounded-full p-2 text-white/80 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx($,{size:22})}),n>0&&e.jsx("button",{onClick:x=>{x.stopPropagation(),h(-1)},className:"absolute left-3 top-1/2 -translate-y-1/2 z-10 bg-white/10 backdrop-blur rounded-full p-2 text-white/70 hover:text-white hover:bg-white/20 transition-colors hidden sm:flex",children:e.jsx(xe,{size:24})}),n<t.length-1&&e.jsx("button",{onClick:x=>{x.stopPropagation(),h(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 z-10 bg-white/10 backdrop-blur rounded-full p-2 text-white/70 hover:text-white hover:bg-white/20 transition-colors hidden sm:flex",children:e.jsx(re,{size:24})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden",onTouchStart:u,onTouchMove:b,onTouchEnd:d,onClick:x=>x.stopPropagation(),children:e.jsx("img",{src:t[n],alt:"",className:"max-w-full max-h-full object-contain rounded-xl select-none transition-transform duration-150",style:{transform:`translateX(${p}px)`},draggable:!1})}),t.length>1&&e.jsx("div",{className:"pb-6 text-center",children:e.jsxs("span",{className:"text-white/60 text-sm font-medium bg-white/10 backdrop-blur px-4 py-1.5 rounded-full",children:[n+1," of ",t.length]})})]})}function Te({photos:t}){const[r,a]=y.useState(null);return!t||t.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.map((n,s)=>e.jsx("button",{onClick:()=>a(s),className:"aspect-square rounded-xl overflow-hidden group focus:outline-none focus:ring-2 focus:ring-indigo-500",children:e.jsx("img",{src:n,alt:"",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"})},s))}),r!==null&&e.jsx(Se,{photos:t,initialIndex:r,onClose:()=>a(null)})]})}function ze({eventA:t,eventB:r,onClose:a}){const n=P[t.type]||"#6b7280",s=P[r.type]||"#6b7280",c=E(t.time),o=E(r.time),p=[{label:"Distance",icon:J,a:t.distance||0,b:r.distance||0,unit:"km"},{label:"Elevation",icon:Z,a:t.elevation||0,b:r.elevation||0,unit:"m",formatVal:i=>i.toLocaleString()},{label:"Difficulty",icon:X,a:t.difficulty||0,b:r.difficulty||0,unit:"/5"},{label:"Time",icon:q,a:c||0,b:o||0,unit:"",formatVal:i=>i?Y(i):"--",invertWinner:!0}];return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",onClick:a,children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 max-w-md w-full overflow-hidden shadow-2xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex border-b border-gray-800",children:[e.jsx(K,{event:t,color:n}),e.jsx("div",{className:"w-px bg-gray-800"}),e.jsx(K,{event:r,color:s})]}),e.jsxs("div",{className:"flex border-b border-gray-800 text-xs",children:[e.jsx(D,{icon:I,value:t.type,color:n}),e.jsx("div",{className:"w-px bg-gray-800"}),e.jsx(D,{icon:I,value:r.type,color:s})]}),e.jsxs("div",{className:"flex border-b border-gray-800 text-xs",children:[e.jsx(D,{icon:F,value:t.date||"No date",color:"#9ca3af"}),e.jsx("div",{className:"w-px bg-gray-800"}),e.jsx(D,{icon:F,value:r.date||"No date",color:"#9ca3af"})]}),e.jsx("div",{className:"p-4 space-y-4",children:p.map(i=>{const h=Math.max(i.a,i.b,1),u=i.invertWinner?i.a>0&&(i.b===0||i.a<i.b):i.a>=i.b,b=i.invertWinner?i.b>0&&(i.a===0||i.b<i.a):i.b>=i.a,d=i.formatVal||(x=>`${x}`);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx(i.icon,{size:12,className:"text-gray-500"}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-bold",children:i.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-sm font-bold w-20 text-right tabular-nums ${u?"text-white":"text-gray-600"}`,children:[d(i.a),i.unit]}),e.jsxs("div",{className:"flex-1 flex gap-1 h-5",children:[e.jsx("div",{className:"flex-1 flex justify-end",children:e.jsx("div",{className:"h-full rounded-l-sm transition-all duration-500",style:{width:`${i.a/h*100}%`,backgroundColor:n,opacity:u?1:.3}})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-full rounded-r-sm transition-all duration-500",style:{width:`${i.b/h*100}%`,backgroundColor:s,opacity:b?1:.3}})})]}),e.jsxs("span",{className:`text-sm font-bold w-20 tabular-nums ${b?"text-white":"text-gray-600"}`,children:[d(i.b),i.unit]})]})]},i.label)})}),e.jsx("div",{className:"border-t border-gray-800 p-4",children:e.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl bg-gray-800 text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:[e.jsx($,{size:16}),"Close"]})})]})})}function K({event:t,color:r}){return e.jsxs("div",{className:"flex-1 p-4 text-center",children:[e.jsx("div",{className:"text-3xl mb-1.5",children:t.badge}),e.jsx("div",{className:"text-white font-bold text-sm truncate px-2",children:t.name}),e.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",style:{color:r},children:t.type})]})}function D({icon:t,value:r,color:a}){return e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3",children:[e.jsx(t,{size:11,style:{color:a}}),e.jsx("span",{className:"truncate",style:{color:a},children:r})]})}function Le({event:t,onClose:r}){const a=y.useRef(null),[n,s]=y.useState(!1);y.useEffect(()=>{const p=Pe(t);a.current=p},[t]);const c=()=>{a.current&&a.current.toBlob(p=>{const i=URL.createObjectURL(p),h=document.createElement("a");h.href=i,h.download=`${t.name.replace(/\s+/g,"-").toLowerCase()}-card.png`,h.click(),URL.revokeObjectURL(i)},"image/png")},o=async()=>{if(a.current)try{const p=await new Promise(i=>a.current.toBlob(i,"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":p})]),s(!0),setTimeout(()=>s(!1),2e3)}catch{c()}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:r,children:e.jsxs("div",{className:"relative max-w-sm w-full",onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:r,className:"absolute -top-10 right-0 text-white/70 hover:text-white",children:e.jsx($,{size:24})}),e.jsx("canvas",{ref:p=>{p&&a.current&&(p.width=450,p.height=600,p.getContext("2d").drawImage(a.current,0,0,p.width,p.height))},width:450,height:600,className:"w-full rounded-xl shadow-2xl"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:c,className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-xl transition-colors",children:[e.jsx(pe,{size:18})," Download"]}),e.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-white font-medium py-3 rounded-xl border border-gray-700 transition-colors",children:[e.jsx(he,{size:18})," ",n?"Copied!":"Copy"]})]})]})})}function Pe(t){const n=document.createElement("canvas");n.width=900,n.height=1200;const s=n.getContext("2d"),c=P[t.type]||"#8b5cf6",o=s.createLinearGradient(0,0,900,1200);o.addColorStop(0,"#0f172a"),o.addColorStop(.5,"#1e1b4b"),o.addColorStop(1,"#0f172a"),s.fillStyle=o,s.fillRect(0,0,900,1200),s.globalAlpha=.1;const p=s.createRadialGradient(900/2,350,0,900/2,350,500);p.addColorStop(0,c),p.addColorStop(1,"transparent"),s.fillStyle=p,s.fillRect(0,0,900,1200),s.globalAlpha=1,s.textAlign="center",s.font="96px system-ui, -apple-system, sans-serif",s.fillText(t.badge||"ðŸ†",900/2,180);const i=(t.type||"").toUpperCase();s.font="bold 14px system-ui, -apple-system, sans-serif";const h=s.measureText(i).width+32;R(s,(900-h)/2,210,h,30,15),s.fillStyle=c+"30",s.fill(),s.fillStyle=c,s.textAlign="center",s.font="bold 13px system-ui, -apple-system, sans-serif",s.fillText(i,900/2,231),s.fillStyle="#ffffff",s.font="bold 44px system-ui, -apple-system, sans-serif",s.textAlign="center";const u=t.name.length>24?t.name.slice(0,22)+"...":t.name;s.fillText(u,900/2,310),t.location&&(s.fillStyle="#9ca3af",s.font="18px system-ui, -apple-system, sans-serif",s.fillText(t.location,900/2,348));const b=s.createLinearGradient(200,0,700,0);b.addColorStop(0,"transparent"),b.addColorStop(.5,"#374151"),b.addColorStop(1,"transparent"),s.fillStyle=b,s.fillRect(200,380,500,1);const d=[];t.distance&&d.push({val:`${t.distance}km`,label:"DISTANCE",color:"#10b981"}),t.elevation&&d.push({val:`${t.elevation.toLocaleString()}m`,label:"ELEVATION",color:"#f59e0b"}),t.difficulty&&d.push({val:`${t.difficulty}/5`,label:"DIFFICULTY",color:"#ef4444"});const x=E(t.time);if(x&&d.push({val:Y(x),label:"TIME",color:"#06b6d4"}),d.length>0){const g=Math.min(d.length,4),m=160,f=110,w=20,S=(900-(m*g+w*(g-1)))/2,C=420;d.forEach((T,L)=>{const l=S+L*(m+w);s.fillStyle="rgba(255,255,255,0.05)",R(s,l,C,m,f,16),s.fill(),s.strokeStyle="rgba(255,255,255,0.08)",s.lineWidth=1,R(s,l,C,m,f,16),s.stroke(),s.fillStyle="#ffffff",s.font="bold 30px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText(T.val,l+m/2,C+50),s.fillStyle=T.color,s.font="bold 11px system-ui, -apple-system, sans-serif",s.fillText(T.label,l+m/2,C+80)})}if(t.difficulty){s.fillStyle="#6b7280",s.font="bold 10px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText("DIFFICULTY",900/2,572);for(let N=0;N<5;N++){const S=402+N*24;s.beginPath(),s.arc(S,590,8,0,Math.PI*2),s.fillStyle=N<t.difficulty?"#f59e0b":"rgba(255,255,255,0.1)",s.fill()}}return t.date&&(s.fillStyle="#6b7280",s.font="18px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText(t.date,900/2,660)),$e(s,900,1200,t,c),s.fillStyle="#4b5563",s.font="bold 14px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText("Joe's Endurance CV",900/2,1160),s.fillStyle="#374151",s.font="12px system-ui, -apple-system, sans-serif",s.fillText("Built with grit, tracked with code",900/2,1180),n}function $e(t,r,a,n,s){const c=a-80,o=180,p=c-o,i=80,h=We(n.type,n.distance||50);t.beginPath();for(let b=0;b<=i;b++){const d=b/i,x=d*r;let g=0;for(const f of h)g+=Math.sin(d*Math.PI*f.freq+f.phase)*f.amp;const m=p+o*(1-(g+1.5)/3);b===0?t.moveTo(x,m):t.lineTo(x,m)}t.lineTo(r,c),t.lineTo(0,c),t.closePath();const u=t.createLinearGradient(0,p,0,c);u.addColorStop(0,s+"25"),u.addColorStop(1,s+"05"),t.fillStyle=u,t.fill()}function We(t,r){const a=r*7.3%17;return t==="Mountain"?[{freq:1.2+a*.05,amp:1,phase:.3},{freq:2.8,amp:.5,phase:1.2}]:t==="Ultra"?[{freq:2+a*.04,amp:.6,phase:.5},{freq:4,amp:.3,phase:1.8}]:[{freq:1.5,amp:.15,phase:a*.2},{freq:3,amp:.08,phase:1},{freq:.5,amp:.3,phase:0}]}function R(t,r,a,n,s,c){t.beginPath(),t.moveTo(r+c,a),t.lineTo(r+n-c,a),t.quadraticCurveTo(r+n,a,r+n,a+c),t.lineTo(r+n,a+s-c),t.quadraticCurveTo(r+n,a+s,r+n-c,a+s),t.lineTo(r+c,a+s),t.quadraticCurveTo(r,a+s,r,a+s-c),t.lineTo(r,a+c),t.quadraticCurveTo(r,a,r+c,a),t.closePath()}function Me({distance:t,elevation:r,type:a="Mountain"}){const n=P[a]||"#8b5cf6",{pathD:s,areaD:c,xMarkers:o,yMarkers:p,viewBox:i}=y.useMemo(()=>{const f=t||50,w=r||500,N=120,S=Ee(a,f),C=[];for(let v=0;v<=N;v++){const z=v/N;let W=0;for(const M of S)W+=Math.sin(z*Math.PI*M.freq+M.phase)*M.amp;C.push(W)}const T=Math.min(...C),l=Math.max(...C)-T||1,j=C.map(v=>(v-T)/l*w).map((v,z)=>{const W=40+z/N*320,M=112-v/w*96;return{x:W,y:M}}),G=j.map((v,z)=>z===0?`M ${v.x.toFixed(1)} ${v.y.toFixed(1)}`:`L ${v.x.toFixed(1)} ${v.y.toFixed(1)}`).join(" "),ee=j[j.length-1],te=j[0],A=112,se=`${G} L ${ee.x.toFixed(1)} ${A} L ${te.x.toFixed(1)} ${A} Z`,U=f<=20?4:f<=60?5:4,V=[];for(let v=0;v<=U;v++){const z=v/U,W=Math.round(z*f);V.push({x:40+z*320,label:`${W}`})}const ae=[{y:A,label:"0"},{y:16+96/2,label:`${Math.round(w/2)}`},{y:16,label:`${w}`}];return{pathD:G,areaD:se,xMarkers:V,yMarkers:ae,viewBox:"0 0 400 140"}},[t,r,a]);return!t&&!r?null:e.jsx("div",{className:"w-full",children:e.jsxs("svg",{viewBox:i,className:"w-full h-auto",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`elev-fill-${a}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.35"}),e.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"0.02"})]})}),p.map((h,u)=>e.jsx("line",{x1:"40",y1:h.y,x2:"360",y2:h.y,stroke:"#374151",strokeWidth:"0.5",strokeDasharray:"3 3"},u)),e.jsx("path",{d:c,fill:`url(#elev-fill-${a})`}),e.jsx("path",{d:s,fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.map((h,u)=>e.jsxs("text",{x:h.x,y:"136",textAnchor:"middle",fill:"#6b7280",fontSize:"9",fontFamily:"system-ui, sans-serif",children:[h.label,"km"]},u)),p.map((h,u)=>e.jsxs("text",{x:"36",y:h.y+3,textAnchor:"end",fill:"#6b7280",fontSize:"8",fontFamily:"system-ui, sans-serif",children:[h.label,"m"]},u))]})})}function Ee(t,r){const a=r*7.3%17;switch(t){case"Mountain":return[{freq:1.2+a*.05,amp:1,phase:.3},{freq:2.8+a*.03,amp:.6,phase:1.2},{freq:5.5,amp:.25,phase:a*.4},{freq:8,amp:.12,phase:2.1}];case"Ultra":return[{freq:2+a*.04,amp:.7,phase:.5},{freq:4.5,amp:.4,phase:a*.3},{freq:7,amp:.2,phase:1.8},{freq:1,amp:.3,phase:.1}];default:return[{freq:1.5,amp:.15,phase:a*.2},{freq:3,amp:.08,phase:1},{freq:6,amp:.04,phase:2.5},{freq:.5,amp:.3,phase:0}]}}function De({event:t,onBack:r,onEdit:a,onDelete:n,onUpdatePhotos:s,onUpdate:c}){const[o,p]=y.useState(!1),[i,h]=y.useState(!1),[u,b]=y.useState(""),d=t.photos||[],x=t.kitList||[],g=6;return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[e.jsxs("div",{className:"h-48 flex items-center justify-center text-6xl relative",style:{background:t.heroImage},children:[e.jsx("button",{onClick:r,className:"absolute top-4 left-4 bg-black/40 backdrop-blur rounded-full p-2 text-white hover:bg-black/60 transition-colors",children:e.jsx(ge,{size:18,className:"rotate-90"})}),e.jsx("span",{children:t.badge}),t.completions>1&&e.jsxs("span",{className:"absolute top-4 right-4 bg-indigo-500 text-white text-sm font-bold px-2.5 py-1 rounded-full",children:["Ã—",t.completions]})]}),e.jsx("div",{className:"px-5 -mt-6 relative",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",style:{color:P[t.type]},children:t.type}),e.jsx("h2",{className:"text-2xl font-black text-white mt-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-sm mt-1",children:[e.jsx(I,{size:13})," ",t.location]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>h(!0),className:"bg-gray-800 border border-gray-700 rounded-xl p-2.5 text-gray-400 hover:text-indigo-400 hover:border-indigo-500 transition-colors",children:e.jsx(fe,{size:16})}),e.jsx("button",{onClick:()=>a(t.id),className:"bg-gray-800 border border-gray-700 rounded-xl p-2.5 text-gray-400 hover:text-white hover:border-gray-500 transition-colors",children:e.jsx(ke,{size:16})}),e.jsx("button",{onClick:()=>p(!0),className:"bg-gray-800 border border-gray-700 rounded-xl p-2.5 text-gray-400 hover:text-red-400 hover:border-red-700 transition-colors",children:e.jsx(ce,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-5",children:[t.distance&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(J,{size:16,className:"text-emerald-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-white font-bold",children:[t.distance,"km"]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Distance"})]}),t.elevation&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(Z,{size:16,className:"text-orange-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-white font-bold",children:[t.elevation.toLocaleString(),"m"]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Elevation"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(X,{size:16,className:"text-amber-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-white font-bold",children:[t.difficulty,"/5"]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Difficulty"})]})]}),E(t.time)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(q,{size:16,className:"text-cyan-400 mx-auto mb-1"}),e.jsx("div",{className:"text-white font-bold",children:Y(E(t.time))}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Finish Time"})]}),B(t.time,t.distance)&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(q,{size:16,className:"text-indigo-400 mx-auto mb-1"}),e.jsx("div",{className:"text-white font-bold",children:me(B(t.time,t.distance))}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Pace"})]})]}),!t.date&&!t.time&&e.jsx("div",{className:"flex gap-2 mt-4 flex-wrap",children:[{icon:F,text:"Add date"},{icon:q,text:"Add finish time"},{icon:H,text:"Add photos"}].map((m,f)=>e.jsxs("button",{onClick:()=>a(t.id),className:"text-xs bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full flex items-center gap-1.5 border border-gray-700 border-dashed hover:border-gray-500 transition-colors",children:[e.jsx(m.icon,{size:12})," ",m.text]},f))})]}),t.peaks?.length>0&&e.jsxs("div",{className:"px-5 pb-4",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-indigo-400 font-bold mb-2",children:"Peaks Summited"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:t.peaks.map((m,f)=>e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-300 text-xs font-medium px-2.5 py-1 rounded-lg border border-indigo-500/20",children:["â›°ï¸ ",m]},f))})]}),t.story&&e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-emerald-400 font-bold mb-2",children:"The Story"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:t.story})]}),t.lessons&&e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-amber-400 font-bold mb-2",children:"Lessons Learned"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:t.lessons})]}),e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"text-[10px] uppercase tracking-widest text-cyan-400 font-bold",children:["Kit List ",x.length>0&&`(${x.filter(m=>m.checked).length}/${x.length})`]})}),x.length>0&&e.jsx("div",{className:"space-y-1.5 mb-3",children:x.map((m,f)=>e.jsxs("button",{onClick:()=>{const w=x.map((N,S)=>S===f?{...N,checked:!N.checked}:N);c({kitList:w})},className:"w-full flex items-center gap-2.5 text-left group",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors ${m.checked?"bg-cyan-500/20 border-cyan-500":"border-gray-600 group-hover:border-gray-400"}`,children:m.checked&&e.jsx("span",{className:"text-cyan-400 text-xs",children:"âœ“"})}),e.jsx("span",{className:`text-sm ${m.checked?"text-gray-500 line-through":"text-gray-300"}`,children:m.item}),e.jsx("button",{onClick:w=>{w.stopPropagation(),c({kitList:x.filter((N,S)=>S!==f)})},className:"ml-auto text-gray-700 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{size:12})})]},f))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:m=>b(m.target.value),onKeyDown:m=>{m.key==="Enter"&&u.trim()&&(c({kitList:[...x,{item:u.trim(),checked:!1}]}),b(""))},placeholder:"Add kit item...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-1.5 text-xs text-white placeholder:text-gray-500 focus:outline-none focus:border-cyan-500"}),e.jsx("button",{onClick:()=>{u.trim()&&(c({kitList:[...x,{item:u.trim(),checked:!1}]}),b(""))},className:"bg-gray-800 border border-gray-700 rounded-lg px-2.5 hover:border-gray-500 transition-colors",children:e.jsx(Q,{size:14,className:"text-gray-400"})})]})]}),e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-rose-400 font-bold mb-2",children:"Nutrition Plan"}),e.jsx("textarea",{value:t.nutritionPlan||"",onChange:m=>c({nutritionPlan:m.target.value}),placeholder:t.status==="completed"?"What worked? What didn't?":"Plan your race-day nutrition...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-gray-300 placeholder:text-gray-600 focus:outline-none focus:border-rose-500 resize-y min-h-[60px]",rows:2})]}),e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsxs("div",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold mb-3",children:["Photos ",d.length>0&&`(${d.length}/${g})`]}),d.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(Te,{photos:d})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:d.map((m,f)=>e.jsxs("button",{type:"button",onClick:()=>s(d.filter((w,N)=>N!==f)),className:"text-[10px] text-red-400 bg-red-500/10 border border-red-500/20 px-2 py-1 rounded-lg hover:bg-red-500/20 transition-colors flex items-center gap-1",children:[e.jsx($,{size:10})," Photo ",f+1]},f))}),d.length<g&&e.jsxs("label",{className:"mt-2 inline-flex items-center gap-2 bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 cursor-pointer hover:border-gray-500 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async m=>{const f=m.target.files?.[0];if(f){try{const w=await ne(f);s([...d,w])}catch{}m.target.value=""}}}),e.jsx(H,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Add photo"})]})]}),(t.distance||t.elevation)&&e.jsxs("div",{className:"border-t border-gray-800 p-5",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold mb-3",children:"Elevation Profile"}),e.jsx(Me,{distance:t.distance,elevation:t.elevation,type:t.type})]})]})}),o&&e.jsx(de,{title:`Delete ${t.name}?`,message:"This cannot be undone. All data for this event will be permanently removed.",onConfirm:()=>{n(t.id),r()},onCancel:()=>p(!1)}),i&&e.jsx(Le,{event:t,onClose:()=>h(!1)})]})}function qe({events:t,upcoming:r,onSelect:a}){const n=t.filter(o=>o.date).sort((o,p)=>o.date.localeCompare(p.date)),c=[...t.filter(o=>!o.date),...n];return e.jsxs("div",{className:"relative pl-8",children:[e.jsx("div",{className:"absolute left-[15px] top-2 bottom-0 w-0.5 bg-gray-800"}),c.map((o,p)=>e.jsxs("button",{onClick:()=>a(o.id),className:"relative mb-4 w-full text-left group",children:[e.jsx("div",{className:"absolute left-[-25px] top-3 w-3.5 h-3.5 rounded-full border-2 border-gray-900 z-10",style:{backgroundColor:o.color||"#6366f1"}}),e.jsx("div",{className:"bg-gray-800/60 rounded-xl p-3 border border-gray-700/50 group-hover:border-gray-600 transition-all active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg flex-shrink-0",style:{background:o.heroImage},children:o.badge}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-bold text-sm truncate",children:o.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[e.jsx("span",{style:{color:P[o.type]},children:o.type}),o.distance&&e.jsxs("span",{children:[o.distance,"km"]}),o.elevation&&e.jsxs("span",{children:["â†‘",o.elevation,"m"]})]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("div",{className:"text-gray-500 text-[10px]",children:o.date||"Date TBC"})})]})})]},o.id)),r&&e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute left-[-25px] top-3 w-3.5 h-3.5 rounded-full border-2 border-gray-900 bg-red-500 z-10 animate-pulse"}),e.jsx("div",{className:"bg-red-900/20 rounded-xl p-3 border border-red-700/30 border-dashed",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg flex-shrink-0",style:{background:r.heroImage||"linear-gradient(135deg, #dc2626, #ea580c)"},children:r.badge||"ðŸŽ¯"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-red-400 font-bold",children:"Next Target"}),e.jsx("div",{className:"text-white font-bold text-sm truncate",children:r.name}),e.jsxs("div",{className:"text-gray-400 text-xs mt-0.5",children:[r.distance,"km Â· ",r.date]})]})]})})]})]})}const Ie=[{key:"newest",label:"Newest"},{key:"oldest",label:"Oldest"},{key:"dist-desc",label:"Distance â†“"},{key:"dist-asc",label:"Distance â†‘"},{key:"diff-desc",label:"Difficulty â†“"}];function et({onAddEvent:t,onEditEvent:r}){const[a,n]=y.useState(null),[s,c]=y.useState("cards"),[o,p]=y.useState(""),[i,h]=y.useState("All"),[u,b]=y.useState("newest"),[d,x]=y.useState([]),{completed:g,upcoming:m,deleteEvent:f,updateEvent:w}=ie(),{totalEvents:N,totalDistance:S}=oe(),C=y.useMemo(()=>{let l=g;if(o.trim()){const k=o.toLowerCase();l=l.filter(j=>j.name.toLowerCase().includes(k)||j.location&&j.location.toLowerCase().includes(k)||j.peaks&&j.peaks.some(O=>O.toLowerCase().includes(k)))}switch(i!=="All"&&(l=l.filter(k=>k.type===i)),l=[...l],u){case"newest":l.reverse();break;case"oldest":break;case"dist-desc":l.sort((k,j)=>(j.distance||0)-(k.distance||0));break;case"dist-asc":l.sort((k,j)=>(k.distance||0)-(j.distance||0));break;case"diff-desc":l.sort((k,j)=>(j.difficulty||0)-(k.difficulty||0));break}return l},[g,o,i,u]),T=o.trim()||i!=="All",L=a?g.find(l=>l.id===a):null;return L?e.jsx(De,{event:L,onBack:()=>n(null),onEdit:r,onDelete:l=>{f(l),n(null)},onUpdatePhotos:l=>w(L.id,{photos:l}),onUpdate:l=>w(L.id,l)}):e.jsxs("div",{className:"px-4 pb-24 sm:pb-8 pt-4 relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:"All Challenges"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[T?`${C.length} of ${N}`:N," events Â· ",S,"km total"]})]}),e.jsxs("div",{className:"flex bg-gray-800 rounded-lg border border-gray-700 p-0.5",children:[e.jsx("button",{onClick:()=>c("cards"),className:`p-2 rounded-md transition-colors ${s==="cards"?"bg-gray-700 text-white":"text-gray-500 hover:text-gray-300"}`,children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:()=>c("timeline"),className:`p-2 rounded-md transition-colors ${s==="timeline"?"bg-gray-700 text-white":"text-gray-500 hover:text-gray-300"}`,children:e.jsx(ye,{size:16})})]})]}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(ue,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:o,onChange:l=>p(l.target.value),placeholder:"Search events, locations, peaks...",className:"w-full bg-gray-800/60 border border-gray-700/50 rounded-xl pl-9 pr-9 py-2.5 text-sm text-white placeholder-gray-500 focus:border-indigo-500 focus:outline-none"}),o&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white",children:e.jsx($,{size:14})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-2",children:[e.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar",children:["All",...le].map(l=>e.jsx("button",{onClick:()=>h(l),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${i===l?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:text-white border border-gray-700"}`,children:l},l))}),e.jsx("select",{value:u,onChange:l=>b(l.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg text-xs text-gray-300 px-2 py-1.5 focus:outline-none flex-shrink-0",children:Ie.map(l=>e.jsx("option",{value:l.key,children:l.label},l.key))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T?e.jsxs("button",{onClick:()=>{p(""),h("All")},className:"text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1",children:[e.jsx($,{size:12})," Clear filters"]}):e.jsx("span",{}),g.length>=2&&e.jsx("button",{onClick:()=>x(d.length>0?[]:["selecting"]),className:`text-xs font-medium px-3 py-1.5 rounded-full transition-colors ${d.length>0?"bg-amber-500/20 text-amber-400 border border-amber-500/40":"text-gray-400 hover:text-white"}`,children:d.length>0?"Cancel Compare":"Compare"})]}),d.includes("selecting")&&e.jsx("div",{className:"bg-amber-900/20 border border-amber-700/30 rounded-xl px-4 py-2.5 mb-3 text-center",children:e.jsx("p",{className:"text-amber-300 text-xs font-medium",children:"Tap two events to compare them"})}),s==="timeline"?e.jsx(qe,{events:C,upcoming:m,onSelect:n}):e.jsx("div",{className:"space-y-3",children:C.map(l=>{const k=d.includes(l.id);return e.jsx("button",{onClick:()=>{d.length>0&&d[0]==="selecting"?x([l.id]):d.length===1&&d[0]!==l.id?x([d[0],l.id]):n(l.id)},className:`w-full text-left bg-gray-800/60 rounded-2xl overflow-hidden border transition-all active:scale-[0.98] ${k?"border-amber-500/60 ring-1 ring-amber-500/30":"border-gray-700/50 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-24 h-28 flex items-center justify-center text-3xl flex-shrink-0",style:{background:l.heroImage},children:l.badge}),e.jsxs("div",{className:"p-3.5 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-white font-bold text-base truncate",children:l.name}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mt-0.5",children:[e.jsx(I,{size:11})," ",l.location]})]}),l.completions>1&&e.jsxs("span",{className:"bg-indigo-500/20 text-indigo-300 text-[10px] font-bold px-1.5 py-0.5 rounded flex-shrink-0",children:["Ã—",l.completions]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2.5",children:[e.jsx(Ce,{type:l.type}),l.distance&&e.jsxs("span",{className:"text-gray-400 text-xs",children:[l.distance,"km"]}),l.elevation&&e.jsxs("span",{className:"text-gray-400 text-xs",children:["â†‘",l.elevation,"m"]}),l.photos?.length>0&&e.jsxs("span",{className:"text-gray-500 text-xs flex items-center gap-1",children:[e.jsx(H,{size:11})," ",l.photos.length]}),e.jsx("div",{className:"ml-auto",children:e.jsx(ve,{rating:l.difficulty})})]})]})]})},l.id)})}),e.jsx("button",{onClick:t,className:"fixed bottom-20 sm:bottom-6 right-4 sm:right-auto sm:left-1/2 sm:translate-x-[calc(min(50vw,320px)-2rem)] z-40 w-14 h-14 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center transition-all active:scale-90",children:e.jsx(Q,{size:24,strokeWidth:2.5})}),d.length===2&&(()=>{const l=g.find(j=>j.id===d[0]),k=g.find(j=>j.id===d[1]);return l&&k?e.jsx(ze,{eventA:l,eventB:k,onClose:()=>x([])}):null})()]})}export{et as default};
