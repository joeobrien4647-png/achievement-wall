import{c as E,j as e,G as A,B as O,r as h,b as _,l as L,E as R,T as F}from"./index-DRgCCeWg.js";import{u as W}from"./useEvents-CCzazLsy.js";import{M as G,c as I,S as U}from"./photos-R18mrIUH.js";import{p as Y,F as H}from"./gpxParser-C4hjP2j0.js";import{X as C}from"./x-CQnaXdDd.js";import{T as q}from"./trending-up-B45m5DyR.js";import{U as B}from"./upload-CYvd0jzl.js";import{C as V}from"./check-B_YvKYpk.js";import{P}from"./plus-DRLKXLm1.js";import{C as K}from"./chevron-left-BdWt5xoj.js";import{C as X}from"./camera-DIzj6c92.js";import{C as J}from"./chevron-down-YWDumaYw.js";const Q=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],Z=E("apple",Q);const ee=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],te=E("cloud",ee);const ae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],re=E("message-square",ae);const se=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],D=E("package",se);const le=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],ne=E("pound-sterling",le);function oe({value:r,onChange:n}){return e.jsx("div",{className:"grid grid-cols-4 gap-2",children:A.map(c=>e.jsx("button",{type:"button",onClick:()=>n(c),className:`h-12 rounded-xl border-2 transition-all ${r===c?"border-white scale-105 shadow-lg":"border-gray-700 hover:border-gray-500"}`,style:{background:c}},c))})}function ie({value:r,onChange:n}){return e.jsx("div",{className:"grid grid-cols-5 gap-2",children:O.map(c=>e.jsx("button",{type:"button",onClick:()=>n(c),className:`text-2xl h-11 rounded-xl border-2 transition-all flex items-center justify-center ${r===c?"border-white bg-gray-700 scale-105":"border-gray-700 bg-gray-800 hover:border-gray-500"}`,children:c},c))})}function ce({onImport:r}){const[n,c]=h.useState(null),[m,p]=h.useState(null),[b,u]=h.useState(!1),y=h.useRef(null),a=h.useCallback(s=>{if(!s)return;p(null),c(null);const t=new FileReader;t.onload=o=>{try{const x=Y(o.target.result);c(x)}catch(x){p(x.message||"Failed to parse GPX file")}},t.onerror=()=>p("Failed to read file"),t.readAsText(s)},[]),v=h.useCallback(s=>{s.preventDefault(),u(!1);const t=s.dataTransfer?.files?.[0];t&&t.name.toLowerCase().endsWith(".gpx")?a(t):p("Please drop a .gpx file")},[a]),j=h.useCallback(s=>{s.preventDefault(),u(!0)},[]),N=h.useCallback(s=>{s.preventDefault(),u(!1)},[]),l=h.useCallback(s=>{a(s.target.files?.[0]),s.target.value=""},[a]),i=h.useCallback(()=>{!n||!r||r({distance:n.distance,elevationGain:n.elevationGain,trackPoints:n.trackPoints,elevationProfile:n.elevationProfile})},[n,r]),g=h.useCallback(()=>{c(null),p(null)},[]);return n?e.jsxs("div",{className:"bg-gray-800/60 rounded-xl border border-gray-700/50 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[e.jsx(H,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"GPX Imported"})]}),e.jsx("button",{type:"button",onClick:g,className:"text-gray-500 hover:text-gray-300 transition-colors",children:e.jsx(C,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:n.distance.toFixed(1)}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"km"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(q,{size:14,className:"text-orange-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.elevationGain.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"m gain"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(G,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.trackPoints.length.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"points"})]})]}),e.jsx("button",{type:"button",onClick:i,className:"w-full py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium transition-colors",children:"Apply to Event"})]}):e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>y.current?.click(),onDrop:v,onDragOver:j,onDragLeave:N,className:`w-full rounded-xl border-2 border-dashed p-6 flex flex-col items-center gap-2 transition-colors cursor-pointer ${b?"border-emerald-500 bg-emerald-500/10":"border-gray-700/50 bg-gray-800/60 hover:border-gray-600"}`,children:[e.jsx(B,{size:24,className:b?"text-emerald-400":"text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Drop a ",e.jsx("span",{className:"text-gray-300 font-medium",children:".gpx"})," file or click to browse"]})]}),e.jsx("input",{ref:y,type:"file",accept:".gpx",onChange:l,className:"hidden"}),m&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:m})]})}const $=["Clothing","Footwear","Navigation","Food & Water","Safety","Other"],M={Clothing:"ðŸ‘•",Footwear:"ðŸ¥¾",Navigation:"ðŸ§­","Food & Water":"ðŸ¥¤",Safety:"ðŸ›¡ï¸",Other:"ðŸ“¦"},z={Mountain:[{name:"Waterproofs",category:"Clothing",checked:!1},{name:"Warm layers",category:"Clothing",checked:!1},{name:"Gaiters",category:"Footwear",checked:!1},{name:"Trekking poles",category:"Other",checked:!1},{name:"Map",category:"Navigation",checked:!1},{name:"Compass",category:"Navigation",checked:!1},{name:"Headtorch",category:"Navigation",checked:!1},{name:"First aid kit",category:"Safety",checked:!1},{name:"Whistle",category:"Safety",checked:!1},{name:"Emergency shelter",category:"Safety",checked:!1}],Ultra:[{name:"Headtorch",category:"Navigation",checked:!1},{name:"Spare batteries",category:"Navigation",checked:!1},{name:"Blister kit",category:"Safety",checked:!1},{name:"Emergency blanket",category:"Safety",checked:!1},{name:"Energy gels",category:"Food & Water",checked:!1},{name:"Electrolytes",category:"Food & Water",checked:!1},{name:"Phone charger",category:"Other",checked:!1},{name:"Change of socks",category:"Footwear",checked:!1}],Urban:[{name:"Phone",category:"Navigation",checked:!1},{name:"Portable charger",category:"Other",checked:!1},{name:"Snacks",category:"Food & Water",checked:!1},{name:"Water bottle",category:"Food & Water",checked:!1},{name:"Rain jacket",category:"Clothing",checked:!1},{name:"Comfortable shoes",category:"Footwear",checked:!1},{name:"Cash",category:"Other",checked:!1}]};function de({items:r=[],onChange:n,eventType:c="Mountain"}){const[m,p]=h.useState(""),[b,u]=h.useState("Other"),y=()=>{const i=m.trim();!i||r.some(s=>s.name.toLowerCase()===i.toLowerCase())||(n([...r,{name:i,category:b,checked:!1}]),p(""))},a=i=>{n(r.filter((g,s)=>s!==i))},v=i=>{n(r.map((g,s)=>s===i?{...g,checked:!g.checked}:g))},j=()=>{const i=z[c]||z.Mountain,g=new Set(r.map(t=>t.name.toLowerCase())),s=i.filter(t=>!g.has(t.name.toLowerCase()));n([...r,...s])},N=$.map(i=>({category:i,items:r.map((g,s)=>({...g,_index:s})).filter(g=>g.category===i)})).filter(i=>i.items.length>0),l=r.filter(i=>i.checked).length;return e.jsxs("div",{className:"space-y-3",children:[r.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[l,"/",r.length," packed"]}),e.jsx("div",{className:"flex-1 mx-3 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-300",style:{width:`${r.length>0?l/r.length*100:0}%`}})})]}),N.map(({category:i,items:g})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm",children:M[i]}),e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold",children:i})]}),e.jsx("div",{className:"space-y-1",children:g.map(s=>e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("button",{type:"button",onClick:()=>v(s._index),className:`w-5 h-5 rounded-md border flex-shrink-0 flex items-center justify-center transition-all ${s.checked?"bg-emerald-500 border-emerald-500":"border-gray-600 hover:border-gray-400"}`,children:s.checked&&e.jsx(V,{size:12,className:"text-white"})}),e.jsx("span",{className:`text-sm flex-1 transition-colors ${s.checked?"text-gray-500 line-through":"text-gray-200"}`,children:s.name}),e.jsx("button",{type:"button",onClick:()=>a(s._index),className:"opacity-0 group-hover:opacity-100 text-gray-600 hover:text-red-400 transition-all p-0.5",children:e.jsx(C,{size:14})})]},s._index))})]},i)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:i=>p(i.target.value),onKeyDown:i=>i.key==="Enter"&&(i.preventDefault(),y()),placeholder:"Add item...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("select",{value:b,onChange:i=>u(i.target.value),className:"bg-gray-800 border border-gray-700 rounded-xl px-2 py-2 text-sm text-gray-300 focus:outline-none focus:border-indigo-500 appearance-none cursor-pointer",children:$.map(i=>e.jsxs("option",{value:i,children:[M[i]," ",i]},i))}),e.jsx("button",{type:"button",onClick:y,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(P,{size:16,className:"text-gray-400"})})]}),e.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-2 text-xs text-indigo-400 hover:text-indigo-300 font-medium transition-colors",children:[e.jsx(D,{size:14}),"Load ",c," template"]})]})}const ue=[{key:"entry",label:"Entry",color:"#6366f1"},{key:"travel",label:"Travel",color:"#10b981"},{key:"accommodation",label:"Accomm.",color:"#f59e0b"},{key:"gear",label:"Gear",color:"#f43f5e"},{key:"food",label:"Food",color:"#f97316"},{key:"other",label:"Other",color:"#6b7280"}],k="achievement-wall-form-draft",xe=1e3;function he(r,n){const c=h.useRef(null),m=n?`${k}-${n}`:k;return h.useEffect(()=>(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{try{r.name?.trim()&&sessionStorage.setItem(m,JSON.stringify(r))}catch{}},xe),()=>{c.current&&clearTimeout(c.current)}),[r,m]),null}function ge(r){const n=r?`${k}-${r}`:k;try{const c=sessionStorage.getItem(n);return c?JSON.parse(c):null}catch{return null}}function pe(r){const n=r?`${k}-${r}`:k;sessionStorage.removeItem(n)}const me=[{key:"marathon",label:"Marathon",icon:"ðŸƒ",defaults:{type:"Urban",distance:42.2,difficulty:3,badge:"ðŸƒ",status:"completed"}},{key:"ultra50",label:"50km Ultra",icon:"ðŸ¥¾",defaults:{type:"Ultra",distance:50,difficulty:4,badge:"ðŸ¥¾",status:"completed"}},{key:"ultra100",label:"100km Ultra",icon:"ðŸ”¥",defaults:{type:"Ultra",distance:100,difficulty:5,badge:"ðŸ”¥",status:"completed"}},{key:"3peaks",label:"3 Peaks",icon:"ðŸ”ï¸",defaults:{type:"Mountain",distance:38,elevation:1585,difficulty:4,badge:"ðŸ”ï¸",status:"completed"}},{key:"parkrun",label:"Parkrun",icon:"ðŸŒ³",defaults:{type:"Urban",distance:5,difficulty:1,badge:"ðŸŒ³",status:"completed"}},{key:"half",label:"Half Marathon",icon:"ðŸ…",defaults:{type:"Urban",distance:21.1,difficulty:2,badge:"ðŸ…",status:"completed"}},{key:"mountain",label:"Mountain Hike",icon:"â›°ï¸",defaults:{type:"Mountain",distance:20,elevation:800,difficulty:3,badge:"â›°ï¸",status:"completed"}},{key:"10k",label:"10K Race",icon:"ðŸŽ¯",defaults:{type:"Urban",distance:10,difficulty:1,badge:"ðŸŽ¯",status:"completed"}}];function d({label:r,children:n}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1.5 block",children:r}),n]})}function S({value:r,onChange:n}){return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(c=>e.jsx("button",{type:"button",onClick:()=>n(c),className:"p-1",children:e.jsx(U,{size:24,className:`transition-colors ${c<=r?"text-amber-400 fill-amber-400":"text-gray-600"}`})},c))})}function T({tags:r,onChange:n,placeholder:c}){const[m,p]=h.useState(""),b=()=>{const u=m.trim();u&&!r.includes(u)&&n([...r,u]),p("")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:r.map((u,y)=>e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-300 text-xs font-medium px-2.5 py-1 rounded-lg border border-indigo-500/20 flex items-center gap-1.5",children:[u,e.jsx("button",{type:"button",onClick:()=>n(r.filter((a,v)=>v!==y)),children:e.jsx(C,{size:12})})]},y))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:u=>p(u.target.value),onKeyDown:u=>u.key==="Enter"&&(u.preventDefault(),b()),placeholder:c,className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{type:"button",onClick:b,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(P,{size:16,className:"text-gray-400"})})]})]})}function w({icon:r,title:n,children:c,defaultOpen:m=!1}){const[p,b]=h.useState(m);return e.jsxs("div",{className:"border border-gray-700/50 rounded-xl overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>b(u=>!u),className:"w-full flex items-center gap-2.5 px-3.5 py-3 bg-gray-800/40 hover:bg-gray-800/70 transition-colors",children:[r&&e.jsx(r,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-bold text-white flex-1 text-left",children:n}),e.jsx(J,{size:16,className:`text-gray-500 transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&e.jsx("div",{className:"px-3.5 py-3 border-t border-gray-700/50",children:c})]})}function Te({eventId:r,onBack:n}){const{getEventById:c,addEvent:m,updateEvent:p}=W(),b=r?c(r):null,u=!!b,y=_(),[a,v]=h.useState(()=>{if(b)return{...b};const t=ge(r);if(t)return t;let o={};try{const x=sessionStorage.getItem("formPrefill");x&&(o=JSON.parse(x))}catch{}return{...L(),name:"",type:"Mountain",status:"completed",distance:"",elevation:"",location:"",date:"",time:"",difficulty:3,peaks:[],story:"",lessons:"",badge:"ðŸ”ï¸",heroImage:A[0],completions:1,phase:"",week:"",progress:0,route:"",reasons:[],watchOuts:[],...o}});he(a,r);const[j,N]=h.useState([]),l=(t,o)=>v(x=>({...x,[t]:o})),i=t=>{if(t.preventDefault(),!a.name?.trim()){N(["Name is required"]);return}const o={...a,distance:a.distance?Number(a.distance):null,elevation:a.elevation?Number(a.elevation):null,date:a.date||null,time:a.time||null,completions:Math.max(1,Number(a.completions)||1),color:F[a.type]||"#8b5cf6"};if(u)p(r,o);else{const x=m(o);if(!x.success){N(x.errors);return}}pe(r),y.show(u?"Event updated":"Event added!",{type:"success"}),n()},g=t=>{v(o=>({...o,...t.defaults})),y.show(`${t.label} template applied`,{type:"success"})},s="w-full bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500 transition-colors";return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[e.jsxs("div",{className:"h-32 flex items-center justify-center text-5xl relative",style:{background:a.heroImage},children:[e.jsx("button",{onClick:n,className:"absolute top-4 left-4 bg-black/40 backdrop-blur rounded-full p-2 text-white hover:bg-black/60",children:e.jsx(K,{size:18})}),e.jsx("span",{children:a.badge})]}),e.jsx("div",{className:"px-4 -mt-4 relative",children:e.jsxs("form",{onSubmit:i,className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsx("h2",{className:"text-xl font-black text-white",children:u?"Edit Event":"New Event"}),!u&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1.5 block",children:"Quick Start"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar",children:me.map(t=>e.jsxs("button",{type:"button",onClick:()=>g(t),className:"flex-shrink-0 flex items-center gap-1.5 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-xs text-gray-300 hover:border-indigo-500 hover:text-white transition-colors",children:[e.jsx("span",{children:t.icon}),e.jsx("span",{className:"font-medium",children:t.label})]},t.key))})]}),j.length>0&&e.jsx("div",{className:"bg-red-900/30 border border-red-700/40 rounded-xl p-3",children:j.map((t,o)=>e.jsx("p",{className:"text-red-300 text-sm",children:t},o))}),e.jsx(d,{label:"Event Name",children:e.jsx("input",{type:"text",value:a.name,onChange:t=>l("name",t.target.value),placeholder:"Yorkshire 3 Peaks",className:s,maxLength:80})}),e.jsx(d,{label:"Type",children:e.jsx("div",{className:"flex gap-2",children:R.map(t=>e.jsx("button",{type:"button",onClick:()=>l("type",t),className:`flex-1 py-2 rounded-xl text-sm font-bold transition-all ${a.type===t?"text-white border-2":"text-gray-400 bg-gray-800 border-2 border-gray-700 hover:border-gray-500"}`,style:a.type===t?{backgroundColor:F[t]+"30",borderColor:F[t]}:{},children:t},t))})}),e.jsx(d,{label:"Status",children:e.jsx("div",{className:"flex gap-2",children:["completed","upcoming","wishlist"].map(t=>e.jsx("button",{type:"button",onClick:()=>l("status",t),className:`flex-1 py-2 rounded-xl text-sm font-medium capitalize transition-all border-2 ${a.status===t?"bg-indigo-500/20 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t},t))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Distance (km)",children:e.jsx("input",{type:"number",value:a.distance,onChange:t=>l("distance",t.target.value),placeholder:"38",className:s,min:"0",step:"0.1"})}),e.jsx(d,{label:"Elevation (m)",children:e.jsx("input",{type:"number",value:a.elevation,onChange:t=>l("elevation",t.target.value),placeholder:"1585",className:s,min:"0"})})]}),e.jsx(d,{label:"Import GPX Route",children:e.jsx(ce,{onImport:({distance:t,elevationGain:o})=>{t&&l("distance",Math.round(t*10)/10),o&&l("elevation",Math.round(o))}})}),e.jsx(d,{label:"Location",children:e.jsx("input",{type:"text",value:a.location,onChange:t=>l("location",t.target.value),placeholder:"Yorkshire Dales",className:s})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Date",children:e.jsx("input",{type:"date",value:a.date||"",onChange:t=>l("date",t.target.value),className:s})}),a.status==="completed"&&e.jsx(d,{label:"Finish Time (HH:MM:SS)",children:e.jsx("input",{type:"text",value:a.time||"",onChange:t=>l("time",t.target.value),placeholder:"12:34:56",className:s})})]}),e.jsx(d,{label:"Difficulty",children:e.jsx(S,{value:a.difficulty,onChange:t=>l("difficulty",t)})}),a.status==="completed"&&e.jsx(d,{label:"Completions",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>l("completions",Math.max(1,(a.completions||1)-1)),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"âˆ’"}),e.jsx("span",{className:"text-white font-bold text-xl w-8 text-center",children:a.completions||1}),e.jsx("button",{type:"button",onClick:()=>l("completions",(a.completions||1)+1),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"+"})]})}),e.jsx(d,{label:"Peaks Summited",children:e.jsx(T,{tags:a.peaks||[],onChange:t=>l("peaks",t),placeholder:"Pen-y-ghent (694m)"})}),e.jsx(d,{label:"The Story",children:e.jsx("textarea",{value:a.story,onChange:t=>l("story",t.target.value),placeholder:"Tell the story of this event...",className:`${s} min-h-[100px] resize-y`})}),e.jsx(d,{label:"Lessons Learned",children:e.jsx("textarea",{value:a.lessons,onChange:t=>l("lessons",t.target.value),placeholder:"What did you learn?",className:`${s} min-h-[80px] resize-y`})}),e.jsx(d,{label:`Photos${(a.photos?.length||0)>0?` (${a.photos.length}/5)`:""}`,children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[(a.photos||[]).map((t,o)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden relative group",children:[e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>l("photos",a.photos.filter((x,f)=>f!==o)),className:"absolute top-1 right-1 bg-black/60 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity text-white",children:e.jsx(C,{size:12})})]},o)),(a.photos?.length||0)<5&&e.jsxs("label",{className:"aspect-square bg-gray-800 rounded-xl border-2 border-dashed border-gray-700 flex items-center justify-center cursor-pointer hover:border-gray-500 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async t=>{const o=t.target.files?.[0];if(o){try{const x=await I(o);l("photos",[...a.photos||[],x])}catch{}t.target.value=""}}}),e.jsxs("div",{className:"text-center",children:[e.jsx(X,{size:18,className:"text-gray-600 mx-auto"}),e.jsx("span",{className:"text-[10px] text-gray-600 mt-1 block",children:"Add"})]})]})]})}),e.jsx(w,{icon:D,title:`Kit List${(a.kitList?.length||0)>0?` (${a.kitList.length})`:""}`,children:e.jsx(de,{items:a.kitList||[],onChange:t=>l("kitList",t),eventType:a.type})}),e.jsxs(w,{icon:ne,title:"Costs",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ue.map(t=>e.jsx(d,{label:t.label,children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"Â£"}),e.jsx("input",{type:"number",value:a.costs?.[t.key]||"",onChange:o=>l("costs",{...a.costs||{},[t.key]:o.target.value===""?0:Number(o.target.value)}),placeholder:"0",className:s+" pl-7",min:"0",step:"0.01"})]})},t.key))}),(()=>{const t=Object.values(a.costs||{}).reduce((o,x)=>o+(Number(x)||0),0);return t>0?e.jsxs("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-gray-700/50",children:[e.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Total"}),e.jsxs("span",{className:"text-white font-black text-lg",children:["Â£",t.toLocaleString()]})]}):null})()]}),a.status==="completed"&&e.jsx(w,{icon:te,title:"Race Day Weather",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Temperature (Â°C)",children:e.jsx("input",{type:"number",value:a.weather?.temp??"",onChange:t=>l("weather",{...a.weather,temp:t.target.value===""?null:Number(t.target.value)}),placeholder:"12",className:s})}),e.jsx(d,{label:"Wind",children:e.jsx("input",{type:"text",value:a.weather?.wind??"",onChange:t=>l("weather",{...a.weather,wind:t.target.value}),placeholder:"Light breeze",className:s})})]}),e.jsx(d,{label:"Conditions",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:["â˜€ï¸ Sunny","â›… Cloudy","ðŸŒ§ï¸ Rain","ðŸŒ¨ï¸ Snow","ðŸ’¨ Windy","ðŸŒ«ï¸ Fog","ðŸ¥µ Hot","ðŸ¥¶ Cold"].map(t=>{const o=t.split(" ")[1],x=(a.weather?.conditions??"")===o;return e.jsx("button",{type:"button",onClick:()=>l("weather",{...a.weather,conditions:x?"":o}),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${x?"bg-indigo-500/20 border-indigo-500 text-white border":"bg-gray-800 border border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t},t)})})})]})}),a.status==="completed"&&e.jsx(w,{icon:re,title:"Race Review",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{label:"Overall Rating",children:e.jsx(S,{value:a.review?.rating??0,onChange:t=>l("review",{...a.review,rating:t})})}),e.jsx(d,{label:"Would you do it again?",children:e.jsx("div",{className:"flex gap-2",children:[{label:"Absolutely!",value:!0},{label:"Probably not",value:!1}].map(t=>e.jsx("button",{type:"button",onClick:()=>l("review",{...a.review,wouldRepeat:t.value}),className:`flex-1 py-2 rounded-xl text-sm font-medium transition-all border-2 ${a.review?.wouldRepeat===t.value?"bg-indigo-500/20 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t.label},String(t.value)))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Organization",children:e.jsx(S,{value:a.review?.organization??0,onChange:t=>l("review",{...a.review,organization:t})})}),e.jsx(d,{label:"Course Quality",children:e.jsx(S,{value:a.review?.courseQuality??0,onChange:t=>l("review",{...a.review,courseQuality:t})})})]})]})}),(a.status==="completed"||a.status==="upcoming")&&e.jsx(w,{icon:Z,title:`Nutrition Plan${(a.nutrition?.length||0)>0?` (${a.nutrition.length})`:""}`,children:e.jsxs("div",{className:"space-y-2",children:[(a.nutrition||[]).map((t,o)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/60 rounded-lg p-2",children:[e.jsx("input",{type:"text",value:t.time,onChange:x=>{const f=[...a.nutrition];f[o]={...f[o],time:x.target.value},l("nutrition",f)},placeholder:"Hour 2",className:"w-20 bg-transparent text-white text-sm border-none focus:outline-none placeholder:text-gray-600"}),e.jsx("input",{type:"text",value:t.item,onChange:x=>{const f=[...a.nutrition];f[o]={...f[o],item:x.target.value},l("nutrition",f)},placeholder:"Gel + 200ml water",className:"flex-1 bg-transparent text-white text-sm border-none focus:outline-none placeholder:text-gray-600"}),e.jsx("button",{type:"button",onClick:()=>l("nutrition",a.nutrition.filter((x,f)=>f!==o)),className:"text-gray-600 hover:text-red-400",children:e.jsx(C,{size:14})})]},o)),e.jsxs("button",{type:"button",onClick:()=>l("nutrition",[...a.nutrition||[],{time:"",item:""}]),className:"w-full py-2 rounded-xl border-2 border-dashed border-gray-700 text-gray-500 text-sm hover:border-gray-500 hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[e.jsx(P,{size:14})," Add fuel point"]})]})}),a.status==="upcoming"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Route Description",children:e.jsx("textarea",{value:a.route||"",onChange:t=>l("route",t.target.value),placeholder:"Describe the route...",className:`${s} min-h-[80px] resize-y`})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Training Phase",children:e.jsx("input",{type:"text",value:a.phase||"",onChange:t=>l("phase",t.target.value),placeholder:"Build Phase",className:s})}),e.jsx(d,{label:"Current Week",children:e.jsx("input",{type:"text",value:a.week||"",onChange:t=>l("week",t.target.value),placeholder:"Week 1 of 12",className:s})})]}),e.jsx(d,{label:`Training Progress (${a.progress||0}%)`,children:e.jsx("input",{type:"range",min:"0",max:"100",value:a.progress||0,onChange:t=>l("progress",Number(t.target.value)),className:"w-full accent-red-500"})}),e.jsx(d,{label:"Why You'll Finish",children:e.jsx(T,{tags:a.reasons||[],onChange:t=>l("reasons",t),placeholder:"Add a reason..."})}),e.jsx(d,{label:"Watch-Outs",children:e.jsx(T,{tags:a.watchOuts||[],onChange:t=>l("watchOuts",t),placeholder:"Add a watch-out..."})})]}),a.status==="wishlist"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Why does this appeal to you?",children:e.jsx("textarea",{value:a.appeal||"",onChange:t=>l("appeal",t.target.value),placeholder:"What draws you to this challenge...",className:`${s} min-h-[80px] resize-y`})}),e.jsx(d,{label:"Target Year",children:e.jsx("input",{type:"number",value:a.targetYear||"",onChange:t=>l("targetYear",t.target.value?Number(t.target.value):null),placeholder:`${new Date().getFullYear()+1}`,className:s,min:"2024",max:"2040"})})]}),e.jsx(d,{label:"Badge",children:e.jsx(ie,{value:a.badge,onChange:t=>l("badge",t)})}),e.jsx(d,{label:"Banner Gradient",children:e.jsx(oe,{value:a.heroImage,onChange:t=>l("heroImage",t)})})]}),e.jsx("div",{className:"border-t border-gray-800 p-5",children:e.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 transition-colors active:scale-[0.98]",children:u?"Save Changes":"Add Event"})})]})})]})}export{Te as default};
