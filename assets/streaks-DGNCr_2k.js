function i(t=new Date){const n=new Date(t);n.setHours(0,0,0,0);const e=n.getDay(),s=e===0?6:e-1;return n.setDate(n.getDate()-s),n}function E(t){return t.toISOString().split("T")[0]}function f(t){return!t||t.length===0?!1:t.includes(E(i()))}function g(t){const n=E(i());return t.includes(n)?t:[...t,n].sort()}function h(t){if(!t||t.length===0)return{current:0,longest:0};const e=[...new Set(t)].sort().map(a=>new Date(a).getTime());let s=1,r=1;for(let a=1;a<e.length;a++){const d=e[a]-e[a-1];Math.abs(d-6048e5)<36e5?r++:r=1,s=Math.max(s,r)}const u=i().getTime(),o=e[e.length-1];if(u-o>6084e5)return{current:0,longest:s};let c=1;for(let a=e.length-2;a>=0;a--){const d=e[a+1]-e[a];if(Math.abs(d-6048e5)<36e5)c++;else break}return{current:c,longest:s}}function D(t,n){const e=i(),s=new Set(t||[]),r=new Set;n&&n.filter(o=>o.status==="completed"&&o.date).forEach(o=>r.add(E(i(new Date(o.date)))));const u=[];for(let o=51;o>=0;o--){const l=new Date(e);l.setDate(l.getDate()-o*7);const c=E(l);u.push({weekMonday:c,checkedIn:s.has(c),hasEvent:r.has(c)})}return u}export{g as a,D as b,h as c,i as g,f as h};
