import{u as c,r as i}from"./index-yBuqoKGI.js";import{u as d}from"./useStats-BMGZsBJ0.js";function p(){const{state:u}=c(),t=d();return i.useMemo(()=>{const l=u.milestones.map(e=>{if(e.type==="manual")return{...e,unlocked:!!e.unlockedAt};if(e.rule){const a=t[e.rule.field];let n=!1;e.rule.operator===">="&&typeof a=="number"&&(n=a>=e.rule.value);let o=e.desc;return e.rule.field==="totalDistance"?o=n?`${t.totalDistance}km and counting`:`${t.totalDistance}/${e.rule.value}km total distance`:e.rule.field==="totalEvents"&&(o=`${t.totalEvents}/${e.rule.value} events`),{...e,unlocked:n,desc:o}}return{...e,unlocked:!!e.unlockedAt}}),s=l.filter(e=>e.unlocked),r=l.filter(e=>!e.unlocked);return{milestones:l,unlocked:s,locked:r,unlockedCount:s.length,totalCount:l.length}},[u.milestones,t])}export{p as u};
