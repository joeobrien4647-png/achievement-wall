import{c as L,r as y,j as e,T as W}from"./index-ClocMNDQ.js";import{u as U}from"./useEvents-DO3zeIMH.js";import{u as B}from"./useStats-n_QR3oTZ.js";import{C as O,T as _}from"./ConfirmDialog-24MLuSbi.js";import{S as Y}from"./search-BeQAT4Gk.js";import{S as F}from"./sparkles-BktfSdhe.js";import{P as R}from"./plus-CFBI2qCH.js";import{C as q}from"./chevron-down-DLnrLjHH.js";const H=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Q=L("arrow-up-down",H);const G=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],V=L("arrow-up-right",G);function S(t,a,r){return Math.max(a,Math.min(r,t))}function Z(t){return!t||t<=20?8:t<=50?10:t<=100?12:t<=200?14:16}function J(t){const a=S(t??3,1,5);return a<=2?-1:a>=5?2:a>=4?1:0}function X(t){return!t||t<=20?25:t<=50?40:t<=100?60:t<=200?80:100}function K(t,a){const r=t>=12?2:1,n=t>=10?2:1,i=t-r-n,m=a>=4?.55:.45,d=Math.round(i*m);return{base:i-d,build:d,peak:n,taper:r}}function ee(t,a){const r=t==="Mountain",n=t==="Urban";return{base:r?"Include hill repeats 1x per week to build ascending strength":n?"Alternate between park trails and pavement to condition joints":"Focus on time-on-feet over speed; mix terrain types",build:r?"Add sustained climbs; practice descent technique on tired legs":n?"Long pavement sessions â€” train your feet for concrete impact":"Back-to-back long days to simulate event fatigue",peak:r?"Full-elevation dress rehearsal on similar terrain":n?"Full-distance city walk at target pace with race-day kit":"Event-simulation day: full kit, nutrition plan, target pace",taper:"Reduce volume 40-60%. Keep intensity with short sharp sessions. Rest is training."}[a]||""}const w={base:{name:"Base Phase",description:"Build your aerobic engine and movement habit. Consistent easy volume, no heroics."},build:{name:"Build Phase",description:"Increase distance and specificity. Train the demands your event will throw at you."},peak:{name:"Peak Phase",description:"Hit your highest training volume. Dress rehearsals and confidence-building sessions."},taper:{name:"Taper",description:"Reduce volume, maintain sharpness. Trust the work you've done. Arrive fresh."}};function te(t,a,r,n){const i=[];let m=0;const d=[{key:"base",weeks:t.base},{key:"build",weeks:t.build},{key:"peak",weeks:t.peak},{key:"taper",weeks:t.taper}];for(const{key:u,weeks:g}of d)for(let o=0;o<g;o++){m++;const c=o/g;let h;switch(u){case"base":h=Math.round(a*(.3+.25*c));break;case"build":h=Math.round(a*(.55+.35*c)),(o+1)%3===0&&(h=Math.round(h*.7));break;case"peak":h=Math.round(a*(.9+.1*c));break;case"taper":h=Math.round(a*(.6-.3*c));break;default:h=Math.round(a*.5)}const p={base:o===0?"Easy walks 3x, establish rhythm":`Easy volume â€” ${3+Math.min(o,2)}x sessions`,build:(o+1)%3===0?"Deload week â€” recover and absorb":`Long day + ${2+Math.min(o,2)} shorter sessions`,peak:o===0?"Highest volume week â€” dress rehearsal":"Maintain peak load, fine-tune pacing",taper:o===0?"Reduce to 60% volume, keep legs ticking":"Light movement only â€” trust the training"},j=n&&u!=="taper"?` Include ${Math.round(n*(.2+.2*c))}m elevation gain.`:"";i.push({week:m,phase:w[u].name,focus:p[u],targetKm:h,notes:ee(r,u)+j})}return i}function se(t){const a=t.distance??0,r=S(t.difficulty??3,1,5),n=t.type||"Ultra",i=t.elevation??null,m=Z(a)+J(r),d=S(m,8,16),u=K(d,r),g=[{...w.base,weeks:u.base},{...w.build,weeks:u.build},{...w.peak,weeks:u.peak},{...w.taper,weeks:u.taper}],o=X(a),c=te(u,o,n,i);return{totalWeeks:d,phases:g,weeklyPlan:c}}const M=[{key:"all",label:"All",icon:"ðŸ§­"},{key:"Mountains",label:"Mountains",icon:"â›°ï¸"},{key:"Endurance",label:"Endurance",icon:"ðŸ¥¾"},{key:"Multi-Day",label:"Multi-Day",icon:"ðŸ•ï¸"},{key:"Urban",label:"Urban",icon:"ðŸ™ï¸"},{key:"International",label:"International",icon:"ðŸŒ"},{key:"Running",label:"Running",icon:"ðŸƒ"},{key:"Extreme",label:"Extreme",icon:"ðŸ”¥"}],ae=[{key:"default",label:"Default"},{key:"distance-asc",label:"Distance â†‘"},{key:"distance-desc",label:"Distance â†“"},{key:"difficulty-asc",label:"Easiest first"},{key:"difficulty-desc",label:"Hardest first"},{key:"name",label:"A â†’ Z"}];function ne({level:t}){return e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(a=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a<=t?"bg-amber-400":"bg-gray-700"}`},a))})}function re(t,a,r){const n=[],i=t.personalRecords?.longestDistance?.value||0,m=new Set(a.map(o=>o.type)),d=new Set(r.map(o=>o.name.toLowerCase()));if(i>0&&i<160){const o=i<=50?100:160,c=`${o}km Ultra Challenge`;d.has(c.toLowerCase())||n.push({name:c,type:"Ultra",distance:o,reason:`You've conquered ${i}km â€” the next frontier is ${o}km`})}return!m.has("Urban")&&!d.has("urban endurance walk")&&n.push({name:"Urban Endurance Walk",type:"Urban",distance:50,reason:"You haven't done an urban challenge yet â€” try the concrete jungle"}),!m.has("Mountain")&&!d.has("mountain summit challenge")&&n.push({name:"Mountain Summit Challenge",type:"Mountain",distance:30,reason:"No mountain events yet â€” time to go vertical"}),!a.some(o=>o.location&&!["uk","england","scotland","wales","london","yorkshire","lake district","south downs","brighton","fort william"].some(c=>o.location.toLowerCase().includes(c)))&&!d.has("international ultra")&&n.push({name:"International Ultra",type:"Ultra",distance:100,reason:"All your events are UK-based â€” take it abroad"}),!a.some(o=>o.distance&&o.distance>=160)&&i>=100&&!d.has("multi-day stage race")&&n.push({name:"Multi-Day Stage Race",type:"Ultra",distance:200,reason:"You've done 100km in one go â€” try spreading it over multiple days"}),n.slice(0,3)}function ie(t){const a={};for(const r of t){const n=r.category||"Custom";a[n]||(a[n]=[]),a[n].push(r)}return a}function oe(t,a){if(a==="default")return t;const r=[...t];switch(a){case"distance-asc":return r.sort((n,i)=>(n.distance||0)-(i.distance||0));case"distance-desc":return r.sort((n,i)=>(i.distance||0)-(n.distance||0));case"difficulty-asc":return r.sort((n,i)=>(n.difficulty||0)-(i.difficulty||0));case"difficulty-desc":return r.sort((n,i)=>(i.difficulty||0)-(n.difficulty||0));case"name":return r.sort((n,i)=>n.name.localeCompare(i.name));default:return t}}function le({event:t,expanded:a,onToggle:r,onPromote:n,onEdit:i,onDelete:m}){return e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl overflow-hidden border border-gray-700/50",children:[e.jsx("button",{onClick:r,className:"w-full text-left",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 h-24 flex items-center justify-center text-3xl flex-shrink-0",style:{background:t.heroImage},children:t.badge}),e.jsx("div",{className:"p-3.5 flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-white font-bold text-base truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[e.jsx("span",{style:{color:W[t.type]},children:t.type}),t.distance&&e.jsxs("span",{children:[t.distance,"km"]}),t.elevation&&e.jsxs("span",{children:["â†‘",t.elevation,"m"]})]}),e.jsx("div",{className:"mt-1",children:e.jsx(ne,{level:t.difficulty||0})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.targetYear&&e.jsx("span",{className:"bg-indigo-500/15 text-indigo-300 text-[10px] font-bold px-2 py-0.5 rounded",children:t.targetYear}),e.jsx(q,{size:16,className:`text-gray-500 transition-transform ${a?"rotate-180":""}`})]})]})})]})}),a&&e.jsxs("div",{className:"border-t border-gray-700/50 p-4 space-y-3",children:[t.appeal&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-emerald-400 font-bold mb-1",children:"Why this appeals"}),e.jsx("p",{className:"text-gray-300 text-sm",children:t.appeal})]}),t.location&&e.jsxs("div",{className:"text-gray-400 text-sm",children:["ðŸ“ ",t.location]}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-1.5 bg-emerald-600/20 border border-emerald-600/40 text-emerald-400 font-medium text-xs py-2.5 rounded-xl hover:bg-emerald-600/30 transition-colors",children:[e.jsx(V,{size:14})," Make Next Target"]}),e.jsx("button",{onClick:i,className:"px-4 bg-gray-700/50 border border-gray-600/50 text-gray-300 text-xs py-2.5 rounded-xl hover:bg-gray-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:m,className:"px-3 bg-gray-700/50 border border-gray-600/50 text-gray-400 text-xs py-2.5 rounded-xl hover:text-red-400 hover:border-red-700/50 transition-colors",children:e.jsx(_,{size:14})})]})]})]})}function fe({onAddWishlist:t,onEditEvent:a}){const{wishlist:r,upcoming:n,updateEvent:i,deleteEvent:m}=U(),d=B(),{completed:u}=U(),[g,o]=y.useState(null),[c,h]=y.useState(null),[p,j]=y.useState("all"),[f,$]=y.useState(""),[b,I]=y.useState("default"),[E,D]=y.useState(!1),v=re(d,u,r),z=s=>{n&&i(n.id,{status:"wishlist",trainingPlan:null});const l=se(s);i(s.id,{status:"upcoming",trainingWeeks:Array(l.totalWeeks).fill(null),trainingPlan:l,phase:l.phases[0].name,week:`Week 1 of ${l.totalWeeks}`,progress:0})},N={};for(const s of r){const l=s.category||"Custom";N[l]=(N[l]||0)+1}const k=y.useMemo(()=>{let s=p==="all"?r:r.filter(l=>(l.category||"Custom")===p);if(f.trim()){const l=f.toLowerCase();s=s.filter(x=>x.name.toLowerCase().includes(l)||x.location&&x.location.toLowerCase().includes(l)||x.category&&x.category.toLowerCase().includes(l))}return oe(s,b)},[r,p,f,b]),C=p==="all"&&!f.trim()&&b==="default"?ie(k):null,T=M.map(s=>s.key).filter(s=>s!=="all");if(T.push("Custom"),r.length===0&&v.length===0)return e.jsxs("div",{className:"px-4 pb-24 sm:pb-8 pt-16 text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ§­"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"What's on your horizon?"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6 max-w-xs mx-auto",children:"Add the challenges you dream about. The ones that keep you training when it's dark and cold."}),e.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm px-6 py-3 rounded-xl transition-colors",children:"Add your first dream challenge"})]});const P=s=>e.jsx(le,{event:s,expanded:g===s.id,onToggle:()=>o(g===s.id?null:s.id),onPromote:()=>z(s),onEdit:()=>a(s.id),onDelete:()=>h(s)},s.id);return e.jsxs("div",{className:"px-4 pb-24 sm:pb-8 pt-4 relative",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:"Bucket List"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[r.length," challenge",r.length!==1?"s":""," on the horizon"]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Y,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:f,onChange:s=>$(s.target.value),placeholder:"Search challenges...",className:"w-full bg-gray-800/60 border border-gray-700/50 rounded-xl pl-8 pr-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>D(!E),className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium transition-all ${b!=="default"?"bg-indigo-600 text-white":"bg-gray-800/60 text-gray-400 border border-gray-700/50 hover:border-gray-600"}`,children:[e.jsx(Q,{size:14}),"Sort"]}),E&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden shadow-xl z-50 min-w-[160px]",children:ae.map(s=>e.jsx("button",{onClick:()=>{I(s.key),D(!1)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${b===s.key?"bg-indigo-600/20 text-indigo-300":"text-gray-300 hover:bg-gray-700"}`,children:s.label},s.key))})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 -mx-4 px-4 scrollbar-hide",children:M.map(s=>{const l=s.key==="all"?r.length:N[s.key]||0;if(s.key!=="all"&&l===0)return null;const x=p===s.key;return e.jsxs("button",{onClick:()=>j(s.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all flex-shrink-0 ${x?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/25":"bg-gray-800/60 text-gray-400 border border-gray-700/50 hover:border-gray-600"}`,children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label}),e.jsx("span",{className:`text-[10px] ${x?"text-indigo-200":"text-gray-600"}`,children:l})]},s.key)})}),f.trim()&&e.jsxs("div",{className:"text-gray-500 text-xs mb-3",children:[k.length," result",k.length!==1?"s":"",' for "',f,'"']}),C&&e.jsx("div",{className:"space-y-6 mb-6",children:T.map(s=>{const l=C[s];if(!l?.length)return null;const x=M.find(A=>A.key===s);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base",children:x?.icon||"ðŸ“Œ"}),e.jsx("h3",{className:"text-white font-bold text-sm",children:x?.label||s}),e.jsx("span",{className:"text-gray-600 text-xs",children:l.length})]}),e.jsx("div",{className:"space-y-3",children:l.map(P)})]},s)})}),!C&&e.jsx("div",{className:"space-y-3 mb-6",children:k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No challenges match your search"})]}):k.map(P)}),v.length>0&&p==="all"&&!f.trim()&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(F,{size:16,className:"text-amber-400"}),e.jsx("h3",{className:"text-white font-bold text-sm",children:"Suggested Challenges"})]}),e.jsx("div",{className:"space-y-2",children:v.map((s,l)=>e.jsx("button",{onClick:()=>t(s),className:"w-full text-left bg-gray-800/30 border border-dashed border-gray-700/50 rounded-xl p-3.5 hover:border-amber-600/40 hover:bg-amber-900/10 transition-all group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium text-sm group-hover:text-amber-200 transition-colors",children:s.name}),e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:s.reason})]}),e.jsx(R,{size:16,className:"text-gray-600 group-hover:text-amber-400 transition-colors flex-shrink-0"})]})},l))})]}),e.jsx("button",{onClick:()=>t(),className:"fixed bottom-20 sm:bottom-6 right-4 sm:right-auto sm:left-1/2 sm:translate-x-[calc(min(50vw,320px)-2rem)] z-40 w-14 h-14 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center transition-all active:scale-90",children:e.jsx(R,{size:24,strokeWidth:2.5})}),c&&e.jsx(O,{title:`Remove ${c.name}?`,message:"This will remove it from your bucket list.",onConfirm:()=>{m(c.id),h(null),o(null)},onCancel:()=>h(null)})]})}export{fe as default};
