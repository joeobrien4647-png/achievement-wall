import{u as k,r as b,j as e}from"./index-BZJhhq9e.js";import{T as h}from"./triangle-alert-C4sIxLlw.js";import{X as y}from"./x-ITkdU1G8.js";import{P as C}from"./plus-b0t4L9Pd.js";const o=[{type:"shoes",label:"Shoes",icon:"ðŸ‘Ÿ",maxKm:800},{type:"pack",label:"Pack",icon:"ðŸŽ’",maxKm:3e3},{type:"jacket",label:"Jacket",icon:"ðŸ§¥",maxKm:5e3},{type:"poles",label:"Poles",icon:"ðŸ¥¢",maxKm:2e3},{type:"other",label:"Other",icon:"âš™ï¸",maxKm:1e3}];function P(){const{state:f,dispatch:j}=k(),n=f.preferences?.gear??[],[v,i]=b.useState(!1),[s,l]=b.useState({name:"",type:"shoes",currentKm:0,maxKm:800}),d=t=>j({type:"UPDATE_PREFERENCES",payload:{gear:t}}),N=()=>{if(!s.name.trim())return;const t={id:Date.now().toString(36),name:s.name.trim(),type:s.type,currentKm:Number(s.currentKm)||0,maxKm:Number(s.maxKm)||800,retired:!1,addedAt:new Date().toISOString()};d([...n,t]),l({name:"",type:"shoes",currentKm:0,maxKm:800}),i(!1)},w=(t,r)=>{d(n.map(a=>a.id===t?{...a,currentKm:Math.max(0,Number(r)||0)}:a))},m=t=>{d(n.map(r=>r.id===t?{...r,retired:!r.retired}:r))},p=t=>{d(n.filter(r=>r.id!==t))},K=n.filter(t=>!t.retired),g=n.filter(t=>t.retired);return e.jsxs("div",{className:"px-4 pb-24 sm:pb-8 pt-4 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:"Gear Tracker"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Track wear on your kit â€” retire before it fails you"})]}),e.jsx("div",{className:"space-y-3",children:K.map(t=>{const r=Math.min(100,t.currentKm/t.maxKm*100),a=r>=75,c=r>=90,u=o.find(x=>x.type===t.type)||o[4];return e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:u.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-bold text-sm truncate",children:t.name}),e.jsx("div",{className:"text-gray-500 text-xs capitalize",children:u.label})]}),c&&e.jsxs("div",{className:"flex items-center gap-1 text-red-400 text-xs font-bold",children:[e.jsx(h,{size:14})," Replace soon"]}),a&&!c&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-400 text-xs font-bold",children:[e.jsx(h,{size:14})," Getting worn"]})]}),e.jsx("div",{className:"h-2 bg-gray-900/60 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${r}%`,backgroundColor:c?"#ef4444":a?"#f59e0b":"#10b981"}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:t.currentKm,onChange:x=>w(t.id,x.target.value),className:"w-20 bg-gray-900 border border-gray-700 rounded-lg px-2 py-1 text-white text-sm text-center focus:outline-none focus:border-indigo-500"}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["/ ",t.maxKm,"km"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(t.id),className:"text-xs text-gray-500 hover:text-amber-400 transition-colors",children:"Retire"}),e.jsx("button",{onClick:()=>p(t.id),className:"text-gray-600 hover:text-red-400 transition-colors",children:e.jsx(y,{size:14})})]})]})]},t.id)})}),v?e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50 space-y-3",children:[e.jsx("input",{type:"text",value:s.name,onChange:t=>l({...s,name:t.target.value}),placeholder:"Item name (e.g. Salomon Speedcross 6)",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(t=>e.jsxs("button",{onClick:()=>l({...s,type:t.type,maxKm:t.maxKm}),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${s.type===t.type?"bg-indigo-500/20 border-indigo-500 text-white border":"bg-gray-900 border border-gray-700 text-gray-400 hover:border-gray-500"}`,children:[t.icon," ",t.label]},t.type))}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1 block",children:"Current km"}),e.jsx("input",{type:"number",value:s.currentKm,onChange:t=>l({...s,currentKm:t.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1 block",children:"Max lifespan (km)"}),e.jsx("input",{type:"number",value:s.maxKm,onChange:t=>l({...s,maxKm:t.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-indigo-500"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-2 rounded-xl bg-gray-800 text-gray-300 text-sm font-medium",children:"Cancel"}),e.jsx("button",{onClick:N,className:"flex-1 py-2 rounded-xl bg-indigo-600 text-white text-sm font-bold hover:bg-indigo-500",children:"Add Gear"})]})]}):e.jsxs("button",{onClick:()=>i(!0),className:"w-full py-3 rounded-2xl border-2 border-dashed border-gray-700/50 text-gray-500 hover:text-gray-300 hover:border-gray-500 transition-colors flex items-center justify-center gap-2",children:[e.jsx(C,{size:18})," Add Gear Item"]}),g.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 font-bold text-sm mb-3",children:"Retired"}),e.jsx("div",{className:"space-y-2",children:g.map(t=>{const r=o.find(a=>a.type===t.type)||o[4];return e.jsxs("div",{className:"bg-gray-800/30 rounded-xl p-3 border border-gray-800 flex items-center gap-3 opacity-60",children:[e.jsx("span",{className:"text-lg",children:r.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-gray-400 font-medium text-sm truncate line-through",children:t.name}),e.jsxs("div",{className:"text-gray-600 text-xs",children:[t.currentKm,"km logged"]})]}),e.jsx("button",{onClick:()=>m(t.id),className:"text-xs text-gray-600 hover:text-emerald-400",children:"Reactivate"}),e.jsx("button",{onClick:()=>p(t.id),className:"text-gray-700 hover:text-red-400",children:e.jsx(y,{size:14})})]},t.id)})})]})]})}export{P as default};
