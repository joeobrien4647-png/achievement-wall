import{c as k,j as e,G as $,B as O,r as h,k as D,E as L,T as S}from"./index-BZJhhq9e.js";import{u as A}from"./useEvents-Bsixy3u3.js";import{M as _,c as W,S as I}from"./photos-DRTc0_Bo.js";import{p as R,F as G}from"./gpxParser-D2gaImRk.js";import{X as N}from"./x-ITkdU1G8.js";import{T as Y}from"./trending-up-CB0BYqnY.js";import{U as H}from"./upload-Dvf45I3O.js";import{C as q}from"./check-BSfdu-Z-.js";import{P}from"./plus-b0t4L9Pd.js";import{C as B}from"./chevron-left-CHDMjH6E.js";import{C as U}from"./camera-BCuUa0ad.js";import{C as V}from"./chevron-down-CYDrqRbc.js";const X=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],K=k("apple",X);const Q=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],J=k("cloud",Q);const Z=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ee=k("message-square",Z);const te=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],M=k("package",te);const ae=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],re=k("pound-sterling",ae);function se({value:n,onChange:i}){return e.jsx("div",{className:"grid grid-cols-4 gap-2",children:$.map(d=>e.jsx("button",{type:"button",onClick:()=>i(d),className:`h-12 rounded-xl border-2 transition-all ${n===d?"border-white scale-105 shadow-lg":"border-gray-700 hover:border-gray-500"}`,style:{background:d}},d))})}function le({value:n,onChange:i}){return e.jsx("div",{className:"grid grid-cols-5 gap-2",children:O.map(d=>e.jsx("button",{type:"button",onClick:()=>i(d),className:`text-2xl h-11 rounded-xl border-2 transition-all flex items-center justify-center ${n===d?"border-white bg-gray-700 scale-105":"border-gray-700 bg-gray-800 hover:border-gray-500"}`,children:d},d))})}function ne({onImport:n}){const[i,d]=h.useState(null),[m,g]=h.useState(null),[u,x]=h.useState(!1),a=h.useRef(null),b=h.useCallback(r=>{if(!r)return;g(null),d(null);const c=new FileReader;c.onload=p=>{try{const C=R(p.target.result);d(C)}catch(C){g(C.message||"Failed to parse GPX file")}},c.onerror=()=>g("Failed to read file"),c.readAsText(r)},[]),y=h.useCallback(r=>{r.preventDefault(),x(!1);const c=r.dataTransfer?.files?.[0];c&&c.name.toLowerCase().endsWith(".gpx")?b(c):g("Please drop a .gpx file")},[b]),f=h.useCallback(r=>{r.preventDefault(),x(!0)},[]),l=h.useCallback(r=>{r.preventDefault(),x(!1)},[]),v=h.useCallback(r=>{b(r.target.files?.[0]),r.target.value=""},[b]),s=h.useCallback(()=>{!i||!n||n({distance:i.distance,elevationGain:i.elevationGain,trackPoints:i.trackPoints,elevationProfile:i.elevationProfile})},[i,n]),t=h.useCallback(()=>{d(null),g(null)},[]);return i?e.jsxs("div",{className:"bg-gray-800/60 rounded-xl border border-gray-700/50 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"GPX Imported"})]}),e.jsx("button",{type:"button",onClick:t,className:"text-gray-500 hover:text-gray-300 transition-colors",children:e.jsx(N,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:i.distance.toFixed(1)}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"km"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Y,{size:14,className:"text-orange-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:i.elevationGain.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"m gain"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(_,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:i.trackPoints.length.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"points"})]})]}),e.jsx("button",{type:"button",onClick:s,className:"w-full py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium transition-colors",children:"Apply to Event"})]}):e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>a.current?.click(),onDrop:y,onDragOver:f,onDragLeave:l,className:`w-full rounded-xl border-2 border-dashed p-6 flex flex-col items-center gap-2 transition-colors cursor-pointer ${u?"border-emerald-500 bg-emerald-500/10":"border-gray-700/50 bg-gray-800/60 hover:border-gray-600"}`,children:[e.jsx(H,{size:24,className:u?"text-emerald-400":"text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Drop a ",e.jsx("span",{className:"text-gray-300 font-medium",children:".gpx"})," file or click to browse"]})]}),e.jsx("input",{ref:a,type:"file",accept:".gpx",onChange:v,className:"hidden"}),m&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:m})]})}const T=["Clothing","Footwear","Navigation","Food & Water","Safety","Other"],z={Clothing:"ðŸ‘•",Footwear:"ðŸ¥¾",Navigation:"ðŸ§­","Food & Water":"ðŸ¥¤",Safety:"ðŸ›¡ï¸",Other:"ðŸ“¦"},F={Mountain:[{name:"Waterproofs",category:"Clothing",checked:!1},{name:"Warm layers",category:"Clothing",checked:!1},{name:"Gaiters",category:"Footwear",checked:!1},{name:"Trekking poles",category:"Other",checked:!1},{name:"Map",category:"Navigation",checked:!1},{name:"Compass",category:"Navigation",checked:!1},{name:"Headtorch",category:"Navigation",checked:!1},{name:"First aid kit",category:"Safety",checked:!1},{name:"Whistle",category:"Safety",checked:!1},{name:"Emergency shelter",category:"Safety",checked:!1}],Ultra:[{name:"Headtorch",category:"Navigation",checked:!1},{name:"Spare batteries",category:"Navigation",checked:!1},{name:"Blister kit",category:"Safety",checked:!1},{name:"Emergency blanket",category:"Safety",checked:!1},{name:"Energy gels",category:"Food & Water",checked:!1},{name:"Electrolytes",category:"Food & Water",checked:!1},{name:"Phone charger",category:"Other",checked:!1},{name:"Change of socks",category:"Footwear",checked:!1}],Urban:[{name:"Phone",category:"Navigation",checked:!1},{name:"Portable charger",category:"Other",checked:!1},{name:"Snacks",category:"Food & Water",checked:!1},{name:"Water bottle",category:"Food & Water",checked:!1},{name:"Rain jacket",category:"Clothing",checked:!1},{name:"Comfortable shoes",category:"Footwear",checked:!1},{name:"Cash",category:"Other",checked:!1}]};function oe({items:n=[],onChange:i,eventType:d="Mountain"}){const[m,g]=h.useState(""),[u,x]=h.useState("Other"),a=()=>{const s=m.trim();!s||n.some(r=>r.name.toLowerCase()===s.toLowerCase())||(i([...n,{name:s,category:u,checked:!1}]),g(""))},b=s=>{i(n.filter((t,r)=>r!==s))},y=s=>{i(n.map((t,r)=>r===s?{...t,checked:!t.checked}:t))},f=()=>{const s=F[d]||F.Mountain,t=new Set(n.map(c=>c.name.toLowerCase())),r=s.filter(c=>!t.has(c.name.toLowerCase()));i([...n,...r])},l=T.map(s=>({category:s,items:n.map((t,r)=>({...t,_index:r})).filter(t=>t.category===s)})).filter(s=>s.items.length>0),v=n.filter(s=>s.checked).length;return e.jsxs("div",{className:"space-y-3",children:[n.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[v,"/",n.length," packed"]}),e.jsx("div",{className:"flex-1 mx-3 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-300",style:{width:`${n.length>0?v/n.length*100:0}%`}})})]}),l.map(({category:s,items:t})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm",children:z[s]}),e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold",children:s})]}),e.jsx("div",{className:"space-y-1",children:t.map(r=>e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("button",{type:"button",onClick:()=>y(r._index),className:`w-5 h-5 rounded-md border flex-shrink-0 flex items-center justify-center transition-all ${r.checked?"bg-emerald-500 border-emerald-500":"border-gray-600 hover:border-gray-400"}`,children:r.checked&&e.jsx(q,{size:12,className:"text-white"})}),e.jsx("span",{className:`text-sm flex-1 transition-colors ${r.checked?"text-gray-500 line-through":"text-gray-200"}`,children:r.name}),e.jsx("button",{type:"button",onClick:()=>b(r._index),className:"opacity-0 group-hover:opacity-100 text-gray-600 hover:text-red-400 transition-all p-0.5",children:e.jsx(N,{size:14})})]},r._index))})]},s)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:s=>g(s.target.value),onKeyDown:s=>s.key==="Enter"&&(s.preventDefault(),a()),placeholder:"Add item...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"bg-gray-800 border border-gray-700 rounded-xl px-2 py-2 text-sm text-gray-300 focus:outline-none focus:border-indigo-500 appearance-none cursor-pointer",children:T.map(s=>e.jsxs("option",{value:s,children:[z[s]," ",s]},s))}),e.jsx("button",{type:"button",onClick:a,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(P,{size:16,className:"text-gray-400"})})]}),e.jsxs("button",{type:"button",onClick:f,className:"flex items-center gap-2 text-xs text-indigo-400 hover:text-indigo-300 font-medium transition-colors",children:[e.jsx(M,{size:14}),"Load ",d," template"]})]})}const ie=[{key:"entry",label:"Entry",color:"#6366f1"},{key:"travel",label:"Travel",color:"#10b981"},{key:"accommodation",label:"Accomm.",color:"#f59e0b"},{key:"gear",label:"Gear",color:"#f43f5e"},{key:"food",label:"Food",color:"#f97316"},{key:"other",label:"Other",color:"#6b7280"}];function o({label:n,children:i}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1.5 block",children:n}),i]})}function w({value:n,onChange:i}){return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(d=>e.jsx("button",{type:"button",onClick:()=>i(d),className:"p-1",children:e.jsx(I,{size:24,className:`transition-colors ${d<=n?"text-amber-400 fill-amber-400":"text-gray-600"}`})},d))})}function E({tags:n,onChange:i,placeholder:d}){const[m,g]=h.useState(""),u=()=>{const x=m.trim();x&&!n.includes(x)&&i([...n,x]),g("")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:n.map((x,a)=>e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-300 text-xs font-medium px-2.5 py-1 rounded-lg border border-indigo-500/20 flex items-center gap-1.5",children:[x,e.jsx("button",{type:"button",onClick:()=>i(n.filter((b,y)=>y!==a)),children:e.jsx(N,{size:12})})]},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:x=>g(x.target.value),onKeyDown:x=>x.key==="Enter"&&(x.preventDefault(),u()),placeholder:d,className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{type:"button",onClick:u,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(P,{size:16,className:"text-gray-400"})})]})]})}function j({icon:n,title:i,children:d,defaultOpen:m=!1}){const[g,u]=h.useState(m);return e.jsxs("div",{className:"border border-gray-700/50 rounded-xl overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>u(x=>!x),className:"w-full flex items-center gap-2.5 px-3.5 py-3 bg-gray-800/40 hover:bg-gray-800/70 transition-colors",children:[n&&e.jsx(n,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-bold text-white flex-1 text-left",children:i}),e.jsx(V,{size:16,className:`text-gray-500 transition-transform duration-200 ${g?"rotate-180":""}`})]}),g&&e.jsx("div",{className:"px-3.5 py-3 border-t border-gray-700/50",children:d})]})}function je({eventId:n,onBack:i}){const{getEventById:d,addEvent:m,updateEvent:g}=A(),u=n?d(n):null,x=!!u,[a,b]=h.useState(()=>{if(u)return{...u};let t={};try{const r=sessionStorage.getItem("formPrefill");r&&(t=JSON.parse(r))}catch{}return{...D(),name:"",type:"Mountain",status:"completed",distance:"",elevation:"",location:"",date:"",time:"",difficulty:3,peaks:[],story:"",lessons:"",badge:"ðŸ”ï¸",heroImage:$[0],completions:1,phase:"",week:"",progress:0,route:"",reasons:[],watchOuts:[],...t}}),[y,f]=h.useState([]),l=(t,r)=>b(c=>({...c,[t]:r})),v=t=>{if(t.preventDefault(),!a.name?.trim()){f(["Name is required"]);return}const r={...a,distance:a.distance?Number(a.distance):null,elevation:a.elevation?Number(a.elevation):null,date:a.date||null,time:a.time||null,completions:Math.max(1,Number(a.completions)||1),color:S[a.type]||"#8b5cf6"};if(x)g(n,r);else{const c=m(r);if(!c.success){f(c.errors);return}}i()},s="w-full bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500 transition-colors";return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[e.jsxs("div",{className:"h-32 flex items-center justify-center text-5xl relative",style:{background:a.heroImage},children:[e.jsx("button",{onClick:i,className:"absolute top-4 left-4 bg-black/40 backdrop-blur rounded-full p-2 text-white hover:bg-black/60",children:e.jsx(B,{size:18})}),e.jsx("span",{children:a.badge})]}),e.jsx("div",{className:"px-4 -mt-4 relative",children:e.jsxs("form",{onSubmit:v,className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsx("h2",{className:"text-xl font-black text-white",children:x?"Edit Event":"New Event"}),y.length>0&&e.jsx("div",{className:"bg-red-900/30 border border-red-700/40 rounded-xl p-3",children:y.map((t,r)=>e.jsx("p",{className:"text-red-300 text-sm",children:t},r))}),e.jsx(o,{label:"Event Name",children:e.jsx("input",{type:"text",value:a.name,onChange:t=>l("name",t.target.value),placeholder:"Yorkshire 3 Peaks",className:s,maxLength:80})}),e.jsx(o,{label:"Type",children:e.jsx("div",{className:"flex gap-2",children:L.map(t=>e.jsx("button",{type:"button",onClick:()=>l("type",t),className:`flex-1 py-2 rounded-xl text-sm font-bold transition-all ${a.type===t?"text-white border-2":"text-gray-400 bg-gray-800 border-2 border-gray-700 hover:border-gray-500"}`,style:a.type===t?{backgroundColor:S[t]+"30",borderColor:S[t]}:{},children:t},t))})}),e.jsx(o,{label:"Status",children:e.jsx("div",{className:"flex gap-2",children:["completed","upcoming","wishlist"].map(t=>e.jsx("button",{type:"button",onClick:()=>l("status",t),className:`flex-1 py-2 rounded-xl text-sm font-medium capitalize transition-all border-2 ${a.status===t?"bg-indigo-500/20 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t},t))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{label:"Distance (km)",children:e.jsx("input",{type:"number",value:a.distance,onChange:t=>l("distance",t.target.value),placeholder:"38",className:s,min:"0",step:"0.1"})}),e.jsx(o,{label:"Elevation (m)",children:e.jsx("input",{type:"number",value:a.elevation,onChange:t=>l("elevation",t.target.value),placeholder:"1585",className:s,min:"0"})})]}),e.jsx(o,{label:"Import GPX Route",children:e.jsx(ne,{onImport:({distance:t,elevationGain:r})=>{t&&l("distance",Math.round(t*10)/10),r&&l("elevation",Math.round(r))}})}),e.jsx(o,{label:"Location",children:e.jsx("input",{type:"text",value:a.location,onChange:t=>l("location",t.target.value),placeholder:"Yorkshire Dales",className:s})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{label:"Date",children:e.jsx("input",{type:"date",value:a.date||"",onChange:t=>l("date",t.target.value),className:s})}),a.status==="completed"&&e.jsx(o,{label:"Finish Time (HH:MM:SS)",children:e.jsx("input",{type:"text",value:a.time||"",onChange:t=>l("time",t.target.value),placeholder:"12:34:56",className:s})})]}),e.jsx(o,{label:"Difficulty",children:e.jsx(w,{value:a.difficulty,onChange:t=>l("difficulty",t)})}),a.status==="completed"&&e.jsx(o,{label:"Completions",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>l("completions",Math.max(1,(a.completions||1)-1)),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"âˆ’"}),e.jsx("span",{className:"text-white font-bold text-xl w-8 text-center",children:a.completions||1}),e.jsx("button",{type:"button",onClick:()=>l("completions",(a.completions||1)+1),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"+"})]})}),e.jsx(o,{label:"Peaks Summited",children:e.jsx(E,{tags:a.peaks||[],onChange:t=>l("peaks",t),placeholder:"Pen-y-ghent (694m)"})}),e.jsx(o,{label:"The Story",children:e.jsx("textarea",{value:a.story,onChange:t=>l("story",t.target.value),placeholder:"Tell the story of this event...",className:`${s} min-h-[100px] resize-y`})}),e.jsx(o,{label:"Lessons Learned",children:e.jsx("textarea",{value:a.lessons,onChange:t=>l("lessons",t.target.value),placeholder:"What did you learn?",className:`${s} min-h-[80px] resize-y`})}),e.jsx(o,{label:`Photos${(a.photos?.length||0)>0?` (${a.photos.length}/5)`:""}`,children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[(a.photos||[]).map((t,r)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden relative group",children:[e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>l("photos",a.photos.filter((c,p)=>p!==r)),className:"absolute top-1 right-1 bg-black/60 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity text-white",children:e.jsx(N,{size:12})})]},r)),(a.photos?.length||0)<5&&e.jsxs("label",{className:"aspect-square bg-gray-800 rounded-xl border-2 border-dashed border-gray-700 flex items-center justify-center cursor-pointer hover:border-gray-500 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async t=>{const r=t.target.files?.[0];if(r){try{const c=await W(r);l("photos",[...a.photos||[],c])}catch{}t.target.value=""}}}),e.jsxs("div",{className:"text-center",children:[e.jsx(U,{size:18,className:"text-gray-600 mx-auto"}),e.jsx("span",{className:"text-[10px] text-gray-600 mt-1 block",children:"Add"})]})]})]})}),e.jsx(j,{icon:M,title:`Kit List${(a.kitList?.length||0)>0?` (${a.kitList.length})`:""}`,children:e.jsx(oe,{items:a.kitList||[],onChange:t=>l("kitList",t),eventType:a.type})}),e.jsxs(j,{icon:re,title:"Costs",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ie.map(t=>e.jsx(o,{label:t.label,children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"Â£"}),e.jsx("input",{type:"number",value:a.costs?.[t.key]||"",onChange:r=>l("costs",{...a.costs||{},[t.key]:r.target.value===""?0:Number(r.target.value)}),placeholder:"0",className:s+" pl-7",min:"0",step:"0.01"})]})},t.key))}),(()=>{const t=Object.values(a.costs||{}).reduce((r,c)=>r+(Number(c)||0),0);return t>0?e.jsxs("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-gray-700/50",children:[e.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Total"}),e.jsxs("span",{className:"text-white font-black text-lg",children:["Â£",t.toLocaleString()]})]}):null})()]}),a.status==="completed"&&e.jsx(j,{icon:J,title:"Race Day Weather",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{label:"Temperature (Â°C)",children:e.jsx("input",{type:"number",value:a.weather?.temp??"",onChange:t=>l("weather",{...a.weather,temp:t.target.value===""?null:Number(t.target.value)}),placeholder:"12",className:s})}),e.jsx(o,{label:"Wind",children:e.jsx("input",{type:"text",value:a.weather?.wind??"",onChange:t=>l("weather",{...a.weather,wind:t.target.value}),placeholder:"Light breeze",className:s})})]}),e.jsx(o,{label:"Conditions",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:["â˜€ï¸ Sunny","â›… Cloudy","ðŸŒ§ï¸ Rain","ðŸŒ¨ï¸ Snow","ðŸ’¨ Windy","ðŸŒ«ï¸ Fog","ðŸ¥µ Hot","ðŸ¥¶ Cold"].map(t=>{const r=t.split(" ")[1],c=(a.weather?.conditions??"")===r;return e.jsx("button",{type:"button",onClick:()=>l("weather",{...a.weather,conditions:c?"":r}),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${c?"bg-indigo-500/20 border-indigo-500 text-white border":"bg-gray-800 border border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t},t)})})})]})}),a.status==="completed"&&e.jsx(j,{icon:ee,title:"Race Review",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{label:"Overall Rating",children:e.jsx(w,{value:a.review?.rating??0,onChange:t=>l("review",{...a.review,rating:t})})}),e.jsx(o,{label:"Would you do it again?",children:e.jsx("div",{className:"flex gap-2",children:[{label:"Absolutely!",value:!0},{label:"Probably not",value:!1}].map(t=>e.jsx("button",{type:"button",onClick:()=>l("review",{...a.review,wouldRepeat:t.value}),className:`flex-1 py-2 rounded-xl text-sm font-medium transition-all border-2 ${a.review?.wouldRepeat===t.value?"bg-indigo-500/20 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t.label},String(t.value)))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{label:"Organization",children:e.jsx(w,{value:a.review?.organization??0,onChange:t=>l("review",{...a.review,organization:t})})}),e.jsx(o,{label:"Course Quality",children:e.jsx(w,{value:a.review?.courseQuality??0,onChange:t=>l("review",{...a.review,courseQuality:t})})})]})]})}),(a.status==="completed"||a.status==="upcoming")&&e.jsx(j,{icon:K,title:`Nutrition Plan${(a.nutrition?.length||0)>0?` (${a.nutrition.length})`:""}`,children:e.jsxs("div",{className:"space-y-2",children:[(a.nutrition||[]).map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/60 rounded-lg p-2",children:[e.jsx("input",{type:"text",value:t.time,onChange:c=>{const p=[...a.nutrition];p[r]={...p[r],time:c.target.value},l("nutrition",p)},placeholder:"Hour 2",className:"w-20 bg-transparent text-white text-sm border-none focus:outline-none placeholder:text-gray-600"}),e.jsx("input",{type:"text",value:t.item,onChange:c=>{const p=[...a.nutrition];p[r]={...p[r],item:c.target.value},l("nutrition",p)},placeholder:"Gel + 200ml water",className:"flex-1 bg-transparent text-white text-sm border-none focus:outline-none placeholder:text-gray-600"}),e.jsx("button",{type:"button",onClick:()=>l("nutrition",a.nutrition.filter((c,p)=>p!==r)),className:"text-gray-600 hover:text-red-400",children:e.jsx(N,{size:14})})]},r)),e.jsxs("button",{type:"button",onClick:()=>l("nutrition",[...a.nutrition||[],{time:"",item:""}]),className:"w-full py-2 rounded-xl border-2 border-dashed border-gray-700 text-gray-500 text-sm hover:border-gray-500 hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[e.jsx(P,{size:14})," Add fuel point"]})]})}),a.status==="upcoming"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{label:"Route Description",children:e.jsx("textarea",{value:a.route||"",onChange:t=>l("route",t.target.value),placeholder:"Describe the route...",className:`${s} min-h-[80px] resize-y`})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{label:"Training Phase",children:e.jsx("input",{type:"text",value:a.phase||"",onChange:t=>l("phase",t.target.value),placeholder:"Build Phase",className:s})}),e.jsx(o,{label:"Current Week",children:e.jsx("input",{type:"text",value:a.week||"",onChange:t=>l("week",t.target.value),placeholder:"Week 1 of 12",className:s})})]}),e.jsx(o,{label:`Training Progress (${a.progress||0}%)`,children:e.jsx("input",{type:"range",min:"0",max:"100",value:a.progress||0,onChange:t=>l("progress",Number(t.target.value)),className:"w-full accent-red-500"})}),e.jsx(o,{label:"Why You'll Finish",children:e.jsx(E,{tags:a.reasons||[],onChange:t=>l("reasons",t),placeholder:"Add a reason..."})}),e.jsx(o,{label:"Watch-Outs",children:e.jsx(E,{tags:a.watchOuts||[],onChange:t=>l("watchOuts",t),placeholder:"Add a watch-out..."})})]}),a.status==="wishlist"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{label:"Why does this appeal to you?",children:e.jsx("textarea",{value:a.appeal||"",onChange:t=>l("appeal",t.target.value),placeholder:"What draws you to this challenge...",className:`${s} min-h-[80px] resize-y`})}),e.jsx(o,{label:"Target Year",children:e.jsx("input",{type:"number",value:a.targetYear||"",onChange:t=>l("targetYear",t.target.value?Number(t.target.value):null),placeholder:`${new Date().getFullYear()+1}`,className:s,min:"2024",max:"2040"})})]}),e.jsx(o,{label:"Badge",children:e.jsx(le,{value:a.badge,onChange:t=>l("badge",t)})}),e.jsx(o,{label:"Banner Gradient",children:e.jsx(se,{value:a.heroImage,onChange:t=>l("heroImage",t)})})]}),e.jsx("div",{className:"border-t border-gray-800 p-5",children:e.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 transition-colors active:scale-[0.98]",children:x?"Save Changes":"Add Event"})})]})})]})}export{je as default};
