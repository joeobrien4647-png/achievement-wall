import{c as y,j as e,r as w}from"./index-yBuqoKGI.js";import{c as b,d as h,F as W}from"./countdown-Br4Xd_wa.js";import{u as C}from"./useEvents-CvLkZclv.js";import{R as $}from"./route-E32te0-W.js";import{T as P}from"./trending-up-DKkkamza.js";import{C as z}from"./calendar-BREsfleD.js";import{C as j}from"./check-UOmFXvji.js";import{X as f}from"./x-BjeGcAMI.js";import{C as T}from"./chevron-down-BFeqdzwj.js";const E=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],I=y("zap",E);function R({weeks:s,onToggle:o}){const r=s.filter(t=>t==="done").length,g=s.length;let d=0;for(let t=s.length-1;t>=0;t--)if(s[t]==="done")d++;else if(s[t]==="skipped"||s[t]===null)break;return e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-purple-400 font-bold",children:"Training Weeks"}),e.jsxs("div",{className:"text-xs text-gray-400",children:[r,"/",g," completed",d>1&&e.jsxs("span",{className:"text-amber-400 ml-2",children:["ðŸ”¥ ",d," week streak"]})]})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:s.map((t,p)=>e.jsx("button",{onClick:()=>o(p),className:`aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition-all active:scale-90 border-2 ${t==="done"?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":t==="skipped"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-gray-900/60 border-gray-700 text-gray-600 hover:border-gray-500"}`,children:t==="done"?e.jsx(j,{size:14}):t==="skipped"?e.jsx(f,{size:14}):e.jsxs("span",{className:"text-[10px]",children:["W",p+1]})},p))}),e.jsx("p",{className:"text-gray-500 text-[10px] mt-2 text-center",children:"Tap to cycle: empty â†’ done â†’ skipped â†’ empty"})]})}function O(s){if(!s)return 0;const o=s.findIndex(r=>r===null);return o===-1?s.length-1:o}const u={"Base Phase":{bg:"bg-blue-500/20",border:"border-blue-500/40",text:"text-blue-400",bar:"from-blue-600 to-blue-400"},"Build Phase":{bg:"bg-amber-500/20",border:"border-amber-500/40",text:"text-amber-400",bar:"from-amber-600 to-amber-400"},"Peak Phase":{bg:"bg-red-500/20",border:"border-red-500/40",text:"text-red-400",bar:"from-red-600 to-red-400"},Taper:{bg:"bg-emerald-500/20",border:"border-emerald-500/40",text:"text-emerald-400",bar:"from-emerald-600 to-emerald-400"}};function A({plan:s,trainingWeeks:o}){const[r,g]=w.useState(null),d=O(o);let t=0;const p=s.phases.map(a=>{const n=t,l=t+a.weeks;t=l;const m=(o||[]).slice(n,l).filter(k=>k==="done").length,c=a.weeks,x=c>0?Math.round(m/c*100):0,N=d>=n&&d<l,v=s.weeklyPlan.slice(n,l);return{...a,start:n,end:l,done:m,total:c,progress:x,isCurrent:N,weekRows:v}});return e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 mb-4",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-purple-400 font-bold mb-3",children:"Training Plan"}),e.jsx("div",{className:"space-y-2",children:p.map(a=>{const n=u[a.name]||u["Build Phase"],l=r===a.name;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>g(l?null:a.name),className:`w-full text-left rounded-xl p-3 border transition-all ${a.isCurrent?`${n.bg} ${n.border}`:"bg-gray-900/40 border-gray-700/40 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-bold ${a.isCurrent?n.text:"text-gray-300"}`,children:a.name}),a.isCurrent&&e.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${n.text} opacity-70`,children:"Current"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-gray-500",children:[a.done,"/",a.total," weeks"]}),e.jsx(T,{size:14,className:`text-gray-500 transition-transform ${l?"rotate-180":""}`})]})]}),e.jsx("div",{className:"w-full bg-gray-900/60 rounded-full h-1.5",children:e.jsx("div",{className:`bg-gradient-to-r ${n.bar} h-1.5 rounded-full transition-all duration-700`,style:{width:`${a.progress}%`}})}),e.jsx("p",{className:"text-gray-500 text-[11px] mt-1.5 leading-snug",children:a.description})]}),l&&e.jsx("div",{className:"mt-1 ml-2 border-l-2 border-gray-700/50 pl-3 space-y-1.5 py-1",children:a.weekRows.map(i=>{const m=i.week-1,c=(o||[])[m],x=m===d;return e.jsxs("div",{className:`rounded-lg p-2.5 text-xs transition-all ${x?`${n.bg} ${n.border} border`:c==="done"?"bg-emerald-900/15 border border-emerald-800/30":c==="skipped"?"bg-red-900/10 border border-red-800/20":"bg-gray-900/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsxs("span",{className:`font-bold ${x?n.text:"text-gray-300"}`,children:["Week ",i.week]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500",children:[i.targetKm,"km target"]}),c==="done"&&e.jsx(j,{size:12,className:"text-emerald-400"}),c==="skipped"&&e.jsx(f,{size:12,className:"text-red-400"})]})]}),e.jsx("div",{className:"text-gray-400",children:i.focus}),i.notes&&e.jsx("div",{className:"text-gray-600 text-[10px] mt-1 leading-snug",children:i.notes})]},i.week)})})]},a.name)})})]})}function H(){const{upcoming:s,updateEvent:o}=C();if(!s)return e.jsxs("div",{className:"px-4 pb-24 sm:pb-8 pt-16 text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸŽ¯"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"No Upcoming Event"}),e.jsx("p",{className:"text-gray-400 text-sm",children:'Add an event with status "upcoming" to see it here.'})]});const r=s.trainingPlan||null,g=d=>{const t=[...s.trainingWeeks||[]],p={null:"done",done:"skipped",skipped:null};t[d]=p[t[d]]??"done";const a=t.filter(i=>i==="done").length,n=Math.round(a/t.length*100),l={trainingWeeks:t,progress:n};if(r){const i=t.findIndex(x=>x===null),m=i===-1?t.length:i;let c=0;for(const x of r.phases){if(m<c+x.weeks){l.phase=x.name,l.week=`Week ${m+1} of ${r.totalWeeks}`;break}c+=x.weeks}i===-1&&(l.phase=r.phases[r.phases.length-1].name,l.week=`Week ${r.totalWeeks} of ${r.totalWeeks}`)}o(s.id,l)};return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[e.jsx("div",{className:"h-44 flex items-center justify-center relative",style:{background:s.heroImage||"linear-gradient(135deg, #dc2626 0%, #ea580c 100%)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-2",children:s.badge||"ðŸŽ¯"}),e.jsx("h2",{className:"text-2xl font-black text-white",children:s.name}),b(h(s.date))&&e.jsx("div",{className:"mt-2 inline-block bg-black/40 backdrop-blur rounded-full px-4 py-1",children:e.jsx("span",{className:"text-orange-400 font-black text-sm tracking-wide",children:b(h(s.date))})})]})}),e.jsx("div",{className:"px-4 -mt-6 relative",children:e.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-5",children:[s.distance&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx($,{size:16,className:"text-emerald-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-white font-bold",children:[s.distance,"km"]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Distance"})]}),s.elevation&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(P,{size:16,className:"text-orange-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-white font-bold",children:[s.elevation,"m"]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Elevation"})]}),s.date&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 text-center",children:[e.jsx(z,{size:16,className:"text-purple-400 mx-auto mb-1"}),e.jsx("div",{className:"text-white font-bold",children:s.date}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Date"})]})]}),s.phase&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsxs("span",{className:"text-gray-400 font-medium",children:[s.phase," Â· ",s.week]}),e.jsxs("span",{className:"text-amber-400 font-bold",children:[s.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 h-3 rounded-full transition-all duration-700",style:{width:`${s.progress}%`}})})]}),s.trainingWeeks?.length>0&&e.jsx(R,{weeks:s.trainingWeeks,onToggle:g}),r&&e.jsx(A,{plan:r,trainingWeeks:s.trainingWeeks}),s.route&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 mb-4",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-indigo-400 font-bold mb-2",children:"Route"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:s.route})]}),s.reasons?.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 mb-4",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-emerald-400 font-bold mb-2",children:"Why You'll Finish This"}),e.jsx("div",{className:"space-y-2",children:s.reasons.map((d,t)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(I,{size:14,className:"text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-300 text-sm",children:d})]},t))})]}),s.watchOuts?.length>0&&e.jsxs("div",{className:"bg-amber-900/20 border border-amber-700/30 rounded-xl p-4",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-amber-400 font-bold mb-2",children:"Watch-Outs"}),e.jsx("div",{className:"space-y-2",children:s.watchOuts.map((d,t)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(W,{size:14,className:"text-amber-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-300 text-sm",children:d})]},t))})]})]})})})]})}export{H as default};
