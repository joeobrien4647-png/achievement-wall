import{c as R,j as e,r as f,u as H,h as be,T as se,g as ye,a as ve,C as we}from"./index-yBuqoKGI.js";import{d as O,F as je,c as Z}from"./countdown-Br4Xd_wa.js";import{u as B}from"./useEvents-CvLkZclv.js";import{u as ae}from"./useStats-BMGZsBJ0.js";import{u as ke}from"./useMilestones-DAjHE8Wd.js";import{T as Ne,C as Ce}from"./ConfirmDialog-DdNBrVAV.js";import{X as ne}from"./x-BjeGcAMI.js";import{D as re,C as ie,S as Se}from"./share-2-ReMT972w.js";import{c as G,g as Ee,h as oe,a as Te}from"./streaks-DGNCr_2k.js";import{S as I}from"./sparkles-pi7GXVr9.js";import{P as Re}from"./plus-CVMpTSOe.js";import{C as le}from"./calendar-BREsfleD.js";import{C as De}from"./check-UOmFXvji.js";import{R as Ae}from"./route-E32te0-W.js";import{T as Me}from"./trending-up-DKkkamza.js";import{R as $e,A as ze,X as Le,Y as Pe,T as Fe,a as _e}from"./AreaChart-C73bK17h.js";import{C as Ue}from"./calculator-C7YCYLuC.js";import{U as We}from"./upload-BNIwyFmF.js";import"./pace-Dbu3TRjw.js";const Oe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F=R("arrow-right",Oe);const Ie=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],He=R("file-down",Ie);const Be=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ge=R("moon",Be);const Ye=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],qe=R("pause",Ye);const Je=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ve=R("printer",Je);const Ke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xe=R("rotate-ccw",Ke);const Qe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ze=R("settings",Qe);function et(s){const n={exportVersion:1,exportedAt:new Date().toISOString(),events:s.events,milestones:s.milestones,radarData:s.radarData,preferences:s.preferences},t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`achievement-wall-${new Date().toISOString().slice(0,10)}.json`,i.click(),URL.revokeObjectURL(r)}function tt(s){return new Promise((n,t)=>{const r=new FileReader;r.onload=i=>{try{const o=JSON.parse(i.target.result);if(!o.events||!Array.isArray(o.events)){t(new Error("Invalid file: missing events array"));return}n({events:o.events,milestones:o.milestones||[],radarData:o.radarData||[],preferences:o.preferences||{}})}catch{t(new Error("Invalid JSON file"))}},r.onerror=()=>t(new Error("Failed to read file")),r.readAsText(s)})}function W({value:s,target:n,label:t,unit:r,color:i}){const o=n>0?Math.min(s/n,1):0,c=36,h=2*Math.PI*c,a=h*(1-o);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",children:[e.jsx("circle",{cx:"44",cy:"44",r:c,fill:"none",stroke:"#1f2937",strokeWidth:"6"}),e.jsx("circle",{cx:"44",cy:"44",r:c,fill:"none",stroke:i,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:h,strokeDashoffset:a,transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),e.jsxs("text",{x:"44",y:"40",textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"800",children:[Math.round(o*100),"%"]}),e.jsxs("text",{x:"44",y:"54",textAnchor:"middle",fill:"#9ca3af",fontSize:"9",children:[s,"/",n,r]})]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider mt-1 font-medium",children:t})]})}function st({totalEvents:s,totalDistance:n,totalElevation:t,topEvents:r,badgesCount:i}){const h=document.createElement("canvas");h.width=900,h.height=1200;const a=h.getContext("2d"),p=a.createLinearGradient(0,0,900,1200);p.addColorStop(0,"#0f172a"),p.addColorStop(.5,"#1e1b4b"),p.addColorStop(1,"#0f172a"),a.fillStyle=p,a.fillRect(0,0,900,1200),a.globalAlpha=.08;const d=a.createRadialGradient(180,600,0,180,600,400);d.addColorStop(0,"#8b5cf6"),d.addColorStop(1,"transparent"),a.fillStyle=d,a.fillRect(0,0,900,1200);const m=a.createRadialGradient(720,600,0,720,600,400);m.addColorStop(0,"#ef4444"),m.addColorStop(1,"transparent"),a.fillStyle=m,a.fillRect(0,0,900,1200),a.globalAlpha=1,a.textAlign="center",a.fillStyle="#ffffff",a.font="bold 56px system-ui, -apple-system, sans-serif",a.fillText("JOE'S ENDURANCE CV",900/2,120),a.fillStyle="#6b7280",a.font="16px system-ui, -apple-system, sans-serif",a.fillText("Every kilometre earned. Every peak conquered.",900/2,160);const x=a.createLinearGradient(200,0,700,0);x.addColorStop(0,"transparent"),x.addColorStop(.5,"#374151"),x.addColorStop(1,"transparent"),a.fillStyle=x,a.fillRect(200,190,500,1);const b=[{val:`${s}`,label:"EVENTS",color:"#f59e0b"},{val:`${n}km`,label:"DISTANCE",color:"#10b981"},{val:`${(t/1e3).toFixed(1)}k m`,label:"ELEVATION",color:"#8b5cf6"},{val:`${i}`,label:"BADGES",color:"#ef4444"}],y=170,g=120,u=25,S=(900-(y*4+u*3))/2,E=230;b.forEach((w,D)=>{const k=S+D*(y+u);a.fillStyle="rgba(255,255,255,0.05)",_(a,k,E,y,g,16),a.fill(),a.strokeStyle="rgba(255,255,255,0.1)",a.lineWidth=1,_(a,k,E,y,g,16),a.stroke(),a.fillStyle="#ffffff",a.font="bold 36px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText(w.val,k+y/2,E+55),a.fillStyle=w.color,a.font="bold 11px system-ui, -apple-system, sans-serif",a.letterSpacing="2px",a.fillText(w.label,k+y/2,E+85),a.letterSpacing="0px"}),a.fillStyle="#6b7280",a.font="bold 12px system-ui, -apple-system, sans-serif",a.textAlign="left",a.fillText("TOP CHALLENGES",80,420),r.slice(0,5).forEach((w,D)=>{const k=450+D*100;a.fillStyle="rgba(255,255,255,0.03)",_(a,60,k,780,80,16),a.fill(),a.strokeStyle="rgba(255,255,255,0.06)",_(a,60,k,780,80,16),a.stroke(),a.font="32px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText(w.badge||"üèÜ",110,k+52),a.fillStyle="#ffffff",a.font="bold 22px system-ui, -apple-system, sans-serif",a.textAlign="left",a.fillText(w.name,155,k+38),a.fillStyle="#9ca3af",a.font="14px system-ui, -apple-system, sans-serif";const Y=[w.type,w.distance?`${w.distance}km`:null,w.location].filter(Boolean).join(" ¬∑ ");a.fillText(Y,155,k+62)});const L=1140;return a.fillStyle="#374151",a.fillRect(200,L-30,500,1),a.fillStyle="#4b5563",a.font="14px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText("Built with grit, tracked with code",900/2,L),h}function _(s,n,t,r,i,o){s.beginPath(),s.moveTo(n+o,t),s.lineTo(n+r-o,t),s.quadraticCurveTo(n+r,t,n+r,t+o),s.lineTo(n+r,t+i-o),s.quadraticCurveTo(n+r,t+i,n+r-o,t+i),s.lineTo(n+o,t+i),s.quadraticCurveTo(n,t+i,n,t+i-o),s.lineTo(n,t+o),s.quadraticCurveTo(n,t,n+o,t),s.closePath()}function ee(s){s.toBlob(n=>{const t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="endurance-cv.png",r.click(),URL.revokeObjectURL(t)},"image/png")}async function at(s){const n=await new Promise(t=>s.toBlob(t,"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":n})])}function nt({stats:s,onClose:n}){const t=f.useRef(null),[r,i]=f.useState(!1);f.useEffect(()=>{const c=st(s);t.current=c},[s]);const o=async()=>{try{await at(t.current),i(!0),setTimeout(()=>i(!1),2e3)}catch{ee(t.current)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"relative max-w-sm w-full",onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute -top-10 right-0 text-white/70 hover:text-white",children:e.jsx(ne,{size:24})}),e.jsx("canvas",{ref:c=>{c&&t.current&&c.getContext("2d").drawImage(t.current,0,0,c.width,c.height)},width:450,height:600,className:"w-full rounded-xl shadow-2xl"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>ee(t.current),className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-xl transition-colors",children:[e.jsx(re,{size:18})," Download PNG"]}),e.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-white font-medium py-3 rounded-xl border border-gray-700 transition-colors",children:[e.jsx(ie,{size:18})," ",r?"Copied!":"Copy"]})]})]})})}function rt(s){if(!s||s.length===0)return null;const n=new Date,t=new Date(n.getFullYear(),0,0),r=Math.floor((n-t)/(1e3*60*60*24)),i=n.getFullYear()*366+r;return s[i%s.length]}function it(s,n,t){return s!==null&&s>=0&&s<=7?s===0?`Today is the day. Go crush ${n}.`:s===1?`Tomorrow you face ${n}. You're ready.`:`${s} days until ${n}. Trust your training.`:t>4?`${t} weeks consistent. You're building something unbreakable.`:null}function ot(){const{state:s,dispatch:n}=H(),{upcoming:t}=B(),[r,i]=f.useState(!1),[o,c]=f.useState(""),h=s.preferences?.mantras??[],a=rt(h),p=s.preferences?.weeklyCheckins??[],{current:d}=G(p),m=t?.date?O(t.date):null,x=it(m,t?.name,d),b=()=>{const g=o.trim();g&&(n({type:"UPDATE_PREFERENCES",payload:{mantras:[...h,g]}}),c(""))},y=g=>{n({type:"UPDATE_PREFERENCES",payload:{mantras:h.filter((u,S)=>S!==g)}})};return!a&&!x?null:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>i(!0),className:"w-full bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50 text-center hover:border-gray-600 transition-all active:scale-[0.99]",children:[x&&e.jsx("div",{className:"text-amber-400 text-xs font-bold mb-2",children:x}),a&&e.jsxs("p",{className:"text-gray-200 text-sm italic leading-relaxed",children:["‚Äú",a,"‚Äù"]}),e.jsxs("div",{className:"text-gray-600 text-[10px] mt-2 flex items-center justify-center gap-1",children:[e.jsx(I,{size:10})," Tap for all mantras"]})]}),r&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center",onClick:()=>i(!1),children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-t-2xl sm:rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-800 p-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-white font-bold",children:"Your Mantras"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-white transition-colors",children:e.jsx(ne,{size:18})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[h.map((g,u)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-800/60 rounded-xl p-3 border border-gray-700/30 group",children:[e.jsx(I,{size:14,className:"text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-gray-300 text-sm flex-1 italic",children:["‚Äú",g,"‚Äù"]}),e.jsx("button",{onClick:()=>y(u),className:"text-gray-700 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(Ne,{size:14})})]},u)),h.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No mantras yet. Add one below."})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-900 border-t border-gray-800 p-4 z-10",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:g=>c(g.target.value),onKeyDown:g=>g.key==="Enter"&&b(),placeholder:"Add a mantra...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:b,className:"bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-3 transition-colors",children:e.jsx(Re,{size:18})})]})})]})})]})}const lt=[{id:"ach-first-blood",name:"First Blood",icon:"ü©∏",description:"Complete your first event",check:s=>s.totalEvents>=1},{id:"ach-half-century",name:"Half Century",icon:"5Ô∏è‚É£",description:"Complete a 50km+ event in a single push",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=50)},{id:"ach-century-club",name:"Century Club",icon:"üíØ",description:"Complete a 100km+ event ‚Äî welcome to the club",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-peak-bagger",name:"Peak Bagger",icon:"‚õ∞Ô∏è",description:"Summit 5+ different peaks across all events",check:(s,n)=>{const t=new Set;for(const r of n)if(r.status==="completed"&&r.peaks)for(const i of r.peaks)t.add(i);return t.size>=5}},{id:"ach-type-collector",name:"Type Collector",icon:"üé®",description:"Complete events in all 3 types: Mountain, Ultra, Urban",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.type));return t.has("Mountain")&&t.has("Ultra")&&t.has("Urban")}},{id:"ach-streak-machine",name:"Streak Machine",icon:"üî•",description:"Build a 4+ week training streak",check:(s,n,t)=>{const r=t?.weeklyCheckins??[],{longest:i}=G(r);return i>=4}},{id:"ach-repeat-offender",name:"Repeat Offender",icon:"üîÅ",description:"Complete the same event 3 or more times",check:(s,n)=>n.some(t=>t.status==="completed"&&(t.completions||1)>=3)},{id:"ach-high-roller",name:"High Roller",icon:"üé≤",description:"Complete a difficulty 5 event",check:(s,n)=>n.some(t=>t.status==="completed"&&t.difficulty===5)},{id:"ach-distance-king",name:"Distance King",icon:"üëë",description:"Accumulate 500km total distance",check:s=>s.totalDistance>=500},{id:"ach-elevation-master",name:"Elevation Master",icon:"üèîÔ∏è",description:"Accumulate 5,000m total elevation gain",check:s=>s.totalElevation>=5e3},{id:"ach-night-owl",name:"Night Owl",icon:"üåô",description:"Complete a 100km+ event (implies walking through the night)",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-bucket-lister",name:"Bucket Lister",icon:"üìã",description:"Promote 3+ wishlist challenges to upcoming or completed",check:(s,n)=>n.filter(r=>r.id.startsWith("wish-")&&(r.status==="upcoming"||r.status==="completed")).length>=3},{id:"chain-3-peaks",name:"Three Peaks Master",icon:"üèîÔ∏è",description:"Complete the Yorkshire, National, and Welsh 3 Peaks",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.id));return t.has("y3p-001")&&t.has("n3p-004")&&t.has("wish-w3pk0")}},{id:"chain-bg-trilogy",name:"Bob Graham Trilogy",icon:"üëë",description:"Complete the Bob Graham, Paddy Buckley, and Ramsay Rounds",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.id));return t.has("wish-bgr00")&&t.has("wish-paddy")&&t.has("wish-ramsy")}},{id:"chain-london-underground",name:"London Underground",icon:"üöá",description:"Complete 3 or more tube line walks",check:(s,n)=>{const t=["wish-piccl","wish-centl","wish-bakrl","wish-jubll","wish-nrthl","wish-victo","wish-distr","wish-metrl","wish-circl","wish-hammr"];return n.filter(i=>i.status==="completed"&&t.some(o=>i.id.startsWith(o))).length>=3}},{id:"chain-coast-to-coast",name:"Coast to Coast",icon:"üåä",description:"Complete Hadrian's Wall and the Coast to Coast Walk",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.id));return t.has("wish-hadri")&&t.has("wish-c2c00")}},{id:"chain-lake-district",name:"Lake District Legend",icon:"‚õ∞Ô∏è",description:"Summit Helvellyn, Great Gable, Skiddaw, and Blencathra",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.id));return t.has("wish-helve")&&t.has("wish-grgab")&&t.has("wish-skidd")&&t.has("wish-shrpe")}},{id:"chain-scottish-explorer",name:"Scottish Explorer",icon:"üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø",description:"Complete the West Highland Way, Rob Roy Way, and Speyside Way",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.id));return t.has("wish-whw00")&&t.has("wish-rroyw")&&t.has("wish-speyw")}}];function ct(s,n,t){const r=new Set((t?.unlockedAchievements??[]).map(o=>o.id)),i=[];for(const o of lt)if(!r.has(o.id))try{o.check(s,n,t)&&i.push({id:o.id,name:o.name,icon:o.icon,description:o.description,unlockedAt:new Date().toISOString()})}catch{}return i}function dt({onDone:s}){const n=f.useRef(null);return f.useEffect(()=>{const t=n.current;if(!t)return;const r=t.getContext("2d"),i=window.devicePixelRatio||1,o=t.clientWidth,c=t.clientHeight;t.width=o*i,t.height=c*i,r.scale(i,i);const h=["#f59e0b","#10b981","#8b5cf6","#ef4444","#ec4899","#06b6d4","#f97316","#84cc16"],a=Array.from({length:35},()=>({x:Math.random()*o,y:-10-Math.random()*40,vx:(Math.random()-.5)*3,vy:1.5+Math.random()*3,size:4+Math.random()*4,color:h[Math.floor(Math.random()*h.length)],rotation:Math.random()*Math.PI*2,rotSpeed:(Math.random()-.5)*.2,opacity:1})),p=performance.now(),d=2e3;let m;function x(b){const y=b-p,g=Math.min(y/d,1);r.clearRect(0,0,o,c);for(const u of a)u.x+=u.vx,u.vy+=.06,u.y+=u.vy,u.rotation+=u.rotSpeed,u.opacity=Math.max(0,1-g*1.2),r.save(),r.translate(u.x,u.y),r.rotate(u.rotation),r.globalAlpha=u.opacity,r.fillStyle=u.color,r.fillRect(-u.size/2,-u.size/2,u.size,u.size*.6),r.restore();g<1?m=requestAnimationFrame(x):s?.()}return m=requestAnimationFrame(x),()=>cancelAnimationFrame(m)},[s]),e.jsx("canvas",{ref:n,className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%"}})}function mt({achievements:s,onDismiss:n}){const[t,r]=f.useState([]),[i,o]=f.useState(null),[c,h]=f.useState(!1),[a,p]=f.useState(!1),d=f.useRef(null);f.useEffect(()=>{s&&s.length>0&&r([...s])},[s]),f.useEffect(()=>{if(i||t.length===0)return;const[x,...b]=t;return o(x),r(b),p(!1),be(),requestAnimationFrame(()=>h(!0)),d.current=setTimeout(()=>{h(!1),setTimeout(()=>{o(null),b.length===0&&n?.()},350)},4e3),()=>clearTimeout(d.current)},[t,i,n]);const m=f.useCallback(()=>p(!0),[]);return i?e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[200] flex justify-center pointer-events-none px-4 pt-4",children:e.jsxs("div",{className:`relative overflow-hidden bg-gray-900 border border-gray-700/60 rounded-2xl shadow-2xl shadow-black/40 max-w-sm w-full pointer-events-auto transition-all duration-350 ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:[!a&&e.jsx(dt,{onDone:m}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-emerald-400 to-indigo-500"}),e.jsxs("div",{className:"relative flex items-center gap-3 px-5 py-4",children:[e.jsx("div",{className:"text-4xl flex-shrink-0 animate-bounce",children:i.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-amber-400 font-bold mb-0.5",children:"Achievement Unlocked"}),e.jsx("div",{className:"text-white font-bold text-sm truncate",children:i.name}),e.jsx("div",{className:"text-gray-400 text-xs mt-0.5 leading-snug",children:i.description})]})]})]})}):null}function ce({value:s,suffix:n="",decimals:t=0}){const[r,i]=f.useState(0),o=f.useRef(!1),c=f.useRef(null);f.useEffect(()=>{if(o.current)return;if(typeof s!="number"||s===0){i(s||0);return}o.current=!0;const a=1500,p=performance.now();function d(x){return x>=1?1:1-Math.pow(2,-10*x)}function m(x){const b=x-p,y=Math.min(b/a,1),g=d(y);i(g*s),y<1?c.current=requestAnimationFrame(m):i(s)}return c.current=requestAnimationFrame(m),()=>{c.current&&cancelAnimationFrame(c.current)}},[s]);const h=t>0?r.toFixed(t):Math.round(r).toLocaleString();return e.jsxs("span",{children:[h,n]})}function de(){const s=Ee(),n=new Date(s);return n.setDate(n.getDate()+6),{monday:s,sunday:n}}function te(s){return s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function ht(s,n){const{monday:t,sunday:r}=de(),i=t.getTime(),o=new Date(r);o.setHours(23,59,59,999);const c=o.getTime();let h=0,a=0,p=0;(s||[]).forEach(m=>{if(m.status!=="completed"||!m.date)return;const x=new Date(m.date).getTime();x>=i&&x<=c&&(p++,h+=m.distance||0,a+=m.elevation||0)});const d=oe(n);return{distance:h,elevation:a,eventCount:p,checkedIn:d}}function xt({events:s,checkins:n}){const[t,r]=f.useState(!1),{monday:i,sunday:o}=de(),{distance:c,elevation:h,eventCount:a,checkedIn:p}=ht(s,n),d=`${te(i)} - ${te(o)}`,m=c>0||h>0||a>0,x=async()=>{const b=[`This Week (${d})`,`Distance: ${c}km`,`Elevation: ${h.toLocaleString()}m`,`Events: ${a}`,p?"Training check-in: Done":""].filter(Boolean);try{await navigator.clipboard.writeText(b.join(`
`)),r(!0),setTimeout(()=>r(!1),2e3)}catch{}};return e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16,className:"text-indigo-400"}),e.jsx("h3",{className:"text-sm font-bold text-white",children:"This Week"}),e.jsx("span",{className:"text-gray-500 text-xs",children:d})]}),e.jsx("button",{onClick:x,className:"p-1.5 rounded-lg bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 transition-colors",title:"Copy summary",children:t?e.jsx(De,{size:14,className:"text-emerald-400"}):e.jsx(ie,{size:14})})]}),m?e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:c,suffix:"km",label:"Distance",color:"#10b981"},{value:h,suffix:"m",label:"Elevation",color:"#8b5cf6"},{value:a,suffix:"",label:"Events",color:"#f59e0b"}].map(b=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-black text-white",children:e.jsx(ce,{value:b.value,suffix:b.suffix})}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider font-medium mt-0.5",style:{color:b.color},children:b.label})]},b.label))}):e.jsx("div",{className:"text-center py-3",children:e.jsx("p",{className:"text-gray-400 text-sm italic",children:"Fresh week ‚Äî what will you conquer?"})})]})}function ft(s,n,t){const r=n.filter(a=>a.status==="completed"),i=Math.max(...r.map(a=>a.difficulty||0),0),o=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),c=r.sort((a,p)=>(p.difficulty||0)-(a.difficulty||0)).map(a=>{const p=se[a.type]||"#6b7280",d=Array.from({length:5}).map((y,g)=>`<span style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:2px;background:${g<(a.difficulty||0)?"#fbbf24":"#374151"}"></span>`).join(""),m=a.distance?`${a.distance}km`:"",x=a.elevation?`${a.elevation.toLocaleString()}m`:"",b=m&&x?" &middot; ":"";return`
        <div class="event-card">
          <div class="event-header">
            <span class="event-name">${U(a.name)}</span>
            <span class="type-badge" style="background:${p}20;color:${p}">${U(a.type)}</span>
          </div>
          <div class="event-meta">
            ${m||x?`<span class="event-metrics">${m}${b}${x}</span>`:""}
            <span class="event-dots">${d}</span>
          </div>
        </div>`}).join(`
`),h=(s.funFacts||[]).map(a=>`
        <div class="fun-fact">
          <span class="fun-fact-icon">${a.icon}</span>
          <span>${U(a.text)}</span>
        </div>`).join(`
`);return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Joe's Endurance CV - A shareable profile of endurance achievements">
  <meta name="theme-color" content="#030712">
  <title>Joe's Endurance CV</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #030712;
      color: #e5e7eb;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 640px;
      margin: 0 auto;
      padding: 2rem 1.25rem 3rem;
    }

    /* ---- Header ---- */
    .header {
      text-align: center;
      margin-bottom: 2.5rem;
    }
    .header h1 {
      font-size: 1.5rem;
      font-weight: 800;
      letter-spacing: 0.05em;
      color: #ffffff;
    }
    .header .trophy { font-size: 1.75rem; }

    /* ---- Stat Grid ---- */
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 2rem;
    }
    @media (min-width: 480px) {
      .stat-grid { grid-template-columns: repeat(4, 1fr); }
    }
    .stat-card {
      background: #1f2937;
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
    }
    .stat-value {
      font-size: 1.5rem;
      font-weight: 800;
      color: #ffffff;
      line-height: 1.2;
    }
    .stat-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #9ca3af;
      margin-top: 0.25rem;
    }

    /* ---- Section headings ---- */
    .section-title {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 0.75rem;
    }

    /* ---- Event Cards ---- */
    .events-list { margin-bottom: 2rem; }
    .event-card {
      background: #1f2937;
      border-radius: 0.75rem;
      padding: 0.875rem 1rem;
      margin-bottom: 0.5rem;
    }
    .event-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.375rem;
    }
    .event-name {
      font-weight: 600;
      font-size: 0.875rem;
      color: #ffffff;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .type-badge {
      flex-shrink: 0;
      font-size: 0.625rem;
      font-weight: 700;
      padding: 0.125rem 0.5rem;
      border-radius: 9999px;
    }
    .event-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
    }
    .event-metrics {
      font-size: 0.75rem;
      color: #9ca3af;
    }
    .event-dots {
      display: flex;
      align-items: center;
    }

    /* ---- Fun Facts ---- */
    .fun-facts { margin-bottom: 2rem; }
    .fun-fact {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
      font-size: 0.8125rem;
      color: #d1d5db;
      line-height: 1.5;
      margin-bottom: 0.375rem;
    }
    .fun-fact-icon { flex-shrink: 0; }

    /* ---- Footer ---- */
    .footer {
      text-align: center;
      font-size: 0.6875rem;
      color: #6b7280;
      border-top: 1px solid #1f2937;
      padding-top: 1.5rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1><span class="trophy">üèÜ</span> JOE'S ENDURANCE CV</h1>
    </div>

    <div class="stat-grid">
      <div class="stat-card">
        <div class="stat-value">${s.totalEvents}</div>
        <div class="stat-label">Total Events</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${s.totalDistance}</div>
        <div class="stat-label">Total Km</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${s.totalElevation.toLocaleString()}</div>
        <div class="stat-label">Total Elevation (m)</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${i}/5</div>
        <div class="stat-label">Highest Difficulty</div>
      </div>
    </div>

    <div class="events-list">
      <div class="section-title">Completed Events</div>
      ${c}
    </div>

    ${h?`
    <div class="fun-facts">
      <div class="section-title">Fun Facts</div>
      ${h}
    </div>`:""}

    <div class="footer">
      Generated from Achievement Wall &bull; ${U(o)}
    </div>
  </div>
</body>
</html>`}function ut(s,n,t){const r=ft(s,n),i=new Blob([r],{type:"text/html;charset=utf-8"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=`endurance-cv-${new Date().toISOString().slice(0,10)}.html`,c.click(),URL.revokeObjectURL(o)}function U(s){return s?String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}function pt(){const s=ae(),{events:n}=B(),{state:t}=H(),r=()=>{ut(s,n,t.preferences)};return e.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(He,{size:18,className:"text-sky-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Export Profile HTML"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Shareable standalone page"})]})]})}const gt={backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"12px",color:"#fff",fontSize:12};function Ft({setPage:s}){const{completed:n,upcoming:t}=B(),r=ae(),{totalDistance:i,totalEvents:o,totalElevation:c,cumulativeData:h,yearStats:a}=r,{unlocked:p}=ke(),{state:d,dispatch:m}=H(),[x,b]=f.useState(!1),[y,g]=f.useState(!1),[u,S]=f.useState(null),[E,L]=f.useState(!1),[w,D]=f.useState(!1),[k,Y]=f.useState(!1),[q,J]=f.useState([]),V=f.useRef(null);f.useEffect(()=>{d.preferences?.unlockedAchievements||m({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[]}})},[d.preferences?.unlockedAchievements,m]),f.useEffect(()=>{if(!d.preferences?.unlockedAchievements)return;const l=ct(r,d.events,d.preferences);l.length>0&&(J(l),m({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[...d.preferences.unlockedAchievements,...l]}}))},[r,d.events,d.preferences?.unlockedAchievements,m]);const me=()=>et(d),he=async l=>{const j=l.target.files?.[0];if(j){try{const v=await tt(j);m({type:"IMPORT_DATA",payload:v}),S("success"),setTimeout(()=>S(null),2e3)}catch(v){S(v.message),setTimeout(()=>S(null),3e3)}l.target.value=""}},xe=()=>{m({type:"RESET_TO_SEED"}),g(!1),b(!1)},fe=Math.round(ye()/1024);return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[q.length>0&&e.jsx(mt,{achievements:q,onDismiss:()=>J([])}),e.jsxs("div",{className:"relative overflow-hidden",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 20% 50%, #8b5cf6 0%, transparent 50%), radial-gradient(circle at 80% 50%, #ef4444 0%, transparent 50%)"}}),e.jsxs("div",{className:"relative px-6 pt-12 pb-10 text-center max-w-xl mx-auto",children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>D(!0),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(Se,{size:18})}),e.jsx("button",{onClick:()=>b(!x),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(Ze,{size:18})})]}),e.jsx("div",{className:"text-5xl mb-4",children:"üèÜ"}),e.jsx("h1",{className:"text-3xl font-black tracking-tight text-white mb-2",children:"JOE'S ENDURANCE CV"}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Every kilometre earned. Every peak conquered. Every wall broken through."}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mt-8",children:[{num:o,suffix:"",label:"Events",color:"#f59e0b",icon:ve},{num:i,suffix:"km",label:"Distance",color:"#10b981",icon:Ae},{num:parseFloat((c/1e3).toFixed(1)),suffix:"k",decimals:1,label:"Elev (m)",color:"#8b5cf6",icon:Me},{num:100,suffix:"km",label:"Longest",color:"#ef4444",icon:je}].map((l,j)=>e.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-xl p-3 border border-white/10",children:[e.jsx(l.icon,{size:16,style:{color:l.color},className:"mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-black text-white",children:e.jsx(ce,{value:l.num,suffix:l.suffix,decimals:l.decimals||0})}),e.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:l.label})]},j))})]})]}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx(ot,{})}),e.jsx("div",{className:"px-4 mt-4",children:e.jsx(xt,{events:d.events,checkins:d.preferences?.weeklyCheckins??[]})}),(()=>{const l=d.preferences?.goals??{distance:500,elevation:5e3,events:10},j=new Date().getFullYear(),v=(T,A)=>{const $=Math.max(0,parseInt(A)||0);m({type:"UPDATE_PREFERENCES",payload:{goals:{...l,[T]:$}}})};return e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:a.hasYearDates?`${j} Goals`:"All-Time Goals"}),e.jsx("button",{onClick:()=>L(!E),className:"text-indigo-400 text-sm font-medium hover:text-indigo-300",children:E?"Done":"Edit"})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(W,{value:a.yearDistance,target:l.distance,label:"Distance",unit:"km",color:"#10b981"}),e.jsx(W,{value:a.yearElevation,target:l.elevation,label:"Elevation",unit:"m",color:"#8b5cf6"}),e.jsx(W,{value:a.yearEvents,target:l.events,label:"Events",unit:"",color:"#f59e0b"})]}),E&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-4 pt-4 border-t border-gray-700/50",children:[{key:"distance",label:"Distance (km)",val:l.distance},{key:"elevation",label:"Elevation (m)",val:l.elevation},{key:"events",label:"Events",val:l.events}].map(T=>e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:T.label}),e.jsx("input",{type:"number",value:T.val,onChange:A=>v(T.key,A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:border-indigo-500 focus:outline-none"})]},T.key))})]})]})})(),(()=>{const l=d.preferences?.weeklyCheckins??[],j=oe(l),{current:v,longest:T}=G(l),A=(()=>{if(v===0||l.length===0)return null;const N=[...new Set(l)].sort(),M=N.length-v;return M>=0&&M<N.length?new Date(N[M]).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):null})(),$=[4,8,12,26,52],K=$[$.length-1],ue=Math.min(v/K,1)*100,pe=Math.min(2,1+v/26);return e.jsxs("div",{className:"px-4 mt-4",children:[e.jsx("style",{children:`
              @keyframes confetti-burst {
                0% { transform: translate(0, 0) scale(1); opacity: 1; }
                100% { transform: translate(var(--cx), var(--cy)) scale(0); opacity: 0; }
              }
              @keyframes flame-pulse {
                0%, 100% { filter: brightness(1); }
                50% { filter: brightness(1.3); }
              }
              .confetti-particle {
                position: absolute;
                width: 8px;
                height: 8px;
                border-radius: 50%;
                animation: confetti-burst 0.7s ease-out forwards;
                pointer-events: none;
              }
            `}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl flex-shrink-0 select-none",style:{transform:`scale(${pe})`,transition:"transform 0.5s ease",animation:v>0?"flame-pulse 2s ease-in-out infinite":"none",transformOrigin:"center bottom"},children:v>0?"üî•":"‚ùÑÔ∏è"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-black text-xl leading-tight",children:v>0?`${v} week streak`:"No active streak"}),e.jsx("div",{className:"text-gray-500 text-xs mt-1",children:v>0?e.jsxs(e.Fragment,{children:["Best: ",T," weeks",A&&e.jsxs(e.Fragment,{children:[" ‚Ä¢ Started: ",A]})]}):"Check in weekly to build a streak"})]}),e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("button",{onClick:N=>{if(!j){m({type:"UPDATE_PREFERENCES",payload:{weeklyCheckins:Te(l)}});const z=N.currentTarget.parentElement,ge=["#f59e0b","#ef4444","#10b981","#8b5cf6","#3b82f6","#ec4899","#14b8a6","#f97316"];for(let P=0;P<8;P++){const C=document.createElement("div");C.className="confetti-particle";const X=P/8*2*Math.PI,Q=30+Math.random()*20;C.style.setProperty("--cx",`${Math.cos(X)*Q}px`),C.style.setProperty("--cy",`${Math.sin(X)*Q}px`),C.style.backgroundColor=ge[P],C.style.left="50%",C.style.top="50%",C.style.marginLeft="-4px",C.style.marginTop="-4px",z.appendChild(C),setTimeout(()=>C.remove(),700)}}},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${j?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:j?"‚úì Done":"I trained"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative h-2 bg-gray-900/60 rounded-full overflow-visible",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-500 to-amber-400 rounded-full transition-all duration-700",style:{width:`${ue}%`}}),$.map(N=>{const M=N/K*100,z=v>=N;return e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2",style:{left:`${M}%`},children:[e.jsx("div",{className:`w-3 h-3 rounded-full border-2 -ml-1.5 transition-colors ${z?"bg-amber-400 border-amber-300":"bg-gray-700 border-gray-600"}`}),e.jsxs("div",{className:`absolute top-4 left-1/2 -translate-x-1/2 text-[9px] font-bold whitespace-nowrap ${z?"text-amber-400":"text-gray-600"}`,children:[N,"w"]})]},N)})]})})]})]})})(),t&&e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("button",{onClick:()=>s("next"),className:"w-full bg-gradient-to-r from-red-900/60 to-orange-900/60 border border-red-700/40 rounded-2xl p-4 text-left hover:border-red-600/60 transition-all active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-red-400 font-bold mb-1",children:"Next Target"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:["üéØ ",t.name]}),e.jsxs("div",{className:"text-gray-400 text-sm mt-0.5",children:[t.distance,"km ¬∑ ",t.date," ¬∑ ",t.phase]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[Z(O(t.date))&&e.jsx("div",{className:"text-orange-400 text-xs font-bold",children:Z(O(t.date))}),e.jsx(we,{size:20,className:"text-red-400 ml-auto"})]})]}),e.jsx("div",{className:"mt-3 w-full bg-gray-900/60 rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 h-1.5 rounded-full transition-all duration-700",style:{width:`${t.progress}%`}})})]})}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Completed Challenges"}),e.jsxs("button",{onClick:()=>s("events"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["View all ",e.jsx(F,{size:14})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:[...n].reverse().map(l=>e.jsxs("button",{onClick:()=>s("events"),className:"flex-shrink-0 w-44 rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all text-left active:scale-[0.98]",children:[e.jsx("div",{className:"h-20 flex items-center justify-center text-4xl",style:{background:l.heroImage},children:l.badge}),e.jsxs("div",{className:"p-3 bg-gray-800/80",children:[e.jsx("div",{className:"text-white font-bold text-sm truncate",children:l.name}),e.jsxs("div",{className:"text-gray-400 text-xs mt-0.5 flex items-center gap-2",children:[l.distance&&e.jsxs("span",{children:[l.distance,"km"]}),e.jsx("span",{style:{color:se[l.type]},children:l.type})]}),l.completions>1&&e.jsxs("span",{className:"inline-block mt-1 bg-indigo-500/20 text-indigo-300 text-[10px] font-bold px-1.5 py-0.5 rounded",children:["√ó",l.completions]})]})]},l.id))})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Journey So Far"}),e.jsxs("button",{onClick:()=>s("stats"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["Full stats ",e.jsx(F,{size:14})]})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50",children:[e.jsx($e,{width:"100%",height:160,children:e.jsxs(ze,{data:h,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"homeGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(Le,{dataKey:"name",tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(Pe,{tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1,unit:"km"}),e.jsx(Fe,{contentStyle:gt,formatter:l=>[`${l}km`,"Total"]}),e.jsx(_e,{type:"monotone",dataKey:"total",stroke:"#10b981",strokeWidth:2,fill:"url(#homeGrad)",dot:{fill:"#10b981",r:4}})]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-1",children:"Cumulative distance across all events"})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Badges"}),e.jsxs("button",{onClick:()=>s("milestones"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["All badges ",e.jsx(F,{size:14})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:p.map((l,j)=>e.jsxs("div",{className:"flex-shrink-0 bg-gray-800/60 border border-gray-700/50 rounded-xl px-3 py-2.5 text-center min-w-[80px]",children:[e.jsx("div",{className:"text-2xl mb-1",children:l.icon}),e.jsx("div",{className:"text-[10px] text-gray-300 font-medium leading-tight",children:l.text})]},j))})]}),n.length>=3&&e.jsx("div",{className:"px-4 mt-6",children:e.jsx("button",{onClick:()=>s("wrapped"),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-4 border border-indigo-500/30 text-left hover:from-indigo-500 hover:to-purple-500 transition-all active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{size:20,className:"text-amber-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:"Year in Review"}),e.jsx("div",{className:"text-indigo-200 text-xs",children:"Your Wrapped-style journey recap"})]}),e.jsx(F,{size:16,className:"text-white/60 ml-auto"})]})})}),x&&e.jsx("div",{className:"px-4 mt-6",children:e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{size:18,className:"text-amber-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"OLED Black Mode"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"True black for AMOLED screens"})]})]}),e.jsx("button",{onClick:()=>m({type:"UPDATE_PREFERENCES",payload:{oledMode:!d.preferences?.oledMode}}),className:`relative w-11 h-6 rounded-full transition-colors ${d.preferences?.oledMode?"bg-amber-500":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${d.preferences?.oledMode?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{size:18,className:"text-cyan-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Reduced Motion"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Disable animations & transitions"})]})]}),e.jsx("button",{onClick:()=>m({type:"UPDATE_PREFERENCES",payload:{reducedMotion:!d.preferences?.reducedMotion}}),className:`relative w-11 h-6 rounded-full transition-colors ${d.preferences?.reducedMotion?"bg-cyan-500":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${d.preferences?.reducedMotion?"translate-x-5":""}`})})]}),e.jsx("h3",{className:"text-white font-bold text-sm mb-4",children:"Tools"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[e.jsxs("button",{onClick:()=>s("calendar"),className:"flex items-center gap-2 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(le,{size:18,className:"text-indigo-400"}),e.jsx("div",{className:"text-white text-sm font-medium",children:"Calendar"})]}),e.jsxs("button",{onClick:()=>s("pace"),className:"flex items-center gap-2 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(Ue,{size:18,className:"text-emerald-400"}),e.jsx("div",{className:"text-white text-sm font-medium",children:"Pace Calc"})]})]}),e.jsx("h3",{className:"text-white font-bold text-sm mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:me,className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(re,{size:18,className:"text-emerald-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Export Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Download as JSON file"})]})]}),e.jsxs("button",{onClick:()=>V.current?.click(),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(We,{size:18,className:"text-indigo-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Import Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Replace with JSON file"})]})]}),e.jsxs("button",{onClick:()=>window.print(),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(Ve,{size:18,className:"text-cyan-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Print / PDF"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Print-friendly view of your CV"})]})]}),e.jsx(pt,{}),e.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-red-900/30 hover:border-red-700/50 transition-colors text-left",children:[e.jsx(Xe,{size:18,className:"text-red-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Reset to Defaults"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Restore original seed data"})]})]})]}),u&&e.jsx("div",{className:`mt-3 text-sm px-3 py-2 rounded-lg ${u==="success"?"bg-emerald-900/30 text-emerald-300":"bg-red-900/30 text-red-300"}`,children:u==="success"?"Data imported successfully!":u}),e.jsxs("div",{className:"mt-3 text-center text-gray-600 text-[10px]",children:["Storage: ",fe,"KB used"]})]})}),e.jsx("input",{ref:V,type:"file",accept:".json",onChange:he,className:"hidden"}),y&&e.jsx(Ce,{title:"Reset All Data?",message:"This will replace all your events, milestones, and settings with the original defaults. This cannot be undone.",onConfirm:xe,onCancel:()=>g(!1)}),w&&e.jsx(nt,{stats:{totalEvents:o,totalDistance:i,totalElevation:c,topEvents:n.slice().reverse().slice(0,5),badgesCount:p.length},onClose:()=>D(!1)})]})}export{Ft as default};
