import{c as E,j as e,r as x,u as I,g as K,T as X}from"./index-ClocMNDQ.js";import{d as $,F as Q,c as U}from"./countdown-BK2vsd1A.js";import{u as W}from"./useEvents-DO3zeIMH.js";import{u as Z}from"./useStats-n_QR3oTZ.js";import{u as ee}from"./useMilestones-CT9SWyT6.js";import{T as te,C as se}from"./ConfirmDialog-24MLuSbi.js";import{X as G}from"./x-zsNgVwDR.js";import{c as O,T as ae,h as ne,a as re,R as le,A as oe,X as ie,Y as ce,b as de,d as me}from"./streaks-IOr6h85v.js";import{S as L}from"./sparkles-BktfSdhe.js";import{P as xe}from"./plus-CFBI2qCH.js";import{R as he,T as fe}from"./trending-up-C1znxJyn.js";import{C as ue}from"./chevron-right-Bg3S2_2g.js";const pe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],z=E("arrow-right",pe);const ge=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],be=E("copy",ge);const ye=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B=E("download",ye);const ve=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],je=E("moon",ve);const ke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ne=E("rotate-ccw",ke);const we=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ce=E("settings",we);const Se=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ee=E("share-2",Se);const Ae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Re=E("upload",Ae);function Te(a){const n={exportVersion:1,exportedAt:new Date().toISOString(),events:a.events,milestones:a.milestones,radarData:a.radarData,preferences:a.preferences},t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=`achievement-wall-${new Date().toISOString().slice(0,10)}.json`,l.click(),URL.revokeObjectURL(r)}function De(a){return new Promise((n,t)=>{const r=new FileReader;r.onload=l=>{try{const o=JSON.parse(l.target.result);if(!o.events||!Array.isArray(o.events)){t(new Error("Invalid file: missing events array"));return}n({events:o.events,milestones:o.milestones||[],radarData:o.radarData||[],preferences:o.preferences||{}})}catch{t(new Error("Invalid JSON file"))}},r.onerror=()=>t(new Error("Failed to read file")),r.readAsText(a)})}function _({value:a,target:n,label:t,unit:r,color:l}){const o=n>0?Math.min(a/n,1):0,m=36,f=2*Math.PI*m,s=f*(1-o);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",children:[e.jsx("circle",{cx:"44",cy:"44",r:m,fill:"none",stroke:"#1f2937",strokeWidth:"6"}),e.jsx("circle",{cx:"44",cy:"44",r:m,fill:"none",stroke:l,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:s,transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),e.jsxs("text",{x:"44",y:"40",textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"800",children:[Math.round(o*100),"%"]}),e.jsxs("text",{x:"44",y:"54",textAnchor:"middle",fill:"#9ca3af",fontSize:"9",children:[a,"/",n,r]})]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider mt-1 font-medium",children:t})]})}function Me({totalEvents:a,totalDistance:n,totalElevation:t,topEvents:r,badgesCount:l}){const f=document.createElement("canvas");f.width=900,f.height=1200;const s=f.getContext("2d"),g=s.createLinearGradient(0,0,900,1200);g.addColorStop(0,"#0f172a"),g.addColorStop(.5,"#1e1b4b"),g.addColorStop(1,"#0f172a"),s.fillStyle=g,s.fillRect(0,0,900,1200),s.globalAlpha=.08;const d=s.createRadialGradient(180,600,0,180,600,400);d.addColorStop(0,"#8b5cf6"),d.addColorStop(1,"transparent"),s.fillStyle=d,s.fillRect(0,0,900,1200);const u=s.createRadialGradient(720,600,0,720,600,400);u.addColorStop(0,"#ef4444"),u.addColorStop(1,"transparent"),s.fillStyle=u,s.fillRect(0,0,900,1200),s.globalAlpha=1,s.textAlign="center",s.fillStyle="#ffffff",s.font="bold 56px system-ui, -apple-system, sans-serif",s.fillText("JOE'S ENDURANCE CV",900/2,120),s.fillStyle="#6b7280",s.font="16px system-ui, -apple-system, sans-serif",s.fillText("Every kilometre earned. Every peak conquered.",900/2,160);const p=s.createLinearGradient(200,0,700,0);p.addColorStop(0,"transparent"),p.addColorStop(.5,"#374151"),p.addColorStop(1,"transparent"),s.fillStyle=p,s.fillRect(200,190,500,1);const y=[{val:`${a}`,label:"EVENTS",color:"#f59e0b"},{val:`${n}km`,label:"DISTANCE",color:"#10b981"},{val:`${(t/1e3).toFixed(1)}k m`,label:"ELEVATION",color:"#8b5cf6"},{val:`${l}`,label:"BADGES",color:"#ef4444"}],v=170,h=120,c=25,w=(900-(v*4+c*3))/2,C=230;y.forEach((j,A)=>{const b=w+A*(v+c);s.fillStyle="rgba(255,255,255,0.05)",D(s,b,C,v,h,16),s.fill(),s.strokeStyle="rgba(255,255,255,0.1)",s.lineWidth=1,D(s,b,C,v,h,16),s.stroke(),s.fillStyle="#ffffff",s.font="bold 36px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText(j.val,b+v/2,C+55),s.fillStyle=j.color,s.font="bold 11px system-ui, -apple-system, sans-serif",s.letterSpacing="2px",s.fillText(j.label,b+v/2,C+85),s.letterSpacing="0px"}),s.fillStyle="#6b7280",s.font="bold 12px system-ui, -apple-system, sans-serif",s.textAlign="left",s.fillText("TOP CHALLENGES",80,420),r.slice(0,5).forEach((j,A)=>{const b=450+A*100;s.fillStyle="rgba(255,255,255,0.03)",D(s,60,b,780,80,16),s.fill(),s.strokeStyle="rgba(255,255,255,0.06)",D(s,60,b,780,80,16),s.stroke(),s.font="32px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText(j.badge||"ðŸ†",110,b+52),s.fillStyle="#ffffff",s.font="bold 22px system-ui, -apple-system, sans-serif",s.textAlign="left",s.fillText(j.name,155,b+38),s.fillStyle="#9ca3af",s.font="14px system-ui, -apple-system, sans-serif";const T=[j.type,j.distance?`${j.distance}km`:null,j.location].filter(Boolean).join(" Â· ");s.fillText(T,155,b+62)});const R=1140;return s.fillStyle="#374151",s.fillRect(200,R-30,500,1),s.fillStyle="#4b5563",s.font="14px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText("Built with grit, tracked with code",900/2,R),f}function D(a,n,t,r,l,o){a.beginPath(),a.moveTo(n+o,t),a.lineTo(n+r-o,t),a.quadraticCurveTo(n+r,t,n+r,t+o),a.lineTo(n+r,t+l-o),a.quadraticCurveTo(n+r,t+l,n+r-o,t+l),a.lineTo(n+o,t+l),a.quadraticCurveTo(n,t+l,n,t+l-o),a.lineTo(n,t+o),a.quadraticCurveTo(n,t,n+o,t),a.closePath()}function F(a){a.toBlob(n=>{const t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="endurance-cv.png",r.click(),URL.revokeObjectURL(t)},"image/png")}async function ze(a){const n=await new Promise(t=>a.toBlob(t,"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":n})])}function _e({stats:a,onClose:n}){const t=x.useRef(null),[r,l]=x.useState(!1);x.useEffect(()=>{const m=Me(a);t.current=m},[a]);const o=async()=>{try{await ze(t.current),l(!0),setTimeout(()=>l(!1),2e3)}catch{F(t.current)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"relative max-w-sm w-full",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute -top-10 right-0 text-white/70 hover:text-white",children:e.jsx(G,{size:24})}),e.jsx("canvas",{ref:m=>{m&&t.current&&m.getContext("2d").drawImage(t.current,0,0,m.width,m.height)},width:450,height:600,className:"w-full rounded-xl shadow-2xl"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>F(t.current),className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-xl transition-colors",children:[e.jsx(B,{size:18})," Download PNG"]}),e.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-white font-medium py-3 rounded-xl border border-gray-700 transition-colors",children:[e.jsx(be,{size:18})," ",r?"Copied!":"Copy"]})]})]})})}function $e(a){if(!a||a.length===0)return null;const n=new Date,t=new Date(n.getFullYear(),0,0),r=Math.floor((n-t)/(1e3*60*60*24)),l=n.getFullYear()*366+r;return a[l%a.length]}function Oe(a,n,t){return a!==null&&a>=0&&a<=7?a===0?`Today is the day. Go crush ${n}.`:a===1?`Tomorrow you face ${n}. You're ready.`:`${a} days until ${n}. Trust your training.`:t>4?`${t} weeks consistent. You're building something unbreakable.`:null}function Pe(){const{state:a,dispatch:n}=I(),{upcoming:t}=W(),[r,l]=x.useState(!1),[o,m]=x.useState(""),f=a.preferences?.mantras??[],s=$e(f),g=a.preferences?.weeklyCheckins??[],{current:d}=O(g),u=t?.date?$(t.date):null,p=Oe(u,t?.name,d),y=()=>{const h=o.trim();h&&(n({type:"UPDATE_PREFERENCES",payload:{mantras:[...f,h]}}),m(""))},v=h=>{n({type:"UPDATE_PREFERENCES",payload:{mantras:f.filter((c,w)=>w!==h)}})};return!s&&!p?null:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>l(!0),className:"w-full bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50 text-center hover:border-gray-600 transition-all active:scale-[0.99]",children:[p&&e.jsx("div",{className:"text-amber-400 text-xs font-bold mb-2",children:p}),s&&e.jsxs("p",{className:"text-gray-200 text-sm italic leading-relaxed",children:["â€œ",s,"â€"]}),e.jsxs("div",{className:"text-gray-600 text-[10px] mt-2 flex items-center justify-center gap-1",children:[e.jsx(L,{size:10})," Tap for all mantras"]})]}),r&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center",onClick:()=>l(!1),children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-t-2xl sm:rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-800 p-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-white font-bold",children:"Your Mantras"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-white transition-colors",children:e.jsx(G,{size:18})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[f.map((h,c)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-800/60 rounded-xl p-3 border border-gray-700/30 group",children:[e.jsx(L,{size:14,className:"text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-gray-300 text-sm flex-1 italic",children:["â€œ",h,"â€"]}),e.jsx("button",{onClick:()=>v(c),className:"text-gray-700 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(te,{size:14})})]},c)),f.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No mantras yet. Add one below."})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-900 border-t border-gray-800 p-4 z-10",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:h=>m(h.target.value),onKeyDown:h=>h.key==="Enter"&&y(),placeholder:"Add a mantra...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:y,className:"bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-3 transition-colors",children:e.jsx(xe,{size:18})})]})})]})})]})}const Ue=[{id:"ach-first-blood",name:"First Blood",icon:"ðŸ©¸",description:"Complete your first event",check:a=>a.totalEvents>=1},{id:"ach-half-century",name:"Half Century",icon:"5ï¸âƒ£",description:"Complete a 50km+ event in a single push",check:(a,n)=>n.some(t=>t.status==="completed"&&t.distance>=50)},{id:"ach-century-club",name:"Century Club",icon:"ðŸ’¯",description:"Complete a 100km+ event â€” welcome to the club",check:(a,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-peak-bagger",name:"Peak Bagger",icon:"â›°ï¸",description:"Summit 5+ different peaks across all events",check:(a,n)=>{const t=new Set;for(const r of n)if(r.status==="completed"&&r.peaks)for(const l of r.peaks)t.add(l);return t.size>=5}},{id:"ach-type-collector",name:"Type Collector",icon:"ðŸŽ¨",description:"Complete events in all 3 types: Mountain, Ultra, Urban",check:(a,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.type));return t.has("Mountain")&&t.has("Ultra")&&t.has("Urban")}},{id:"ach-streak-machine",name:"Streak Machine",icon:"ðŸ”¥",description:"Build a 4+ week training streak",check:(a,n,t)=>{const r=t?.weeklyCheckins??[],{longest:l}=O(r);return l>=4}},{id:"ach-repeat-offender",name:"Repeat Offender",icon:"ðŸ”",description:"Complete the same event 3 or more times",check:(a,n)=>n.some(t=>t.status==="completed"&&(t.completions||1)>=3)},{id:"ach-high-roller",name:"High Roller",icon:"ðŸŽ²",description:"Complete a difficulty 5 event",check:(a,n)=>n.some(t=>t.status==="completed"&&t.difficulty===5)},{id:"ach-distance-king",name:"Distance King",icon:"ðŸ‘‘",description:"Accumulate 500km total distance",check:a=>a.totalDistance>=500},{id:"ach-elevation-master",name:"Elevation Master",icon:"ðŸ”ï¸",description:"Accumulate 5,000m total elevation gain",check:a=>a.totalElevation>=5e3},{id:"ach-night-owl",name:"Night Owl",icon:"ðŸŒ™",description:"Complete a 100km+ event (implies walking through the night)",check:(a,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-bucket-lister",name:"Bucket Lister",icon:"ðŸ“‹",description:"Promote 3+ wishlist challenges to upcoming or completed",check:(a,n)=>n.filter(r=>r.id.startsWith("wish-")&&(r.status==="upcoming"||r.status==="completed")).length>=3}];function Le(a,n,t){const r=new Set((t?.unlockedAchievements??[]).map(o=>o.id)),l=[];for(const o of Ue)if(!r.has(o.id))try{o.check(a,n,t)&&l.push({id:o.id,name:o.name,icon:o.icon,description:o.description,unlockedAt:new Date().toISOString()})}catch{}return l}function Fe({onDone:a}){const n=x.useRef(null);return x.useEffect(()=>{const t=n.current;if(!t)return;const r=t.getContext("2d"),l=window.devicePixelRatio||1,o=t.clientWidth,m=t.clientHeight;t.width=o*l,t.height=m*l,r.scale(l,l);const f=["#f59e0b","#10b981","#8b5cf6","#ef4444","#ec4899","#06b6d4","#f97316","#84cc16"],s=Array.from({length:35},()=>({x:Math.random()*o,y:-10-Math.random()*40,vx:(Math.random()-.5)*3,vy:1.5+Math.random()*3,size:4+Math.random()*4,color:f[Math.floor(Math.random()*f.length)],rotation:Math.random()*Math.PI*2,rotSpeed:(Math.random()-.5)*.2,opacity:1})),g=performance.now(),d=2e3;let u;function p(y){const v=y-g,h=Math.min(v/d,1);r.clearRect(0,0,o,m);for(const c of s)c.x+=c.vx,c.vy+=.06,c.y+=c.vy,c.rotation+=c.rotSpeed,c.opacity=Math.max(0,1-h*1.2),r.save(),r.translate(c.x,c.y),r.rotate(c.rotation),r.globalAlpha=c.opacity,r.fillStyle=c.color,r.fillRect(-c.size/2,-c.size/2,c.size,c.size*.6),r.restore();h<1?u=requestAnimationFrame(p):a?.()}return u=requestAnimationFrame(p),()=>cancelAnimationFrame(u)},[a]),e.jsx("canvas",{ref:n,className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%"}})}function Ie({achievements:a,onDismiss:n}){const[t,r]=x.useState([]),[l,o]=x.useState(null),[m,f]=x.useState(!1),[s,g]=x.useState(!1),d=x.useRef(null);x.useEffect(()=>{a&&a.length>0&&r([...a])},[a]),x.useEffect(()=>{if(l||t.length===0)return;const[p,...y]=t;return o(p),r(y),g(!1),requestAnimationFrame(()=>f(!0)),d.current=setTimeout(()=>{f(!1),setTimeout(()=>{o(null),y.length===0&&n?.()},350)},4e3),()=>clearTimeout(d.current)},[t,l,n]);const u=x.useCallback(()=>g(!0),[]);return l?e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[200] flex justify-center pointer-events-none px-4 pt-4",children:e.jsxs("div",{className:`relative overflow-hidden bg-gray-900 border border-gray-700/60 rounded-2xl shadow-2xl shadow-black/40 max-w-sm w-full pointer-events-auto transition-all duration-350 ${m?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:[!s&&e.jsx(Fe,{onDone:u}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-emerald-400 to-indigo-500"}),e.jsxs("div",{className:"relative flex items-center gap-3 px-5 py-4",children:[e.jsx("div",{className:"text-4xl flex-shrink-0 animate-bounce",children:l.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-amber-400 font-bold mb-0.5",children:"Achievement Unlocked"}),e.jsx("div",{className:"text-white font-bold text-sm truncate",children:l.name}),e.jsx("div",{className:"text-gray-400 text-xs mt-0.5 leading-snug",children:l.description})]})]})]})}):null}const We={backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"12px",color:"#fff",fontSize:12};function tt({setPage:a}){const{completed:n,upcoming:t}=W(),r=Z(),{totalDistance:l,totalEvents:o,totalElevation:m,cumulativeData:f,yearStats:s}=r,{unlocked:g}=ee(),{state:d,dispatch:u}=I(),[p,y]=x.useState(!1),[v,h]=x.useState(!1),[c,w]=x.useState(null),[C,R]=x.useState(!1),[j,A]=x.useState(!1),[b,T]=x.useState([]),P=x.useRef(null);x.useEffect(()=>{d.preferences?.unlockedAchievements||u({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[]}})},[d.preferences?.unlockedAchievements,u]),x.useEffect(()=>{if(!d.preferences?.unlockedAchievements)return;const i=Le(r,d.events,d.preferences);i.length>0&&(T(i),u({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[...d.preferences.unlockedAchievements,...i]}}))},[r,d.events,d.preferences?.unlockedAchievements,u]);const q=()=>Te(d),H=async i=>{const k=i.target.files?.[0];if(k){try{const S=await De(k);u({type:"IMPORT_DATA",payload:S}),w("success"),setTimeout(()=>w(null),2e3)}catch(S){w(S.message),setTimeout(()=>w(null),3e3)}i.target.value=""}},Y=()=>{u({type:"RESET_TO_SEED"}),h(!1),y(!1)},J=Math.round(K()/1024);return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[b.length>0&&e.jsx(Ie,{achievements:b,onDismiss:()=>T([])}),e.jsxs("div",{className:"relative overflow-hidden",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 20% 50%, #8b5cf6 0%, transparent 50%), radial-gradient(circle at 80% 50%, #ef4444 0%, transparent 50%)"}}),e.jsxs("div",{className:"relative px-6 pt-12 pb-10 text-center max-w-xl mx-auto",children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>A(!0),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(Ee,{size:18})}),e.jsx("button",{onClick:()=>y(!p),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(Ce,{size:18})})]}),e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ†"}),e.jsx("h1",{className:"text-3xl font-black tracking-tight text-white mb-2",children:"JOE'S ENDURANCE CV"}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Every kilometre earned. Every peak conquered. Every wall broken through."}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mt-8",children:[{val:o,label:"Events",color:"#f59e0b",icon:ae},{val:`${l}km`,label:"Distance",color:"#10b981",icon:he},{val:`${(m/1e3).toFixed(1)}k`,label:"Elev (m)",color:"#8b5cf6",icon:fe},{val:"100km",label:"Longest",color:"#ef4444",icon:Q}].map((i,k)=>e.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-xl p-3 border border-white/10",children:[e.jsx(i.icon,{size:16,style:{color:i.color},className:"mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-black text-white",children:i.val}),e.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:i.label})]},k))})]})]}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx(Pe,{})}),(()=>{const i=d.preferences?.goals??{distance:500,elevation:5e3,events:10},k=new Date().getFullYear(),S=(N,M)=>{const V=Math.max(0,parseInt(M)||0);u({type:"UPDATE_PREFERENCES",payload:{goals:{...i,[N]:V}}})};return e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:s.hasYearDates?`${k} Goals`:"All-Time Goals"}),e.jsx("button",{onClick:()=>R(!C),className:"text-indigo-400 text-sm font-medium hover:text-indigo-300",children:C?"Done":"Edit"})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(_,{value:s.yearDistance,target:i.distance,label:"Distance",unit:"km",color:"#10b981"}),e.jsx(_,{value:s.yearElevation,target:i.elevation,label:"Elevation",unit:"m",color:"#8b5cf6"}),e.jsx(_,{value:s.yearEvents,target:i.events,label:"Events",unit:"",color:"#f59e0b"})]}),C&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-4 pt-4 border-t border-gray-700/50",children:[{key:"distance",label:"Distance (km)",val:i.distance},{key:"elevation",label:"Elevation (m)",val:i.elevation},{key:"events",label:"Events",val:i.events}].map(N=>e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:N.label}),e.jsx("input",{type:"number",value:N.val,onChange:M=>S(N.key,M.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:border-indigo-500 focus:outline-none"})]},N.key))})]})]})})(),(()=>{const i=d.preferences?.weeklyCheckins??[],k=ne(i),{current:S,longest:N}=O(i);return e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:S>0?`ðŸ”¥ ${S} week streak`:"No active streak"}),e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:N>0?`Best: ${N} weeks`:"Check in weekly to build a streak"})]}),e.jsx("button",{onClick:()=>{k||u({type:"UPDATE_PREFERENCES",payload:{weeklyCheckins:re(i)}})},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${k?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:k?"âœ“ Done":"I trained"})]})})})(),t&&e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("button",{onClick:()=>a("next"),className:"w-full bg-gradient-to-r from-red-900/60 to-orange-900/60 border border-red-700/40 rounded-2xl p-4 text-left hover:border-red-600/60 transition-all active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-red-400 font-bold mb-1",children:"Next Target"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:["ðŸŽ¯ ",t.name]}),e.jsxs("div",{className:"text-gray-400 text-sm mt-0.5",children:[t.distance,"km Â· ",t.date," Â· ",t.phase]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[U($(t.date))&&e.jsx("div",{className:"text-orange-400 text-xs font-bold",children:U($(t.date))}),e.jsx(ue,{size:20,className:"text-red-400 ml-auto"})]})]}),e.jsx("div",{className:"mt-3 w-full bg-gray-900/60 rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 h-1.5 rounded-full transition-all duration-700",style:{width:`${t.progress}%`}})})]})}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Completed Challenges"}),e.jsxs("button",{onClick:()=>a("events"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["View all ",e.jsx(z,{size:14})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:[...n].reverse().map(i=>e.jsxs("button",{onClick:()=>a("events"),className:"flex-shrink-0 w-44 rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all text-left active:scale-[0.98]",children:[e.jsx("div",{className:"h-20 flex items-center justify-center text-4xl",style:{background:i.heroImage},children:i.badge}),e.jsxs("div",{className:"p-3 bg-gray-800/80",children:[e.jsx("div",{className:"text-white font-bold text-sm truncate",children:i.name}),e.jsxs("div",{className:"text-gray-400 text-xs mt-0.5 flex items-center gap-2",children:[i.distance&&e.jsxs("span",{children:[i.distance,"km"]}),e.jsx("span",{style:{color:X[i.type]},children:i.type})]}),i.completions>1&&e.jsxs("span",{className:"inline-block mt-1 bg-indigo-500/20 text-indigo-300 text-[10px] font-bold px-1.5 py-0.5 rounded",children:["Ã—",i.completions]})]})]},i.id))})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Journey So Far"}),e.jsxs("button",{onClick:()=>a("stats"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["Full stats ",e.jsx(z,{size:14})]})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50",children:[e.jsx(le,{width:"100%",height:160,children:e.jsxs(oe,{data:f,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"homeGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(ie,{dataKey:"name",tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ce,{tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1,unit:"km"}),e.jsx(de,{contentStyle:We,formatter:i=>[`${i}km`,"Total"]}),e.jsx(me,{type:"monotone",dataKey:"total",stroke:"#10b981",strokeWidth:2,fill:"url(#homeGrad)",dot:{fill:"#10b981",r:4}})]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-1",children:"Cumulative distance across all events"})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Badges"}),e.jsxs("button",{onClick:()=>a("milestones"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["All badges ",e.jsx(z,{size:14})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:g.map((i,k)=>e.jsxs("div",{className:"flex-shrink-0 bg-gray-800/60 border border-gray-700/50 rounded-xl px-3 py-2.5 text-center min-w-[80px]",children:[e.jsx("div",{className:"text-2xl mb-1",children:i.icon}),e.jsx("div",{className:"text-[10px] text-gray-300 font-medium leading-tight",children:i.text})]},k))})]}),p&&e.jsx("div",{className:"px-4 mt-6",children:e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{size:18,className:"text-amber-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"OLED Black Mode"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"True black for AMOLED screens"})]})]}),e.jsx("button",{onClick:()=>u({type:"UPDATE_PREFERENCES",payload:{oledMode:!d.preferences?.oledMode}}),className:`relative w-11 h-6 rounded-full transition-colors ${d.preferences?.oledMode?"bg-amber-500":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${d.preferences?.oledMode?"translate-x-5":""}`})})]}),e.jsx("h3",{className:"text-white font-bold text-sm mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:q,className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(B,{size:18,className:"text-emerald-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Export Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Download as JSON file"})]})]}),e.jsxs("button",{onClick:()=>P.current?.click(),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(Re,{size:18,className:"text-indigo-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Import Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Replace with JSON file"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-red-900/30 hover:border-red-700/50 transition-colors text-left",children:[e.jsx(Ne,{size:18,className:"text-red-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Reset to Defaults"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Restore original seed data"})]})]})]}),c&&e.jsx("div",{className:`mt-3 text-sm px-3 py-2 rounded-lg ${c==="success"?"bg-emerald-900/30 text-emerald-300":"bg-red-900/30 text-red-300"}`,children:c==="success"?"Data imported successfully!":c}),e.jsxs("div",{className:"mt-3 text-center text-gray-600 text-[10px]",children:["Storage: ",J,"KB used"]})]})}),e.jsx("input",{ref:P,type:"file",accept:".json",onChange:H,className:"hidden"}),v&&e.jsx(se,{title:"Reset All Data?",message:"This will replace all your events, milestones, and settings with the original defaults. This cannot be undone.",onConfirm:Y,onCancel:()=>h(!1)}),j&&e.jsx(_e,{stats:{totalEvents:o,totalDistance:l,totalElevation:m,topEvents:n.slice().reverse().slice(0,5),badgesCount:g.length},onClose:()=>A(!1)})]})}export{tt as default};
