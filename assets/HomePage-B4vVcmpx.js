import{c as A,j as e,r as m,u as G,g as Q,T as Z,C as ee,a as te}from"./index-CSeORV3c.js";import{d as P,F as se,c as I}from"./countdown-Dv4KlCvH.js";import{u as B}from"./useEvents-DgMYE35U.js";import{u as ae}from"./useStats-BqQidDyZ.js";import{u as ne}from"./useMilestones-5VvE1Mfb.js";import{T as re,C as ie}from"./ConfirmDialog-DaqLRoB6.js";import{X as q}from"./x-DeWaJnrZ.js";import{D as H,C as le,S as oe}from"./share-2-Cazxqz7a.js";import{c as F,h as ce,a as de}from"./streaks-BWXPJYOL.js";import{S as _}from"./sparkles-aybdghQ9.js";import{P as me}from"./plus-BPztX3p-.js";import{R as xe,T as fe}from"./trending-up-DlVIql3z.js";import{R as he,A as ue,X as pe,Y as ge,T as be,a as ye}from"./AreaChart-Ck3o1Q6z.js";import"./pace-Dbu3TRjw.js";const ve=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],D=A("arrow-right",ve);const je=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ke=A("moon",je);const Ne=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],we=A("printer",Ne);const Ce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Se=A("rotate-ccw",Ce);const Ee=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ae=A("settings",Ee);const Re=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],De=A("upload",Re);function Te(s){const n={exportVersion:1,exportedAt:new Date().toISOString(),events:s.events,milestones:s.milestones,radarData:s.radarData,preferences:s.preferences},t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`achievement-wall-${new Date().toISOString().slice(0,10)}.json`,i.click(),URL.revokeObjectURL(r)}function Me(s){return new Promise((n,t)=>{const r=new FileReader;r.onload=i=>{try{const l=JSON.parse(i.target.result);if(!l.events||!Array.isArray(l.events)){t(new Error("Invalid file: missing events array"));return}n({events:l.events,milestones:l.milestones||[],radarData:l.radarData||[],preferences:l.preferences||{}})}catch{t(new Error("Invalid JSON file"))}},r.onerror=()=>t(new Error("Failed to read file")),r.readAsText(s)})}function z({value:s,target:n,label:t,unit:r,color:i}){const l=n>0?Math.min(s/n,1):0,c=36,u=2*Math.PI*c,a=u*(1-l);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",children:[e.jsx("circle",{cx:"44",cy:"44",r:c,fill:"none",stroke:"#1f2937",strokeWidth:"6"}),e.jsx("circle",{cx:"44",cy:"44",r:c,fill:"none",stroke:i,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:a,transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),e.jsxs("text",{x:"44",y:"40",textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"800",children:[Math.round(l*100),"%"]}),e.jsxs("text",{x:"44",y:"54",textAnchor:"middle",fill:"#9ca3af",fontSize:"9",children:[s,"/",n,r]})]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider mt-1 font-medium",children:t})]})}function ze({totalEvents:s,totalDistance:n,totalElevation:t,topEvents:r,badgesCount:i}){const u=document.createElement("canvas");u.width=900,u.height=1200;const a=u.getContext("2d"),g=a.createLinearGradient(0,0,900,1200);g.addColorStop(0,"#0f172a"),g.addColorStop(.5,"#1e1b4b"),g.addColorStop(1,"#0f172a"),a.fillStyle=g,a.fillRect(0,0,900,1200),a.globalAlpha=.08;const x=a.createRadialGradient(180,600,0,180,600,400);x.addColorStop(0,"#8b5cf6"),x.addColorStop(1,"transparent"),a.fillStyle=x,a.fillRect(0,0,900,1200);const f=a.createRadialGradient(720,600,0,720,600,400);f.addColorStop(0,"#ef4444"),f.addColorStop(1,"transparent"),a.fillStyle=f,a.fillRect(0,0,900,1200),a.globalAlpha=1,a.textAlign="center",a.fillStyle="#ffffff",a.font="bold 56px system-ui, -apple-system, sans-serif",a.fillText("JOE'S ENDURANCE CV",900/2,120),a.fillStyle="#6b7280",a.font="16px system-ui, -apple-system, sans-serif",a.fillText("Every kilometre earned. Every peak conquered.",900/2,160);const p=a.createLinearGradient(200,0,700,0);p.addColorStop(0,"transparent"),p.addColorStop(.5,"#374151"),p.addColorStop(1,"transparent"),a.fillStyle=p,a.fillRect(200,190,500,1);const y=[{val:`${s}`,label:"EVENTS",color:"#f59e0b"},{val:`${n}km`,label:"DISTANCE",color:"#10b981"},{val:`${(t/1e3).toFixed(1)}k m`,label:"ELEVATION",color:"#8b5cf6"},{val:`${i}`,label:"BADGES",color:"#ef4444"}],b=170,h=120,d=25,w=(900-(b*4+d*3))/2,C=230;y.forEach((v,E)=>{const k=w+E*(b+d);a.fillStyle="rgba(255,255,255,0.05)",T(a,k,C,b,h,16),a.fill(),a.strokeStyle="rgba(255,255,255,0.1)",a.lineWidth=1,T(a,k,C,b,h,16),a.stroke(),a.fillStyle="#ffffff",a.font="bold 36px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText(v.val,k+b/2,C+55),a.fillStyle=v.color,a.font="bold 11px system-ui, -apple-system, sans-serif",a.letterSpacing="2px",a.fillText(v.label,k+b/2,C+85),a.letterSpacing="0px"}),a.fillStyle="#6b7280",a.font="bold 12px system-ui, -apple-system, sans-serif",a.textAlign="left",a.fillText("TOP CHALLENGES",80,420),r.slice(0,5).forEach((v,E)=>{const k=450+E*100;a.fillStyle="rgba(255,255,255,0.03)",T(a,60,k,780,80,16),a.fill(),a.strokeStyle="rgba(255,255,255,0.06)",T(a,60,k,780,80,16),a.stroke(),a.font="32px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText(v.badge||"ðŸ†",110,k+52),a.fillStyle="#ffffff",a.font="bold 22px system-ui, -apple-system, sans-serif",a.textAlign="left",a.fillText(v.name,155,k+38),a.fillStyle="#9ca3af",a.font="14px system-ui, -apple-system, sans-serif";const O=[v.type,v.distance?`${v.distance}km`:null,v.location].filter(Boolean).join(" Â· ");a.fillText(O,155,k+62)});const R=1140;return a.fillStyle="#374151",a.fillRect(200,R-30,500,1),a.fillStyle="#4b5563",a.font="14px system-ui, -apple-system, sans-serif",a.textAlign="center",a.fillText("Built with grit, tracked with code",900/2,R),u}function T(s,n,t,r,i,l){s.beginPath(),s.moveTo(n+l,t),s.lineTo(n+r-l,t),s.quadraticCurveTo(n+r,t,n+r,t+l),s.lineTo(n+r,t+i-l),s.quadraticCurveTo(n+r,t+i,n+r-l,t+i),s.lineTo(n+l,t+i),s.quadraticCurveTo(n,t+i,n,t+i-l),s.lineTo(n,t+l),s.quadraticCurveTo(n,t,n+l,t),s.closePath()}function W(s){s.toBlob(n=>{const t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="endurance-cv.png",r.click(),URL.revokeObjectURL(t)},"image/png")}async function Pe(s){const n=await new Promise(t=>s.toBlob(t,"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":n})])}function _e({stats:s,onClose:n}){const t=m.useRef(null),[r,i]=m.useState(!1);m.useEffect(()=>{const c=ze(s);t.current=c},[s]);const l=async()=>{try{await Pe(t.current),i(!0),setTimeout(()=>i(!1),2e3)}catch{W(t.current)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"relative max-w-sm w-full",onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute -top-10 right-0 text-white/70 hover:text-white",children:e.jsx(q,{size:24})}),e.jsx("canvas",{ref:c=>{c&&t.current&&c.getContext("2d").drawImage(t.current,0,0,c.width,c.height)},width:450,height:600,className:"w-full rounded-xl shadow-2xl"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>W(t.current),className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-xl transition-colors",children:[e.jsx(H,{size:18})," Download PNG"]}),e.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-white font-medium py-3 rounded-xl border border-gray-700 transition-colors",children:[e.jsx(le,{size:18})," ",r?"Copied!":"Copy"]})]})]})})}function Fe(s){if(!s||s.length===0)return null;const n=new Date,t=new Date(n.getFullYear(),0,0),r=Math.floor((n-t)/(1e3*60*60*24)),i=n.getFullYear()*366+r;return s[i%s.length]}function Oe(s,n,t){return s!==null&&s>=0&&s<=7?s===0?`Today is the day. Go crush ${n}.`:s===1?`Tomorrow you face ${n}. You're ready.`:`${s} days until ${n}. Trust your training.`:t>4?`${t} weeks consistent. You're building something unbreakable.`:null}function Ue(){const{state:s,dispatch:n}=G(),{upcoming:t}=B(),[r,i]=m.useState(!1),[l,c]=m.useState(""),u=s.preferences?.mantras??[],a=Fe(u),g=s.preferences?.weeklyCheckins??[],{current:x}=F(g),f=t?.date?P(t.date):null,p=Oe(f,t?.name,x),y=()=>{const h=l.trim();h&&(n({type:"UPDATE_PREFERENCES",payload:{mantras:[...u,h]}}),c(""))},b=h=>{n({type:"UPDATE_PREFERENCES",payload:{mantras:u.filter((d,w)=>w!==h)}})};return!a&&!p?null:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>i(!0),className:"w-full bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50 text-center hover:border-gray-600 transition-all active:scale-[0.99]",children:[p&&e.jsx("div",{className:"text-amber-400 text-xs font-bold mb-2",children:p}),a&&e.jsxs("p",{className:"text-gray-200 text-sm italic leading-relaxed",children:["â€œ",a,"â€"]}),e.jsxs("div",{className:"text-gray-600 text-[10px] mt-2 flex items-center justify-center gap-1",children:[e.jsx(_,{size:10})," Tap for all mantras"]})]}),r&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center",onClick:()=>i(!1),children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-t-2xl sm:rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-800 p-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-white font-bold",children:"Your Mantras"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-white transition-colors",children:e.jsx(q,{size:18})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[u.map((h,d)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-800/60 rounded-xl p-3 border border-gray-700/30 group",children:[e.jsx(_,{size:14,className:"text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-gray-300 text-sm flex-1 italic",children:["â€œ",h,"â€"]}),e.jsx("button",{onClick:()=>b(d),className:"text-gray-700 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(re,{size:14})})]},d)),u.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No mantras yet. Add one below."})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-900 border-t border-gray-800 p-4 z-10",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:h=>c(h.target.value),onKeyDown:h=>h.key==="Enter"&&y(),placeholder:"Add a mantra...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:y,className:"bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-3 transition-colors",children:e.jsx(me,{size:18})})]})})]})})]})}const Le=[{id:"ach-first-blood",name:"First Blood",icon:"ðŸ©¸",description:"Complete your first event",check:s=>s.totalEvents>=1},{id:"ach-half-century",name:"Half Century",icon:"5ï¸âƒ£",description:"Complete a 50km+ event in a single push",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=50)},{id:"ach-century-club",name:"Century Club",icon:"ðŸ’¯",description:"Complete a 100km+ event â€” welcome to the club",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-peak-bagger",name:"Peak Bagger",icon:"â›°ï¸",description:"Summit 5+ different peaks across all events",check:(s,n)=>{const t=new Set;for(const r of n)if(r.status==="completed"&&r.peaks)for(const i of r.peaks)t.add(i);return t.size>=5}},{id:"ach-type-collector",name:"Type Collector",icon:"ðŸŽ¨",description:"Complete events in all 3 types: Mountain, Ultra, Urban",check:(s,n)=>{const t=new Set(n.filter(r=>r.status==="completed").map(r=>r.type));return t.has("Mountain")&&t.has("Ultra")&&t.has("Urban")}},{id:"ach-streak-machine",name:"Streak Machine",icon:"ðŸ”¥",description:"Build a 4+ week training streak",check:(s,n,t)=>{const r=t?.weeklyCheckins??[],{longest:i}=F(r);return i>=4}},{id:"ach-repeat-offender",name:"Repeat Offender",icon:"ðŸ”",description:"Complete the same event 3 or more times",check:(s,n)=>n.some(t=>t.status==="completed"&&(t.completions||1)>=3)},{id:"ach-high-roller",name:"High Roller",icon:"ðŸŽ²",description:"Complete a difficulty 5 event",check:(s,n)=>n.some(t=>t.status==="completed"&&t.difficulty===5)},{id:"ach-distance-king",name:"Distance King",icon:"ðŸ‘‘",description:"Accumulate 500km total distance",check:s=>s.totalDistance>=500},{id:"ach-elevation-master",name:"Elevation Master",icon:"ðŸ”ï¸",description:"Accumulate 5,000m total elevation gain",check:s=>s.totalElevation>=5e3},{id:"ach-night-owl",name:"Night Owl",icon:"ðŸŒ™",description:"Complete a 100km+ event (implies walking through the night)",check:(s,n)=>n.some(t=>t.status==="completed"&&t.distance>=100)},{id:"ach-bucket-lister",name:"Bucket Lister",icon:"ðŸ“‹",description:"Promote 3+ wishlist challenges to upcoming or completed",check:(s,n)=>n.filter(r=>r.id.startsWith("wish-")&&(r.status==="upcoming"||r.status==="completed")).length>=3}];function $e(s,n,t){const r=new Set((t?.unlockedAchievements??[]).map(l=>l.id)),i=[];for(const l of Le)if(!r.has(l.id))try{l.check(s,n,t)&&i.push({id:l.id,name:l.name,icon:l.icon,description:l.description,unlockedAt:new Date().toISOString()})}catch{}return i}function Ie({onDone:s}){const n=m.useRef(null);return m.useEffect(()=>{const t=n.current;if(!t)return;const r=t.getContext("2d"),i=window.devicePixelRatio||1,l=t.clientWidth,c=t.clientHeight;t.width=l*i,t.height=c*i,r.scale(i,i);const u=["#f59e0b","#10b981","#8b5cf6","#ef4444","#ec4899","#06b6d4","#f97316","#84cc16"],a=Array.from({length:35},()=>({x:Math.random()*l,y:-10-Math.random()*40,vx:(Math.random()-.5)*3,vy:1.5+Math.random()*3,size:4+Math.random()*4,color:u[Math.floor(Math.random()*u.length)],rotation:Math.random()*Math.PI*2,rotSpeed:(Math.random()-.5)*.2,opacity:1})),g=performance.now(),x=2e3;let f;function p(y){const b=y-g,h=Math.min(b/x,1);r.clearRect(0,0,l,c);for(const d of a)d.x+=d.vx,d.vy+=.06,d.y+=d.vy,d.rotation+=d.rotSpeed,d.opacity=Math.max(0,1-h*1.2),r.save(),r.translate(d.x,d.y),r.rotate(d.rotation),r.globalAlpha=d.opacity,r.fillStyle=d.color,r.fillRect(-d.size/2,-d.size/2,d.size,d.size*.6),r.restore();h<1?f=requestAnimationFrame(p):s?.()}return f=requestAnimationFrame(p),()=>cancelAnimationFrame(f)},[s]),e.jsx("canvas",{ref:n,className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%"}})}function We({achievements:s,onDismiss:n}){const[t,r]=m.useState([]),[i,l]=m.useState(null),[c,u]=m.useState(!1),[a,g]=m.useState(!1),x=m.useRef(null);m.useEffect(()=>{s&&s.length>0&&r([...s])},[s]),m.useEffect(()=>{if(i||t.length===0)return;const[p,...y]=t;return l(p),r(y),g(!1),requestAnimationFrame(()=>u(!0)),x.current=setTimeout(()=>{u(!1),setTimeout(()=>{l(null),y.length===0&&n?.()},350)},4e3),()=>clearTimeout(x.current)},[t,i,n]);const f=m.useCallback(()=>g(!0),[]);return i?e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[200] flex justify-center pointer-events-none px-4 pt-4",children:e.jsxs("div",{className:`relative overflow-hidden bg-gray-900 border border-gray-700/60 rounded-2xl shadow-2xl shadow-black/40 max-w-sm w-full pointer-events-auto transition-all duration-350 ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:[!a&&e.jsx(Ie,{onDone:f}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-emerald-400 to-indigo-500"}),e.jsxs("div",{className:"relative flex items-center gap-3 px-5 py-4",children:[e.jsx("div",{className:"text-4xl flex-shrink-0 animate-bounce",children:i.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-amber-400 font-bold mb-0.5",children:"Achievement Unlocked"}),e.jsx("div",{className:"text-white font-bold text-sm truncate",children:i.name}),e.jsx("div",{className:"text-gray-400 text-xs mt-0.5 leading-snug",children:i.description})]})]})]})}):null}function Ge({value:s,suffix:n="",decimals:t=0}){const[r,i]=m.useState(0),l=m.useRef(!1),c=m.useRef(null);m.useEffect(()=>{if(l.current)return;if(typeof s!="number"||s===0){i(s||0);return}l.current=!0;const a=1500,g=performance.now();function x(p){return p>=1?1:1-Math.pow(2,-10*p)}function f(p){const y=p-g,b=Math.min(y/a,1),h=x(b);i(h*s),b<1?c.current=requestAnimationFrame(f):i(s)}return c.current=requestAnimationFrame(f),()=>{c.current&&cancelAnimationFrame(c.current)}},[s]);const u=t>0?r.toFixed(t):Math.round(r).toLocaleString();return e.jsxs("span",{children:[u,n]})}const Be={backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"12px",color:"#fff",fontSize:12};function rt({setPage:s}){const{completed:n,upcoming:t}=B(),r=ae(),{totalDistance:i,totalEvents:l,totalElevation:c,cumulativeData:u,yearStats:a}=r,{unlocked:g}=ne(),{state:x,dispatch:f}=G(),[p,y]=m.useState(!1),[b,h]=m.useState(!1),[d,w]=m.useState(null),[C,R]=m.useState(!1),[v,E]=m.useState(!1),[k,O]=m.useState(!1),[U,L]=m.useState([]),$=m.useRef(null);m.useEffect(()=>{x.preferences?.unlockedAchievements||f({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[]}})},[x.preferences?.unlockedAchievements,f]),m.useEffect(()=>{if(!x.preferences?.unlockedAchievements)return;const o=$e(r,x.events,x.preferences);o.length>0&&(L(o),f({type:"UPDATE_PREFERENCES",payload:{unlockedAchievements:[...x.preferences.unlockedAchievements,...o]}}))},[r,x.events,x.preferences?.unlockedAchievements,f]);const Y=()=>Te(x),J=async o=>{const j=o.target.files?.[0];if(j){try{const S=await Me(j);f({type:"IMPORT_DATA",payload:S}),w("success"),setTimeout(()=>w(null),2e3)}catch(S){w(S.message),setTimeout(()=>w(null),3e3)}o.target.value=""}},V=()=>{f({type:"RESET_TO_SEED"}),h(!1),y(!1)},K=Math.round(Q()/1024);return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[U.length>0&&e.jsx(We,{achievements:U,onDismiss:()=>L([])}),e.jsxs("div",{className:"relative overflow-hidden",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 20% 50%, #8b5cf6 0%, transparent 50%), radial-gradient(circle at 80% 50%, #ef4444 0%, transparent 50%)"}}),e.jsxs("div",{className:"relative px-6 pt-12 pb-10 text-center max-w-xl mx-auto",children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>E(!0),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>y(!p),className:"p-2 rounded-full bg-white/10 text-gray-400 hover:text-white hover:bg-white/20 transition-colors",children:e.jsx(Ae,{size:18})})]}),e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ†"}),e.jsx("h1",{className:"text-3xl font-black tracking-tight text-white mb-2",children:"JOE'S ENDURANCE CV"}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Every kilometre earned. Every peak conquered. Every wall broken through."}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mt-8",children:[{num:l,suffix:"",label:"Events",color:"#f59e0b",icon:Z},{num:i,suffix:"km",label:"Distance",color:"#10b981",icon:xe},{num:parseFloat((c/1e3).toFixed(1)),suffix:"k",decimals:1,label:"Elev (m)",color:"#8b5cf6",icon:fe},{num:100,suffix:"km",label:"Longest",color:"#ef4444",icon:se}].map((o,j)=>e.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-xl p-3 border border-white/10",children:[e.jsx(o.icon,{size:16,style:{color:o.color},className:"mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-black text-white",children:e.jsx(Ge,{value:o.num,suffix:o.suffix,decimals:o.decimals||0})}),e.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:o.label})]},j))})]})]}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx(Ue,{})}),(()=>{const o=x.preferences?.goals??{distance:500,elevation:5e3,events:10},j=new Date().getFullYear(),S=(N,M)=>{const X=Math.max(0,parseInt(M)||0);f({type:"UPDATE_PREFERENCES",payload:{goals:{...o,[N]:X}}})};return e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:a.hasYearDates?`${j} Goals`:"All-Time Goals"}),e.jsx("button",{onClick:()=>R(!C),className:"text-indigo-400 text-sm font-medium hover:text-indigo-300",children:C?"Done":"Edit"})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(z,{value:a.yearDistance,target:o.distance,label:"Distance",unit:"km",color:"#10b981"}),e.jsx(z,{value:a.yearElevation,target:o.elevation,label:"Elevation",unit:"m",color:"#8b5cf6"}),e.jsx(z,{value:a.yearEvents,target:o.events,label:"Events",unit:"",color:"#f59e0b"})]}),C&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-4 pt-4 border-t border-gray-700/50",children:[{key:"distance",label:"Distance (km)",val:o.distance},{key:"elevation",label:"Elevation (m)",val:o.elevation},{key:"events",label:"Events",val:o.events}].map(N=>e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:N.label}),e.jsx("input",{type:"number",value:N.val,onChange:M=>S(N.key,M.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:border-indigo-500 focus:outline-none"})]},N.key))})]})]})})(),(()=>{const o=x.preferences?.weeklyCheckins??[],j=ce(o),{current:S,longest:N}=F(o);return e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:S>0?`ðŸ”¥ ${S} week streak`:"No active streak"}),e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:N>0?`Best: ${N} weeks`:"Check in weekly to build a streak"})]}),e.jsx("button",{onClick:()=>{j||f({type:"UPDATE_PREFERENCES",payload:{weeklyCheckins:de(o)}})},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${j?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:j?"âœ“ Done":"I trained"})]})})})(),t&&e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("button",{onClick:()=>s("next"),className:"w-full bg-gradient-to-r from-red-900/60 to-orange-900/60 border border-red-700/40 rounded-2xl p-4 text-left hover:border-red-600/60 transition-all active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-red-400 font-bold mb-1",children:"Next Target"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:["ðŸŽ¯ ",t.name]}),e.jsxs("div",{className:"text-gray-400 text-sm mt-0.5",children:[t.distance,"km Â· ",t.date," Â· ",t.phase]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[I(P(t.date))&&e.jsx("div",{className:"text-orange-400 text-xs font-bold",children:I(P(t.date))}),e.jsx(ee,{size:20,className:"text-red-400 ml-auto"})]})]}),e.jsx("div",{className:"mt-3 w-full bg-gray-900/60 rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 h-1.5 rounded-full transition-all duration-700",style:{width:`${t.progress}%`}})})]})}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Completed Challenges"}),e.jsxs("button",{onClick:()=>s("events"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["View all ",e.jsx(D,{size:14})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:[...n].reverse().map(o=>e.jsxs("button",{onClick:()=>s("events"),className:"flex-shrink-0 w-44 rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all text-left active:scale-[0.98]",children:[e.jsx("div",{className:"h-20 flex items-center justify-center text-4xl",style:{background:o.heroImage},children:o.badge}),e.jsxs("div",{className:"p-3 bg-gray-800/80",children:[e.jsx("div",{className:"text-white font-bold text-sm truncate",children:o.name}),e.jsxs("div",{className:"text-gray-400 text-xs mt-0.5 flex items-center gap-2",children:[o.distance&&e.jsxs("span",{children:[o.distance,"km"]}),e.jsx("span",{style:{color:te[o.type]},children:o.type})]}),o.completions>1&&e.jsxs("span",{className:"inline-block mt-1 bg-indigo-500/20 text-indigo-300 text-[10px] font-bold px-1.5 py-0.5 rounded",children:["Ã—",o.completions]})]})]},o.id))})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Journey So Far"}),e.jsxs("button",{onClick:()=>s("stats"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["Full stats ",e.jsx(D,{size:14})]})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-4 border border-gray-700/50",children:[e.jsx(he,{width:"100%",height:160,children:e.jsxs(ue,{data:u,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"homeGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(pe,{dataKey:"name",tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ge,{tick:{fill:"#6b7280",fontSize:10},axisLine:!1,tickLine:!1,unit:"km"}),e.jsx(be,{contentStyle:Be,formatter:o=>[`${o}km`,"Total"]}),e.jsx(ye,{type:"monotone",dataKey:"total",stroke:"#10b981",strokeWidth:2,fill:"url(#homeGrad)",dot:{fill:"#10b981",r:4}})]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-1",children:"Cumulative distance across all events"})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Badges"}),e.jsxs("button",{onClick:()=>s("milestones"),className:"text-indigo-400 text-sm font-medium flex items-center gap-1 hover:text-indigo-300",children:["All badges ",e.jsx(D,{size:14})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar",children:g.map((o,j)=>e.jsxs("div",{className:"flex-shrink-0 bg-gray-800/60 border border-gray-700/50 rounded-xl px-3 py-2.5 text-center min-w-[80px]",children:[e.jsx("div",{className:"text-2xl mb-1",children:o.icon}),e.jsx("div",{className:"text-[10px] text-gray-300 font-medium leading-tight",children:o.text})]},j))})]}),n.length>=3&&e.jsx("div",{className:"px-4 mt-6",children:e.jsx("button",{onClick:()=>s("wrapped"),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-4 border border-indigo-500/30 text-left hover:from-indigo-500 hover:to-purple-500 transition-all active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{size:20,className:"text-amber-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:"Year in Review"}),e.jsx("div",{className:"text-indigo-200 text-xs",children:"Your Wrapped-style journey recap"})]}),e.jsx(D,{size:16,className:"text-white/60 ml-auto"})]})})}),p&&e.jsx("div",{className:"px-4 mt-6",children:e.jsxs("div",{className:"bg-gray-800/60 rounded-2xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{size:18,className:"text-amber-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"OLED Black Mode"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"True black for AMOLED screens"})]})]}),e.jsx("button",{onClick:()=>f({type:"UPDATE_PREFERENCES",payload:{oledMode:!x.preferences?.oledMode}}),className:`relative w-11 h-6 rounded-full transition-colors ${x.preferences?.oledMode?"bg-amber-500":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${x.preferences?.oledMode?"translate-x-5":""}`})})]}),e.jsx("h3",{className:"text-white font-bold text-sm mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Y,className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(H,{size:18,className:"text-emerald-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Export Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Download as JSON file"})]})]}),e.jsxs("button",{onClick:()=>$.current?.click(),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(De,{size:18,className:"text-indigo-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Import Data"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Replace with JSON file"})]})]}),e.jsxs("button",{onClick:()=>window.print(),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-gray-700/30 hover:border-gray-600 transition-colors text-left",children:[e.jsx(we,{size:18,className:"text-cyan-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Print / PDF"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Print-friendly view of your CV"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center gap-3 bg-gray-900/60 rounded-xl p-3 border border-red-900/30 hover:border-red-700/50 transition-colors text-left",children:[e.jsx(Se,{size:18,className:"text-red-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Reset to Defaults"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Restore original seed data"})]})]})]}),d&&e.jsx("div",{className:`mt-3 text-sm px-3 py-2 rounded-lg ${d==="success"?"bg-emerald-900/30 text-emerald-300":"bg-red-900/30 text-red-300"}`,children:d==="success"?"Data imported successfully!":d}),e.jsxs("div",{className:"mt-3 text-center text-gray-600 text-[10px]",children:["Storage: ",K,"KB used"]})]})}),e.jsx("input",{ref:$,type:"file",accept:".json",onChange:J,className:"hidden"}),b&&e.jsx(ie,{title:"Reset All Data?",message:"This will replace all your events, milestones, and settings with the original defaults. This cannot be undone.",onConfirm:V,onCancel:()=>h(!1)}),v&&e.jsx(_e,{stats:{totalEvents:l,totalDistance:i,totalElevation:c,topEvents:n.slice().reverse().slice(0,5),badgesCount:g.length},onClose:()=>E(!1)})]})}export{rt as default};
