import{c as S,j as e,G as L,B as D,r as p,i as z,E as O,T as w}from"./index-yBuqoKGI.js";import{u as A}from"./useEvents-CvLkZclv.js";import{M as $,c as G,C as _,S as W}from"./photos-CXRimizz.js";import{X as v}from"./x-BjeGcAMI.js";import{T as R}from"./trending-up-DKkkamza.js";import{U as q}from"./upload-BNIwyFmF.js";import{C as Y}from"./check-UOmFXvji.js";import{P as T}from"./plus-CVMpTSOe.js";import{C as H}from"./chevron-left-DP2YTUIO.js";import{C as X}from"./chevron-down-BFeqdzwj.js";const B=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],U=S("file-text",B);const K=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],I=S("package",K);const V=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],J=S("pound-sterling",V);function Q({value:l,onChange:n}){return e.jsx("div",{className:"grid grid-cols-4 gap-2",children:L.map(i=>e.jsx("button",{type:"button",onClick:()=>n(i),className:`h-12 rounded-xl border-2 transition-all ${l===i?"border-white scale-105 shadow-lg":"border-gray-700 hover:border-gray-500"}`,style:{background:i}},i))})}function Z({value:l,onChange:n}){return e.jsx("div",{className:"grid grid-cols-5 gap-2",children:D.map(i=>e.jsx("button",{type:"button",onClick:()=>n(i),className:`text-2xl h-11 rounded-xl border-2 transition-all flex items-center justify-center ${l===i?"border-white bg-gray-700 scale-105":"border-gray-700 bg-gray-800 hover:border-gray-500"}`,children:i},i))})}const ee=6371;function j(l){return l*Math.PI/180}function te(l,n,i,u){const d=j(i-l),h=j(u-n),c=Math.sin(d/2)**2+Math.cos(j(l))*Math.cos(j(i))*Math.sin(h/2)**2;return ee*2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function ae(l){let n=l.querySelectorAll("trk > trkseg > trkpt");n.length===0&&(n=l.querySelectorAll("rte > rtept"));const i=[];for(const u of n){const d=parseFloat(u.getAttribute("lat")),h=parseFloat(u.getAttribute("lon"));if(isNaN(d)||isNaN(h))continue;const c=u.querySelector("ele"),a=c?parseFloat(c.textContent):null;i.push({lat:d,lon:h,ele:isNaN(a)?null:a})}return i}function se(l){let n=1/0,i=-1/0,u=1/0,d=-1/0;for(const{lat:h,lon:c}of l)h<n&&(n=h),h>i&&(i=h),c<u&&(u=c),c>d&&(d=c);return{minLat:n,maxLat:i,minLon:u,maxLon:d}}function re(l){const i=new DOMParser().parseFromString(l,"application/xml");if(i.querySelector("parsererror"))throw new Error("Invalid GPX: XML parsing failed");const d=ae(i);if(d.length===0)throw new Error("Invalid GPX: no track or route points found");let h=0,c=0;const a=[];d[0].ele!=null&&a.push({dist:0,ele:d[0].ele});for(let y=1;y<d.length;y++){const o=d[y-1],m=d[y];h+=te(o.lat,o.lon,m.lat,m.lon),o.ele!=null&&m.ele!=null&&m.ele>o.ele&&(c+=m.ele-o.ele),m.ele!=null&&a.push({dist:h,ele:m.ele})}const b=Math.round(h*100)/100,f=Math.round(c);return{distance:b,elevationGain:f,elevationProfile:a,bounds:se(d),trackPoints:d.map(({lat:y,lon:o})=>({lat:y,lon:o}))}}function le({onImport:l}){const[n,i]=p.useState(null),[u,d]=p.useState(null),[h,c]=p.useState(!1),a=p.useRef(null),b=p.useCallback(s=>{if(!s)return;d(null),i(null);const g=new FileReader;g.onload=N=>{try{const k=re(N.target.result);i(k)}catch(k){d(k.message||"Failed to parse GPX file")}},g.onerror=()=>d("Failed to read file"),g.readAsText(s)},[]),f=p.useCallback(s=>{s.preventDefault(),c(!1);const g=s.dataTransfer?.files?.[0];g&&g.name.toLowerCase().endsWith(".gpx")?b(g):d("Please drop a .gpx file")},[b]),y=p.useCallback(s=>{s.preventDefault(),c(!0)},[]),o=p.useCallback(s=>{s.preventDefault(),c(!1)},[]),m=p.useCallback(s=>{b(s.target.files?.[0]),s.target.value=""},[b]),r=p.useCallback(()=>{!n||!l||l({distance:n.distance,elevationGain:n.elevationGain,trackPoints:n.trackPoints,elevationProfile:n.elevationProfile})},[n,l]),t=p.useCallback(()=>{i(null),d(null)},[]);return n?e.jsxs("div",{className:"bg-gray-800/60 rounded-xl border border-gray-700/50 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[e.jsx(U,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"GPX Imported"})]}),e.jsx("button",{type:"button",onClick:t,className:"text-gray-500 hover:text-gray-300 transition-colors",children:e.jsx(v,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:n.distance.toFixed(1)}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"km"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(R,{size:14,className:"text-orange-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.elevationGain.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"m gain"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx($,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.trackPoints.length.toLocaleString()})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"points"})]})]}),e.jsx("button",{type:"button",onClick:r,className:"w-full py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium transition-colors",children:"Apply to Event"})]}):e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>a.current?.click(),onDrop:f,onDragOver:y,onDragLeave:o,className:`w-full rounded-xl border-2 border-dashed p-6 flex flex-col items-center gap-2 transition-colors cursor-pointer ${h?"border-emerald-500 bg-emerald-500/10":"border-gray-700/50 bg-gray-800/60 hover:border-gray-600"}`,children:[e.jsx(q,{size:24,className:h?"text-emerald-400":"text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Drop a ",e.jsx("span",{className:"text-gray-300 font-medium",children:".gpx"})," file or click to browse"]})]}),e.jsx("input",{ref:a,type:"file",accept:".gpx",onChange:m,className:"hidden"}),u&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:u})]})}const E=["Clothing","Footwear","Navigation","Food & Water","Safety","Other"],P={Clothing:"ðŸ‘•",Footwear:"ðŸ¥¾",Navigation:"ðŸ§­","Food & Water":"ðŸ¥¤",Safety:"ðŸ›¡ï¸",Other:"ðŸ“¦"},M={Mountain:[{name:"Waterproofs",category:"Clothing",checked:!1},{name:"Warm layers",category:"Clothing",checked:!1},{name:"Gaiters",category:"Footwear",checked:!1},{name:"Trekking poles",category:"Other",checked:!1},{name:"Map",category:"Navigation",checked:!1},{name:"Compass",category:"Navigation",checked:!1},{name:"Headtorch",category:"Navigation",checked:!1},{name:"First aid kit",category:"Safety",checked:!1},{name:"Whistle",category:"Safety",checked:!1},{name:"Emergency shelter",category:"Safety",checked:!1}],Ultra:[{name:"Headtorch",category:"Navigation",checked:!1},{name:"Spare batteries",category:"Navigation",checked:!1},{name:"Blister kit",category:"Safety",checked:!1},{name:"Emergency blanket",category:"Safety",checked:!1},{name:"Energy gels",category:"Food & Water",checked:!1},{name:"Electrolytes",category:"Food & Water",checked:!1},{name:"Phone charger",category:"Other",checked:!1},{name:"Change of socks",category:"Footwear",checked:!1}],Urban:[{name:"Phone",category:"Navigation",checked:!1},{name:"Portable charger",category:"Other",checked:!1},{name:"Snacks",category:"Food & Water",checked:!1},{name:"Water bottle",category:"Food & Water",checked:!1},{name:"Rain jacket",category:"Clothing",checked:!1},{name:"Comfortable shoes",category:"Footwear",checked:!1},{name:"Cash",category:"Other",checked:!1}]};function ne({items:l=[],onChange:n,eventType:i="Mountain"}){const[u,d]=p.useState(""),[h,c]=p.useState("Other"),a=()=>{const r=u.trim();!r||l.some(s=>s.name.toLowerCase()===r.toLowerCase())||(n([...l,{name:r,category:h,checked:!1}]),d(""))},b=r=>{n(l.filter((t,s)=>s!==r))},f=r=>{n(l.map((t,s)=>s===r?{...t,checked:!t.checked}:t))},y=()=>{const r=M[i]||M.Mountain,t=new Set(l.map(g=>g.name.toLowerCase())),s=r.filter(g=>!t.has(g.name.toLowerCase()));n([...l,...s])},o=E.map(r=>({category:r,items:l.map((t,s)=>({...t,_index:s})).filter(t=>t.category===r)})).filter(r=>r.items.length>0),m=l.filter(r=>r.checked).length;return e.jsxs("div",{className:"space-y-3",children:[l.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[m,"/",l.length," packed"]}),e.jsx("div",{className:"flex-1 mx-3 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-300",style:{width:`${l.length>0?m/l.length*100:0}%`}})})]}),o.map(({category:r,items:t})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm",children:P[r]}),e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold",children:r})]}),e.jsx("div",{className:"space-y-1",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("button",{type:"button",onClick:()=>f(s._index),className:`w-5 h-5 rounded-md border flex-shrink-0 flex items-center justify-center transition-all ${s.checked?"bg-emerald-500 border-emerald-500":"border-gray-600 hover:border-gray-400"}`,children:s.checked&&e.jsx(Y,{size:12,className:"text-white"})}),e.jsx("span",{className:`text-sm flex-1 transition-colors ${s.checked?"text-gray-500 line-through":"text-gray-200"}`,children:s.name}),e.jsx("button",{type:"button",onClick:()=>b(s._index),className:"opacity-0 group-hover:opacity-100 text-gray-600 hover:text-red-400 transition-all p-0.5",children:e.jsx(v,{size:14})})]},s._index))})]},r)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:r=>d(r.target.value),onKeyDown:r=>r.key==="Enter"&&(r.preventDefault(),a()),placeholder:"Add item...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("select",{value:h,onChange:r=>c(r.target.value),className:"bg-gray-800 border border-gray-700 rounded-xl px-2 py-2 text-sm text-gray-300 focus:outline-none focus:border-indigo-500 appearance-none cursor-pointer",children:E.map(r=>e.jsxs("option",{value:r,children:[P[r]," ",r]},r))}),e.jsx("button",{type:"button",onClick:a,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(T,{size:16,className:"text-gray-400"})})]}),e.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-2 text-xs text-indigo-400 hover:text-indigo-300 font-medium transition-colors",children:[e.jsx(I,{size:14}),"Load ",i," template"]})]})}const oe=[{key:"entry",label:"Entry",color:"#6366f1"},{key:"travel",label:"Travel",color:"#10b981"},{key:"accommodation",label:"Accomm.",color:"#f59e0b"},{key:"gear",label:"Gear",color:"#f43f5e"},{key:"food",label:"Food",color:"#f97316"},{key:"other",label:"Other",color:"#6b7280"}];function x({label:l,children:n}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-1.5 block",children:l}),n]})}function ie({value:l,onChange:n}){return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(i=>e.jsx("button",{type:"button",onClick:()=>n(i),className:"p-1",children:e.jsx(W,{size:24,className:`transition-colors ${i<=l?"text-amber-400 fill-amber-400":"text-gray-600"}`})},i))})}function C({tags:l,onChange:n,placeholder:i}){const[u,d]=p.useState(""),h=()=>{const c=u.trim();c&&!l.includes(c)&&n([...l,c]),d("")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:l.map((c,a)=>e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-300 text-xs font-medium px-2.5 py-1 rounded-lg border border-indigo-500/20 flex items-center gap-1.5",children:[c,e.jsx("button",{type:"button",onClick:()=>n(l.filter((b,f)=>f!==a)),children:e.jsx(v,{size:12})})]},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:c=>d(c.target.value),onKeyDown:c=>c.key==="Enter"&&(c.preventDefault(),h()),placeholder:i,className:"flex-1 bg-gray-800 border border-gray-700 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500"}),e.jsx("button",{type:"button",onClick:h,className:"bg-gray-800 border border-gray-700 rounded-xl px-3 hover:border-gray-500 transition-colors",children:e.jsx(T,{size:16,className:"text-gray-400"})})]})]})}function F({icon:l,title:n,children:i,defaultOpen:u=!1}){const[d,h]=p.useState(u);return e.jsxs("div",{className:"border border-gray-700/50 rounded-xl overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>h(c=>!c),className:"w-full flex items-center gap-2.5 px-3.5 py-3 bg-gray-800/40 hover:bg-gray-800/70 transition-colors",children:[l&&e.jsx(l,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-bold text-white flex-1 text-left",children:n}),e.jsx(X,{size:16,className:`text-gray-500 transition-transform duration-200 ${d?"rotate-180":""}`})]}),d&&e.jsx("div",{className:"px-3.5 py-3 border-t border-gray-700/50",children:i})]})}function fe({eventId:l,onBack:n}){const{getEventById:i,addEvent:u,updateEvent:d}=A(),h=l?i(l):null,c=!!h,[a,b]=p.useState(()=>{if(h)return{...h};let t={};try{const s=sessionStorage.getItem("formPrefill");s&&(t=JSON.parse(s))}catch{}return{...z(),name:"",type:"Mountain",status:"completed",distance:"",elevation:"",location:"",date:"",time:"",difficulty:3,peaks:[],story:"",lessons:"",badge:"ðŸ”ï¸",heroImage:L[0],completions:1,phase:"",week:"",progress:0,route:"",reasons:[],watchOuts:[],...t}}),[f,y]=p.useState([]),o=(t,s)=>b(g=>({...g,[t]:s})),m=t=>{if(t.preventDefault(),!a.name?.trim()){y(["Name is required"]);return}const s={...a,distance:a.distance?Number(a.distance):null,elevation:a.elevation?Number(a.elevation):null,date:a.date||null,time:a.time||null,completions:Math.max(1,Number(a.completions)||1),color:w[a.type]||"#8b5cf6"};if(c)d(l,s);else{const g=u(s);if(!g.success){y(g.errors);return}}n()},r="w-full bg-gray-800 border border-gray-700 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-indigo-500 transition-colors";return e.jsxs("div",{className:"pb-24 sm:pb-8",children:[e.jsxs("div",{className:"h-32 flex items-center justify-center text-5xl relative",style:{background:a.heroImage},children:[e.jsx("button",{onClick:n,className:"absolute top-4 left-4 bg-black/40 backdrop-blur rounded-full p-2 text-white hover:bg-black/60",children:e.jsx(H,{size:18})}),e.jsx("span",{children:a.badge})]}),e.jsx("div",{className:"px-4 -mt-4 relative",children:e.jsxs("form",{onSubmit:m,className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsx("h2",{className:"text-xl font-black text-white",children:c?"Edit Event":"New Event"}),f.length>0&&e.jsx("div",{className:"bg-red-900/30 border border-red-700/40 rounded-xl p-3",children:f.map((t,s)=>e.jsx("p",{className:"text-red-300 text-sm",children:t},s))}),e.jsx(x,{label:"Event Name",children:e.jsx("input",{type:"text",value:a.name,onChange:t=>o("name",t.target.value),placeholder:"Yorkshire 3 Peaks",className:r,maxLength:80})}),e.jsx(x,{label:"Type",children:e.jsx("div",{className:"flex gap-2",children:O.map(t=>e.jsx("button",{type:"button",onClick:()=>o("type",t),className:`flex-1 py-2 rounded-xl text-sm font-bold transition-all ${a.type===t?"text-white border-2":"text-gray-400 bg-gray-800 border-2 border-gray-700 hover:border-gray-500"}`,style:a.type===t?{backgroundColor:w[t]+"30",borderColor:w[t]}:{},children:t},t))})}),e.jsx(x,{label:"Status",children:e.jsx("div",{className:"flex gap-2",children:["completed","upcoming","wishlist"].map(t=>e.jsx("button",{type:"button",onClick:()=>o("status",t),className:`flex-1 py-2 rounded-xl text-sm font-medium capitalize transition-all border-2 ${a.status===t?"bg-indigo-500/20 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-500"}`,children:t},t))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(x,{label:"Distance (km)",children:e.jsx("input",{type:"number",value:a.distance,onChange:t=>o("distance",t.target.value),placeholder:"38",className:r,min:"0",step:"0.1"})}),e.jsx(x,{label:"Elevation (m)",children:e.jsx("input",{type:"number",value:a.elevation,onChange:t=>o("elevation",t.target.value),placeholder:"1585",className:r,min:"0"})})]}),e.jsx(x,{label:"Import GPX Route",children:e.jsx(le,{onImport:({distance:t,elevationGain:s})=>{t&&o("distance",Math.round(t*10)/10),s&&o("elevation",Math.round(s))}})}),e.jsx(x,{label:"Location",children:e.jsx("input",{type:"text",value:a.location,onChange:t=>o("location",t.target.value),placeholder:"Yorkshire Dales",className:r})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(x,{label:"Date",children:e.jsx("input",{type:"date",value:a.date||"",onChange:t=>o("date",t.target.value),className:r})}),a.status==="completed"&&e.jsx(x,{label:"Finish Time (HH:MM:SS)",children:e.jsx("input",{type:"text",value:a.time||"",onChange:t=>o("time",t.target.value),placeholder:"12:34:56",className:r})})]}),e.jsx(x,{label:"Difficulty",children:e.jsx(ie,{value:a.difficulty,onChange:t=>o("difficulty",t)})}),a.status==="completed"&&e.jsx(x,{label:"Completions",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o("completions",Math.max(1,(a.completions||1)-1)),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"âˆ’"}),e.jsx("span",{className:"text-white font-bold text-xl w-8 text-center",children:a.completions||1}),e.jsx("button",{type:"button",onClick:()=>o("completions",(a.completions||1)+1),className:"w-10 h-10 rounded-xl bg-gray-800 border border-gray-700 text-white font-bold text-lg hover:border-gray-500",children:"+"})]})}),e.jsx(x,{label:"Peaks Summited",children:e.jsx(C,{tags:a.peaks||[],onChange:t=>o("peaks",t),placeholder:"Pen-y-ghent (694m)"})}),e.jsx(x,{label:"The Story",children:e.jsx("textarea",{value:a.story,onChange:t=>o("story",t.target.value),placeholder:"Tell the story of this event...",className:`${r} min-h-[100px] resize-y`})}),e.jsx(x,{label:"Lessons Learned",children:e.jsx("textarea",{value:a.lessons,onChange:t=>o("lessons",t.target.value),placeholder:"What did you learn?",className:`${r} min-h-[80px] resize-y`})}),e.jsx(x,{label:`Photos${(a.photos?.length||0)>0?` (${a.photos.length}/5)`:""}`,children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[(a.photos||[]).map((t,s)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden relative group",children:[e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>o("photos",a.photos.filter((g,N)=>N!==s)),className:"absolute top-1 right-1 bg-black/60 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity text-white",children:e.jsx(v,{size:12})})]},s)),(a.photos?.length||0)<5&&e.jsxs("label",{className:"aspect-square bg-gray-800 rounded-xl border-2 border-dashed border-gray-700 flex items-center justify-center cursor-pointer hover:border-gray-500 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async t=>{const s=t.target.files?.[0];if(s){try{const g=await G(s);o("photos",[...a.photos||[],g])}catch{}t.target.value=""}}}),e.jsxs("div",{className:"text-center",children:[e.jsx(_,{size:18,className:"text-gray-600 mx-auto"}),e.jsx("span",{className:"text-[10px] text-gray-600 mt-1 block",children:"Add"})]})]})]})}),e.jsx(F,{icon:I,title:`Kit List${(a.kitList?.length||0)>0?` (${a.kitList.length})`:""}`,children:e.jsx(ne,{items:a.kitList||[],onChange:t=>o("kitList",t),eventType:a.type})}),e.jsxs(F,{icon:J,title:"Costs",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:oe.map(t=>e.jsx(x,{label:t.label,children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"Â£"}),e.jsx("input",{type:"number",value:a.costs?.[t.key]||"",onChange:s=>o("costs",{...a.costs||{},[t.key]:s.target.value===""?0:Number(s.target.value)}),placeholder:"0",className:r+" pl-7",min:"0",step:"0.01"})]})},t.key))}),(()=>{const t=Object.values(a.costs||{}).reduce((s,g)=>s+(Number(g)||0),0);return t>0?e.jsxs("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-gray-700/50",children:[e.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Total"}),e.jsxs("span",{className:"text-white font-black text-lg",children:["Â£",t.toLocaleString()]})]}):null})()]}),a.status==="upcoming"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Route Description",children:e.jsx("textarea",{value:a.route||"",onChange:t=>o("route",t.target.value),placeholder:"Describe the route...",className:`${r} min-h-[80px] resize-y`})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(x,{label:"Training Phase",children:e.jsx("input",{type:"text",value:a.phase||"",onChange:t=>o("phase",t.target.value),placeholder:"Build Phase",className:r})}),e.jsx(x,{label:"Current Week",children:e.jsx("input",{type:"text",value:a.week||"",onChange:t=>o("week",t.target.value),placeholder:"Week 1 of 12",className:r})})]}),e.jsx(x,{label:`Training Progress (${a.progress||0}%)`,children:e.jsx("input",{type:"range",min:"0",max:"100",value:a.progress||0,onChange:t=>o("progress",Number(t.target.value)),className:"w-full accent-red-500"})}),e.jsx(x,{label:"Why You'll Finish",children:e.jsx(C,{tags:a.reasons||[],onChange:t=>o("reasons",t),placeholder:"Add a reason..."})}),e.jsx(x,{label:"Watch-Outs",children:e.jsx(C,{tags:a.watchOuts||[],onChange:t=>o("watchOuts",t),placeholder:"Add a watch-out..."})})]}),a.status==="wishlist"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Why does this appeal to you?",children:e.jsx("textarea",{value:a.appeal||"",onChange:t=>o("appeal",t.target.value),placeholder:"What draws you to this challenge...",className:`${r} min-h-[80px] resize-y`})}),e.jsx(x,{label:"Target Year",children:e.jsx("input",{type:"number",value:a.targetYear||"",onChange:t=>o("targetYear",t.target.value?Number(t.target.value):null),placeholder:`${new Date().getFullYear()+1}`,className:r,min:"2024",max:"2040"})})]}),e.jsx(x,{label:"Badge",children:e.jsx(Z,{value:a.badge,onChange:t=>o("badge",t)})}),e.jsx(x,{label:"Banner Gradient",children:e.jsx(Q,{value:a.heroImage,onChange:t=>o("heroImage",t)})})]}),e.jsx("div",{className:"border-t border-gray-800 p-5",children:e.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 transition-colors active:scale-[0.98]",children:c?"Save Changes":"Add Event"})})]})})]})}export{fe as default};
