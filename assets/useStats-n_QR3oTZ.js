import{u as O,r as R}from"./index-ClocMNDQ.js";function T(o){if(!o)return null;const n=o.split(":").map(Number);return n.some(isNaN)?null:n.length===3?n[0]*3600+n[1]*60+n[2]:n.length===2?n[0]*3600+n[1]*60:null}function I(o){if(o==null)return null;const n=Math.floor(o/3600),a=Math.floor(o%3600/60);return n===0?`${a}min`:`${n}h ${a}m`}function q(o,n){const a=T(o);return!a||!n||n<=0?null:a/n}function z(o){if(o==null)return null;const n=Math.floor(o/60),a=Math.round(o%60);return`${n}:${a.toString().padStart(2,"0")} /km`}function J(){const{state:o}=O(),n=o.events.filter(s=>s.status==="completed"),a=o.preferences?.bodyWeight??102;return R.useMemo(()=>{const s=n.reduce((t,e)=>t+(e.distance||0)*(e.completions||1),0),$=n.reduce((t,e)=>t+(e.completions||1),0),l=n.reduce((t,e)=>t+(e.elevation||0)*(e.completions||1),0),h=Math.max(...n.map(t=>t.elevation||0),0),w=n.find(t=>t.elevation===h),k=n.filter(t=>t.distance).sort((t,e)=>t.distance-e.distance).map(t=>({name:t.name.length>16?t.name.slice(0,14)+"â€¦":t.name,distance:t.distance,fill:t.color})),x=n.filter(t=>t.distance).sort((t,e)=>t.distance-e.distance).reduce((t,e)=>{const j=t.length>0?t[t.length-1].total:0;return t.push({name:e.name.length>14?e.name.slice(0,12)+"â€¦":e.name,total:j+(e.distance||0)*(e.completions||1)}),t},[]),M=Object.entries(n.reduce((t,e)=>(t[e.type]=(t[e.type]||0)+(e.completions||1),t),{})).map(([t,e])=>({name:t,value:e})),S=n.filter(t=>t.distance),b=n.filter(t=>t.elevation),r=S.sort((t,e)=>e.distance-t.distance)[0],c=b.sort((t,e)=>e.elevation-t.elevation)[0],u=[...n].sort((t,e)=>e.difficulty-t.difficulty)[0],m=[...n].sort((t,e)=>e.completions-t.completions)[0],d=n.map(t=>({...t,pace:q(t.time,t.distance)})).filter(t=>t.pace!=null).sort((t,e)=>t.pace-e.pace)[0]||null,C={longestDistance:r?{value:r.distance,name:r.name}:null,mostElevation:c?{value:c.elevation,name:c.name}:null,hardestEvent:u?{value:u.difficulty,name:u.name}:null,mostCompletions:m?{value:m.completions,name:m.name}:null,fastestPace:d?{value:z(d.pace),name:d.name}:null},P=s>400?"Edinburgh":s>300?"Manchester":"Bristol",Y=[{icon:"ðŸ—ºï¸",text:`${s}km is roughly London to ${P}`},{icon:"ðŸ”ï¸",text:`${l.toLocaleString()}m of climbing â€” ${(l/8849*100).toFixed(1)}% of Everest from sea level`},{icon:"â±ï¸",text:`At average walking pace, that's ~${Math.round(s/5)} hours on your feet`},{icon:"ðŸ‘Ÿ",text:`At ~${a}kg, your legs have moved approximately ${Math.round(s*a).toLocaleString()}kgÂ·km of bodyweight`}],p=new Date().getFullYear(),g=n.filter(t=>t.date&&new Date(t.date).getFullYear()===p),f=g.length>0,v=f?g:n,y=v.reduce((t,e)=>t+(e.distance||0)*(e.completions||1),0),E=v.reduce((t,e)=>t+(e.elevation||0)*(e.completions||1),0),F=v.reduce((t,e)=>t+(e.completions||1),0),D=p-1,i=n.filter(t=>t.date&&new Date(t.date).getFullYear()===D),A=i.reduce((t,e)=>t+(e.distance||0)*(e.completions||1),0),B=i.reduce((t,e)=>t+(e.elevation||0)*(e.completions||1),0),L=i.reduce((t,e)=>t+(e.completions||1),0),N={current:{year:p,distance:y,elevation:E,events:F},previous:{year:D,distance:A,elevation:B,events:L},hasData:f||i.length>0},W=n.filter(t=>t.date&&t.difficulty).sort((t,e)=>t.date.localeCompare(e.date)).map(t=>({name:t.name.length>14?t.name.slice(0,12)+"â€¦":t.name,difficulty:t.difficulty,date:t.date}));return{totalDistance:s,totalEvents:$,totalElevation:l,highestPeak:h,highestPeakEvent:w,distanceData:k,cumulativeData:x,typeBreakdown:M,personalRecords:C,funFacts:Y,yearStats:{yearDistance:y,yearElevation:E,yearEvents:F,hasYearDates:f},yoyComparison:N,difficultyProgression:W}},[n,a])}export{z as a,q as c,I as f,T as p,J as u};
